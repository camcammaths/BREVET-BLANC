<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brevet Blanc Maths â€“ Exercices CorrigÃ©s en Ligne | 3Ã¨me</title>
<meta name="description" content="PrÃ©parez votre brevet blanc de maths avec des exercices interactifs corrigÃ©s par IA. Simulateur d'examen chronomÃ©trÃ©, corrigÃ©s dÃ©taillÃ©s, suivi de progression. Gratuit pour les Ã©lÃ¨ves de 3Ã¨me.">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Source+Serif+4:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Source+Code+Pro:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{
  --cream:#faf6ef; --paper:#f4ede0; --paper2:#ede4d0;
  --ink:#1a1208; --ink2:#3a2e1e; --ink3:#6b5940; --ink4:rgba(26,18,8,.45);
  --navy:#1a3264; --navy2:rgba(26,50,100,.08); --navy3:rgba(26,50,100,.18);
  --green:#1d6b3a; --green2:rgba(29,107,58,.12); --green3:rgba(29,107,58,.22);
  --gold:#b8870a; --gold2:rgba(184,135,10,.13);
  --red:#c0392b; --red2:rgba(192,57,43,.1);
  --border:rgba(26,18,8,.12); --border2:rgba(26,18,8,.07);
  --shadow:rgba(26,18,8,.10); --shadow2:rgba(26,18,8,.05);
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{background:var(--paper);color:var(--ink);font-family:'Source Serif 4',Georgia,serif;font-size:16px;line-height:1.78;min-height:100vh}
.screen{display:none;min-height:100vh;animation:pgIn .28s ease}
.screen.active{display:block}
@keyframes pgIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

/* â”€â”€ GLOBAL NAV â”€â”€ */
.gnav{position:sticky;top:0;z-index:300;background:var(--ink);border-bottom:1px solid rgba(255,255,255,.07);display:flex;align-items:center;height:54px;padding:0 48px;gap:0}
.gnav-logo{font-family:'Playfair Display',serif;font-size:18px;font-weight:900;color:var(--cream);letter-spacing:-.5px;cursor:pointer;margin-right:32px;flex-shrink:0;white-space:nowrap}
.gnav-logo em{color:#e8c84a;font-style:italic}
.gnav-links{display:flex;align-items:center;flex:1}
.gnav-link{display:flex;align-items:center;gap:7px;height:54px;padding:0 16px;font-family:'Source Serif 4',serif;font-size:13px;font-weight:600;color:rgba(250,246,239,.45);background:none;border:none;border-bottom:2px solid transparent;cursor:pointer;transition:all .15s;white-space:nowrap}
.gnav-link:hover{color:rgba(250,246,239,.8)}
.gnav-link.active{color:var(--cream);border-bottom-color:#e8c84a}

/* â”€â”€ BUTTONS â”€â”€ */
.btn-navy{display:inline-flex;align-items:center;gap:8px;padding:12px 30px;font-family:'Source Serif 4',serif;font-size:14px;font-weight:600;background:var(--navy);color:var(--cream);border:none;border-radius:3px;cursor:pointer;transition:all .2s;letter-spacing:.3px}
.btn-navy:hover{background:#0f2048;transform:translateY(-1px);box-shadow:0 4px 14px rgba(26,50,100,.3)}
.btn-outline{display:inline-flex;align-items:center;gap:8px;padding:11px 26px;font-family:'Source Serif 4',serif;font-size:14px;background:transparent;color:var(--ink3);border:1.5px solid var(--border);border-radius:3px;cursor:pointer;transition:all .2s}
.btn-outline:hover{border-color:var(--ink2);color:var(--ink2)}
.btn-green-sm{display:inline-flex;align-items:center;gap:6px;padding:8px 18px;font-family:'Source Serif 4',serif;font-size:13px;font-weight:600;background:var(--green);color:white;border:none;border-radius:3px;cursor:pointer;transition:all .2s}
.btn-green-sm:hover{background:#155c2e}
.btn-green-sm:disabled{background:var(--border);color:var(--ink4);cursor:not-allowed}
.rule{display:flex;align-items:center;gap:14px;font-size:11px;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;color:var(--ink4);margin-bottom:18px}
.rule::after{content:'';flex:1;height:1px;background:var(--border)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 0 â€” LANDING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-landing{background:var(--cream)}

/* Hero */
.hero{background:var(--ink);position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(-45deg,transparent,transparent 38px,rgba(184,135,10,.055) 38px,rgba(184,135,10,.055) 39px)}
.hero-inner{max-width:980px;margin:0 auto;padding:64px 48px 56px;position:relative;z-index:2;display:grid;grid-template-columns:1fr 1fr;gap:48px;align-items:center}
.hero-kicker{display:inline-flex;align-items:center;gap:8px;border:1.5px solid var(--gold);color:#e8c84a;font-size:9px;letter-spacing:3.5px;text-transform:uppercase;padding:5px 16px;margin-bottom:18px;font-family:'Source Serif 4',serif;font-weight:600}
.hero h1{font-family:'Playfair Display',serif;font-size:clamp(36px,4.5vw,58px);font-weight:900;line-height:1.04;letter-spacing:-1.5px;color:var(--cream)}
.hero h1 em{color:#e8c84a;font-style:italic}
.hero-lead{margin-top:16px;font-size:15px;font-weight:300;color:rgba(250,246,239,.55);line-height:1.75;max-width:480px}
.hero-cta{margin-top:28px;display:flex;gap:12px;flex-wrap:wrap}
.hero-right{display:flex;flex-direction:column;gap:12px}
.hero-card{padding:16px 20px;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);border-radius:4px;display:flex;align-items:flex-start;gap:14px}
.hero-card-icon{font-size:22px;flex-shrink:0;margin-top:2px}
.hero-card h3{font-family:'Playfair Display',serif;font-size:15px;font-weight:700;color:var(--cream);line-height:1.2}
.hero-card p{font-size:12px;color:rgba(250,246,239,.45);margin-top:3px;line-height:1.5}

/* Social proof strip */
.proof-strip{background:var(--paper2);border-bottom:1px solid var(--border);padding:14px 48px}
.proof-inner{max-width:980px;margin:0 auto;display:flex;align-items:center;gap:32px;flex-wrap:wrap}
.proof-item{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--ink3);font-weight:600}
.proof-item .pi{font-size:18px}

/* Why section */
.why-section{max-width:980px;margin:0 auto;padding:64px 48px}
.why-section h2{font-family:'Playfair Display',serif;font-size:clamp(28px,4vw,42px);font-weight:900;letter-spacing:-1px;text-align:center;margin-bottom:10px}
.why-section h2 em{color:var(--navy);font-style:italic}
.why-section>.sub{text-align:center;font-size:15px;color:var(--ink3);font-style:italic;margin-bottom:44px;max-width:560px;margin-left:auto;margin-right:auto}
.why-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px}
.why-card{padding:24px 24px 22px;background:white;border:1px solid var(--border);border-radius:4px;box-shadow:0 2px 8px var(--shadow2);transition:.2s}
.why-card:hover{transform:translateY(-2px);box-shadow:0 6px 20px var(--shadow)}
.why-card-icon{width:44px;height:44px;background:var(--navy2);border:1px solid var(--navy3);border-radius:3px;display:flex;align-items:center;justify-content:center;font-size:22px;margin-bottom:14px}
.why-card h3{font-family:'Playfair Display',serif;font-size:17px;font-weight:700;color:var(--ink);margin-bottom:8px;line-height:1.25}
.why-card p{font-size:14px;color:var(--ink3);line-height:1.65}

/* How it works */
.how-section{background:var(--ink);padding:64px 48px;position:relative;overflow:hidden}
.how-section::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(-45deg,transparent,transparent 38px,rgba(184,135,10,.04) 38px,rgba(184,135,10,.04) 39px)}
.how-inner{max-width:980px;margin:0 auto;position:relative;z-index:2}
.how-inner h2{font-family:'Playfair Display',serif;font-size:clamp(26px,3.5vw,38px);font-weight:900;letter-spacing:-1px;color:var(--cream);text-align:center;margin-bottom:10px}
.how-inner h2 em{color:#e8c84a;font-style:italic}
.how-inner>.sub{text-align:center;font-size:14px;color:rgba(250,246,239,.4);font-style:italic;margin-bottom:44px}
.how-steps{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:24px;counter-reset:steps}
.how-step{padding:24px 22px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:4px;position:relative;counter-increment:steps}
.how-step::before{content:counter(steps);position:absolute;top:-14px;left:20px;width:28px;height:28px;background:#e8c84a;color:var(--ink);border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:14px;font-weight:900;line-height:28px;text-align:center}
.how-step h3{font-family:'Playfair Display',serif;font-size:16px;font-weight:700;color:var(--cream);margin-bottom:8px;margin-top:4px}
.how-step p{font-size:13px;color:rgba(250,246,239,.5);line-height:1.6}

/* For who */
.who-section{max-width:980px;margin:0 auto;padding:64px 48px}
.who-section h2{font-family:'Playfair Display',serif;font-size:clamp(26px,3.5vw,38px);font-weight:900;letter-spacing:-1px;margin-bottom:10px}
.who-section h2 em{color:var(--navy);font-style:italic}
.who-section>.sub{font-size:15px;color:var(--ink3);font-style:italic;margin-bottom:36px}
.who-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
.who-card{padding:22px 22px;background:white;border:1px solid var(--border);border-left:4px solid var(--navy);border-radius:0 4px 4px 0;box-shadow:0 1px 4px var(--shadow2)}
.who-card h3{font-family:'Playfair Display',serif;font-size:16px;font-weight:700;color:var(--ink);margin-bottom:7px}
.who-card p{font-size:13px;color:var(--ink3);line-height:1.6}

/* Chapters showcase */
.chapters-section{background:var(--paper2);border-top:1px solid var(--border);border-bottom:1px solid var(--border);padding:52px 48px}
.chapters-inner{max-width:980px;margin:0 auto}
.chapters-inner h2{font-family:'Playfair Display',serif;font-size:clamp(24px,3vw,34px);font-weight:900;letter-spacing:-1px;margin-bottom:8px}
.chapters-inner h2 em{color:var(--navy);font-style:italic}
.chapters-inner>.sub{font-size:14px;color:var(--ink3);font-style:italic;margin-bottom:28px}
.chap-pills{display:flex;gap:8px;flex-wrap:wrap}
.chap-pill{padding:7px 16px;background:white;border:1.5px solid var(--border);border-radius:3px;font-size:13px;font-weight:600;color:var(--ink2)}

/* FAQ */
.faq-section{max-width:760px;margin:0 auto;padding:64px 48px}
.faq-section h2{font-family:'Playfair Display',serif;font-size:clamp(24px,3vw,36px);font-weight:900;letter-spacing:-1px;margin-bottom:32px}
.faq-section h2 em{color:var(--navy);font-style:italic}
.faq-item{border-bottom:1px solid var(--border)}
.faq-q{display:flex;align-items:center;justify-content:space-between;padding:18px 0;cursor:pointer;font-size:15px;font-weight:600;color:var(--ink);gap:16px;transition:.15s}
.faq-q:hover{color:var(--navy)}
.faq-arrow{font-size:11px;color:var(--ink4);flex-shrink:0;transition:.2s}
.faq-item.open .faq-arrow{transform:rotate(180deg)}
.faq-a{display:none;padding-bottom:18px;font-size:14px;color:var(--ink3);line-height:1.72}
.faq-item.open .faq-a{display:block}

/* CTA Banner */
.cta-banner{background:var(--ink);padding:60px 48px;position:relative;overflow:hidden;text-align:center}
.cta-banner::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(-45deg,transparent,transparent 38px,rgba(184,135,10,.055) 38px,rgba(184,135,10,.055) 39px)}
.cta-banner-inner{max-width:640px;margin:0 auto;position:relative;z-index:2}
.cta-banner h2{font-family:'Playfair Display',serif;font-size:clamp(28px,4vw,44px);font-weight:900;color:var(--cream);letter-spacing:-1px;margin-bottom:14px;line-height:1.1}
.cta-banner h2 em{color:#e8c84a;font-style:italic}
.cta-banner p{font-size:15px;color:rgba(250,246,239,.5);margin-bottom:28px;line-height:1.65}
.cta-list{list-style:none;display:flex;flex-direction:column;gap:8px;margin-bottom:30px;text-align:left;display:inline-flex}
.cta-list li{display:flex;align-items:center;gap:10px;font-size:14px;color:rgba(250,246,239,.65)}
.cta-list li::before{content:'âœ“';color:#e8c84a;font-weight:700;flex-shrink:0}
.cta-btns{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}

/* Footer */
.site-footer{background:var(--ink);border-top:1px solid rgba(255,255,255,.07);padding:28px 48px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px}
.site-footer p{font-size:12px;color:rgba(250,246,239,.3)}
.site-footer .logo{font-family:'Playfair Display',serif;font-size:15px;font-weight:900;color:rgba(250,246,239,.6)}
.site-footer .logo em{color:#e8c84a;font-style:italic}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 1 â€” SETUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-setup{background:var(--cream)}
.setup-hero{background:var(--ink);position:relative;overflow:hidden}
.setup-hero::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(-45deg,transparent,transparent 38px,rgba(184,135,10,.055) 38px,rgba(184,135,10,.055) 39px)}
.setup-hero-inner{max-width:900px;margin:0 auto;padding:40px 48px 36px;position:relative;z-index:2;display:grid;grid-template-columns:1fr auto;gap:24px;align-items:end}
.setup-kicker{display:inline-flex;align-items:center;gap:6px;border:1.5px solid var(--gold);color:#e8c84a;font-size:9px;letter-spacing:3px;text-transform:uppercase;padding:4px 14px;margin-bottom:13px;font-family:'Source Serif 4',serif;font-weight:600}
.setup-hero h1{font-family:'Playfair Display',serif;font-size:clamp(32px,4.5vw,52px);font-weight:900;line-height:1.05;letter-spacing:-1.5px;color:var(--cream)}
.setup-hero h1 em{color:#e8c84a;font-style:italic}
.setup-hero-sub{margin-top:8px;font-size:13px;font-weight:300;color:rgba(250,246,239,.45);display:flex;gap:14px;flex-wrap:wrap}
.setup-hero-sub span::before{content:'Â·';margin-right:6px;color:var(--gold)}
.hero-stat-box{display:flex;flex-direction:column;gap:8px}
.hsb{padding:10px 18px;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);border-radius:3px;text-align:center}
.hsb .v{font-family:'Playfair Display',serif;font-size:22px;font-weight:900;color:var(--cream);line-height:1}
.hsb .l{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:rgba(250,246,239,.35);margin-top:2px}

.setup-body{max-width:900px;margin:0 auto;padding:36px 48px 72px}
.setup-section{margin-bottom:32px}
.timer-row{display:flex;gap:8px;flex-wrap:wrap}
.timer-chip{padding:9px 20px;font-family:'Source Serif 4',serif;font-size:14px;background:white;border:1.5px solid var(--border);color:var(--ink2);border-radius:3px;cursor:pointer;transition:all .2s}
.timer-chip:hover{border-color:var(--navy);color:var(--navy)}
.timer-chip.sel{background:var(--navy);border-color:var(--navy);color:white}
.chap-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(218px,1fr));gap:8px}
.chap-chip{padding:12px 14px;background:white;border:1.5px solid var(--border);border-radius:3px;cursor:pointer;transition:all .2s;display:flex;align-items:flex-start;gap:10px}
.chap-chip:hover{border-color:var(--navy3);background:var(--navy2)}
.chap-chip.sel{border-color:var(--navy);background:var(--navy2)}
.chk{width:15px;height:15px;border:1.5px solid var(--border);border-radius:2px;flex-shrink:0;margin-top:3px;display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:700;transition:all .2s}
.chap-chip.sel .chk{background:var(--navy);border-color:var(--navy);color:white}
.ch-name{font-size:14px;font-weight:600;color:var(--ink)}
.ch-sub{font-size:11px;color:var(--ink4);font-style:italic;margin-top:1px}
.setup-cta{margin-top:30px;display:flex;align-items:center;gap:14px;flex-wrap:wrap}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 2 â€” EXAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-exam{background:var(--cream)}
.exam-top{background:var(--ink);box-shadow:0 2px 12px rgba(26,18,8,.2)}
.exam-top-inner{max-width:960px;margin:0 auto;padding:10px 48px;display:flex;align-items:center;gap:16px;flex-wrap:wrap}
.exam-title-wrap h2{font-family:'Playfair Display',serif;font-size:17px;font-weight:700;color:var(--cream)}
.exam-title-wrap .sub{font-size:11px;letter-spacing:1.5px;text-transform:uppercase;color:rgba(250,246,239,.38);margin-top:1px}
.timer-block{margin-left:auto;display:flex;align-items:center;gap:16px}
.timer-face{font-family:'Source Code Pro',monospace;font-size:20px;font-weight:500;color:#e8c84a;letter-spacing:2px;line-height:1}
.timer-face.warn{color:#fb923c}.timer-face.danger{color:#f87171;animation:blink .8s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}
.live-sc-box{text-align:right}
.live-sc-num{font-family:'Playfair Display',serif;font-size:22px;font-weight:900;color:#e8c84a;line-height:1}
.live-sc-lbl{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:rgba(250,246,239,.32)}
.btn-end{padding:7px 15px;font-family:'Source Serif 4',serif;font-size:12px;background:rgba(192,57,43,.2);border:1px solid rgba(192,57,43,.35);color:#fca5a5;border-radius:3px;cursor:pointer;transition:all .2s}
.btn-end:hover{background:var(--red);color:white}
.pills-bar{background:var(--paper2);border-bottom:1px solid var(--border)}
.pills-bar-inner{max-width:960px;margin:0 auto;padding:8px 48px;display:flex;align-items:center;gap:7px;overflow-x:auto}
.pill{padding:4px 13px;font-family:'Source Serif 4',serif;font-size:12px;font-weight:600;background:transparent;border:1.5px solid var(--border);color:var(--ink3);border-radius:2px;cursor:pointer;transition:all .2s;white-space:nowrap}
.pill:hover{border-color:var(--navy);color:var(--navy)}
.pill.answered{border-color:var(--navy);color:var(--navy);background:var(--navy2)}
.pill.corrected{border-color:var(--green);color:white;background:var(--green)}
.exam-main{max-width:960px;margin:0 auto;padding:36px 48px 100px}
.loading-box{text-align:center;padding:80px 20px}
.spinner{width:36px;height:36px;border:3px solid var(--border);border-top-color:var(--navy);border-radius:50%;animation:spin .7s linear infinite;margin:0 auto 16px}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-box p{font-size:13px;font-style:italic;color:var(--ink3)}

/* Exercise card */
.exercise{background:var(--cream);border:1px solid var(--border);border-radius:4px;margin-bottom:36px;overflow:hidden;box-shadow:0 2px 8px var(--shadow2);scroll-margin-top:110px;position:relative}
.exercise::before{content:'';position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--navy)}
.ex-head{padding:20px 28px 18px 36px;border-bottom:1px solid var(--border);background:rgba(250,246,239,.6);display:flex;align-items:flex-start;justify-content:space-between;gap:16px}
.ex-eyebrow{font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(--navy);font-weight:600;margin-bottom:5px}
.ex-title{font-family:'Playfair Display',serif;font-size:20px;font-weight:700;color:var(--ink);line-height:1.2}
.ex-notion{font-size:13px;font-style:italic;color:var(--ink3);margin-top:3px}
.ex-pts{flex-shrink:0;padding:8px 16px;background:var(--navy2);border:1px solid var(--navy3);border-radius:3px;text-align:center}
.ex-pts .n{font-family:'Playfair Display',serif;font-size:28px;font-weight:900;color:var(--navy);line-height:1}
.ex-pts .l{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--navy);opacity:.7}
.ex-body{padding:22px 28px 28px 36px}
.ex-body>p{margin-bottom:12px;color:var(--ink2)}

table{width:100%;border-collapse:collapse;margin:14px 0;font-size:14px}
th{background:var(--paper2);color:var(--ink);padding:9px 14px;text-align:left;font-size:11px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;border:1px solid var(--border)}
td{padding:9px 14px;border:1px solid var(--border2);color:var(--ink2)}
tr:nth-child(even) td{background:rgba(26,18,8,.025)}

.question{margin:16px 0;border:1px solid var(--border);border-left:3px solid var(--navy);background:rgba(250,246,239,.5);border-radius:0 3px 3px 0;overflow:hidden}
.q-head{padding:10px 16px;border-bottom:1px solid var(--border2);display:flex;align-items:center;gap:10px}
.q-num{font-size:13px;font-weight:700;color:var(--navy);font-family:'Source Serif 4',serif}
.q-pts-badge{display:inline-flex;align-items:center;padding:3px 10px;background:var(--green);color:white;font-size:11px;font-weight:700;border-radius:3px}
.q-text{padding:13px 16px 15px;font-size:15px;color:var(--ink);line-height:1.72}

.answer-zone{padding:12px 16px 14px;background:rgba(26,50,100,.03);border-top:1px dashed var(--border)}
.answer-lbl{font-size:10px;letter-spacing:2.5px;text-transform:uppercase;color:var(--ink4);margin-bottom:7px;display:flex;align-items:center;gap:6px}
.answer-lbl::before{content:'âœ';font-size:13px;color:var(--navy)}
.answer-ta{width:100%;min-height:80px;padding:10px 12px;font-family:'Source Serif 4',serif;font-size:15px;line-height:1.65;color:var(--ink);background:white;border:1.5px solid var(--border);border-radius:3px 3px 0 0;resize:vertical;outline:none;transition:border-color .2s,box-shadow .2s}
.answer-ta::placeholder{color:var(--ink4);font-style:italic}
.answer-ta:focus{border-color:var(--navy);box-shadow:0 0 0 3px rgba(26,50,100,.08)}
.answer-ta.has-content{border-color:rgba(26,50,100,.35)}
.answer-ta.locked{border-color:var(--green)!important;background:rgba(29,107,58,.04)!important;color:var(--ink2);resize:none;cursor:default}

.val-bar{display:flex;align-items:center;gap:10px;flex-wrap:wrap;padding:8px 12px;background:var(--paper2);border:1.5px solid var(--border);border-top:none;border-radius:0 0 3px 3px}
.btn-val{display:inline-flex;align-items:center;gap:6px;padding:7px 18px;font-family:'Source Serif 4',serif;font-size:12px;font-weight:600;background:var(--navy);color:white;border:none;border-radius:3px;cursor:pointer;transition:all .2s}
.btn-val:hover{background:#0f2048}
.btn-val:disabled{background:var(--border);color:var(--ink4);cursor:not-allowed}
.btn-edit{display:none;align-items:center;gap:5px;padding:6px 14px;font-family:'Source Serif 4',serif;font-size:12px;background:transparent;border:1.5px solid var(--border);color:var(--ink3);border-radius:3px;cursor:pointer;transition:all .2s}
.btn-edit:hover{border-color:var(--ink2);color:var(--ink2)}
.val-tag{display:none;align-items:center;gap:5px;font-size:12px;color:var(--green);font-weight:600}
.val-tag.show{display:flex}
.val-hint{font-size:11px;font-style:italic;color:var(--ink4);margin-left:auto}

.ai-result{display:none;margin-top:10px;border-radius:3px;overflow:hidden;border:1.5px solid var(--border);animation:fadeUp .3s ease}
.ai-result.visible{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}
.ai-rh{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;gap:10px}
.ai-rh.correct-bg{background:rgba(29,107,58,.10);border-bottom:1px solid rgba(29,107,58,.2)}
.ai-rh.partial-bg{background:rgba(184,135,10,.10);border-bottom:1px solid rgba(184,135,10,.2)}
.ai-rh.wrong-bg{background:rgba(192,57,43,.08);border-bottom:1px solid rgba(192,57,43,.15)}
.ai-rh.loading-bg{background:var(--paper2);border-bottom:1px solid var(--border)}
.ai-rl{display:flex;align-items:center;gap:8px;font-size:13px;font-weight:600}
.ai-sc{font-family:'Playfair Display',serif;font-size:22px;font-weight:900;line-height:1;white-space:nowrap}
.ai-sc.correct-col{color:var(--green)}.ai-sc.partial-col{color:var(--gold)}.ai-sc.wrong-col{color:var(--red)}.ai-sc.loading-col{color:var(--ink4);font-size:14px;font-family:'Source Serif 4',serif}
.ai-fb{padding:11px 14px;font-size:14px;line-height:1.65;color:var(--ink2);background:white;font-style:italic}
.mini-sp{display:inline-block;width:13px;height:13px;border:2px solid var(--border);border-top-color:var(--navy);border-radius:50%;animation:spin .7s linear infinite;vertical-align:middle}

.corr-toggle{margin-top:22px;padding-top:18px;border-top:1px dashed var(--border);display:flex;align-items:center;gap:14px;flex-wrap:wrap}
.btn-see{display:inline-flex;align-items:center;gap:7px;padding:8px 20px;font-family:'Source Serif 4',serif;font-size:13px;font-weight:600;background:transparent;border:1.5px solid var(--gold);color:var(--gold);border-radius:3px;cursor:pointer;transition:all .2s}
.btn-see:hover:not(:disabled){background:var(--gold2)}
.btn-see.active{background:var(--gold);color:white}
.btn-see:disabled{border-color:var(--border);color:var(--ink4);cursor:not-allowed;opacity:.5}
.corr-hint{font-size:12px;font-style:italic;color:var(--ink4)}
.correction{display:none;margin-top:16px;padding:18px 22px;background:rgba(184,135,10,.07);border:1px solid rgba(184,135,10,.22);border-radius:3px}
.correction.open{display:block;animation:fadeUp .3s ease}
.corr-head{display:flex;align-items:center;gap:9px;padding-bottom:12px;margin-bottom:14px;border-bottom:1px solid rgba(184,135,10,.2)}
.corr-badge{width:20px;height:20px;background:var(--gold);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;flex-shrink:0}
.corr-head span{font-size:10px;letter-spacing:2.5px;text-transform:uppercase;color:var(--gold);font-weight:600}
.correction p{margin-bottom:9px;font-size:14px;color:var(--ink2)}
.correction p:last-child{margin-bottom:0}
.corr-block{margin-bottom:14px;padding-bottom:12px;border-bottom:1px solid rgba(184,135,10,.12)}
.corr-block:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}
.corr-title{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--gold);font-weight:700;margin-bottom:8px;display:flex;align-items:center;gap:7px}
.corr-title::before{content:'Â§';font-size:14px}

.exam-footer{border-top:2px solid var(--border);padding:22px 48px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px;margin-top:8px}
.exam-footer p{font-size:13px;font-style:italic;color:var(--ink4)}
.footer-score{font-family:'Playfair Display',serif;font-size:48px;font-weight:900;color:var(--ink);line-height:1}
.footer-score sub{font-size:16px;font-weight:400;color:var(--ink4);vertical-align:middle}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 3 â€” RESULTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-results{background:var(--cream)}
.res-banner{background:var(--ink);padding:44px 48px 40px;position:relative;overflow:hidden}
.res-banner::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(-45deg,transparent,transparent 38px,rgba(184,135,10,.055) 38px,rgba(184,135,10,.055) 39px)}
.res-banner-inner{max-width:860px;margin:0 auto;position:relative;z-index:2;display:grid;grid-template-columns:1fr auto;gap:32px;align-items:center}
.res-eyebrow{font-size:10px;letter-spacing:3px;text-transform:uppercase;color:rgba(250,246,239,.4);font-weight:600;margin-bottom:10px}
.res-score{font-family:'Playfair Display',serif;font-size:clamp(64px,10vw,100px);font-weight:900;line-height:.9;letter-spacing:-3px;color:var(--cream)}
.res-score span{font-size:clamp(22px,4vw,36px);color:rgba(250,246,239,.32);font-weight:400}
.res-mention{font-size:16px;font-weight:600;color:#e8c84a;margin-top:12px}
.res-bar-wrap{margin-top:16px;height:6px;background:rgba(255,255,255,.1);border-radius:3px;overflow:hidden;max-width:440px}
.res-bar{height:100%;border-radius:3px;transition:width 1.2s ease}
.res-detail{display:flex;flex-direction:column;gap:10px;min-width:130px}
.res-stat{padding:11px 16px;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.1);border-radius:3px;text-align:center}
.res-stat .v{font-family:'Playfair Display',serif;font-size:22px;font-weight:900;color:#e8c84a;line-height:1}
.res-stat .l{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:rgba(250,246,239,.35);margin-top:3px}
.res-body{max-width:860px;margin:0 auto;padding:32px 48px 72px;display:grid;grid-template-columns:1fr 1fr;gap:40px}
.bdown-row{display:flex;align-items:center;justify-content:space-between;padding:9px 0;border-bottom:1px solid var(--border2)}
.bdown-row:last-child{border-bottom:none}
.bdown-notion{font-size:13px;font-weight:600;color:var(--ink3)}
.bdown-pts{font-family:'Playfair Display',serif;font-size:17px;font-weight:700}
.bdown-pct{height:3px;background:var(--border2);border-radius:2px;margin-top:3px;overflow:hidden}
.bdown-pct-fill{height:100%;border-radius:2px;transition:width .9s ease}
.err-card{padding:12px 16px;background:white;border:1px solid var(--border);border-left:3px solid var(--red);border-radius:0 3px 3px 0;margin-bottom:8px}
.err-q{font-size:13px;color:var(--ink2);margin-bottom:5px}
.err-sc{font-size:11px;font-weight:700;letter-spacing:.5px}
.err-fb{font-size:12px;font-style:italic;color:var(--ink4);margin-top:4px}
.res-cta{grid-column:1/-1;display:flex;gap:12px;flex-wrap:wrap;justify-content:center;padding-top:16px;border-top:1px solid var(--border)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 4 â€” DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-dash{background:var(--cream)}
.dash-banner{background:var(--ink);padding:40px 48px 36px;position:relative;overflow:hidden}
.dash-banner::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(-45deg,transparent,transparent 38px,rgba(184,135,10,.04) 38px,rgba(184,135,10,.04) 39px)}
.dash-banner-inner{max-width:960px;margin:0 auto;position:relative;z-index:2}
.dash-banner h2{font-family:'Playfair Display',serif;font-size:clamp(28px,4vw,44px);font-weight:900;color:var(--cream);letter-spacing:-1px;line-height:1}
.dash-banner h2 em{color:#e8c84a;font-style:italic}
.dash-banner p{font-size:13px;color:rgba(250,246,239,.38);margin-top:8px}
.dash-body{max-width:960px;margin:0 auto;padding:32px 48px 72px}
.stat-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px;margin-bottom:32px}
.stat-card{padding:18px 20px;background:white;border:1px solid var(--border);border-radius:3px;box-shadow:0 1px 4px var(--shadow2)}
.sc-val{font-family:'Playfair Display',serif;font-size:32px;font-weight:900;line-height:1;color:var(--ink)}
.sc-val.navy{color:var(--navy)}.sc-val.green{color:var(--green)}.sc-val.gold{color:var(--gold)}.sc-val.red{color:var(--red)}
.sc-lbl{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--ink4);margin-top:6px}

.chart-section{margin-bottom:32px}
.chart-wrap{height:120px;display:flex;align-items:flex-end;gap:6px;padding:8px 0 0;border-bottom:1px solid var(--border)}
.chart-col{display:flex;flex-direction:column;align-items:center;gap:4px;flex:1;min-width:0}
.chart-bar{width:100%;border-radius:2px 2px 0 0;transition:height .6s ease;min-height:2px}
.chart-lbl{font-size:9px;color:var(--ink4);text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%}
.chart-val{font-size:10px;font-weight:700;color:var(--ink3);text-align:center}

.dash-grid{display:grid;grid-template-columns:3fr 2fr;gap:32px}
.hist-table{width:100%;border-collapse:collapse}
.hist-table th{padding:9px 12px;text-align:left;font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--ink4);border-bottom:2px solid var(--border);font-weight:600}
.hist-table td{padding:10px 12px;border-bottom:1px solid var(--border2);font-size:14px;color:var(--ink2)}
.hist-table tr:hover td{background:rgba(26,18,8,.02)}
.score-chip{display:inline-block;padding:3px 10px;border-radius:2px;font-family:'Playfair Display',serif;font-size:13px;font-weight:700}
.score-chip.a{background:rgba(29,107,58,.12);color:var(--green)}.score-chip.b{background:rgba(184,135,10,.12);color:var(--gold)}.score-chip.c{background:rgba(192,57,43,.1);color:var(--red)}
.nb-row{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.nb-label{font-size:12px;font-weight:600;color:var(--ink3);width:150px;flex-shrink:0}
.nb-track{flex:1;height:5px;background:var(--border2);border-radius:3px;overflow:hidden}
.nb-fill{height:100%;border-radius:3px;transition:width .8s ease}
.nb-count{font-size:11px;font-weight:700;color:var(--ink4);width:24px;text-align:right}
.empty-state{text-align:center;padding:60px 20px;color:var(--ink4)}
.empty-state .ei{font-size:48px;display:block;margin-bottom:14px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media(max-width:760px){
  .gnav{padding:0 16px}.gnav-links{display:none}
  .hero-inner{grid-template-columns:1fr}.hero-right{display:none}
  .setup-hero-inner,.setup-body,.exam-top-inner,.pills-bar-inner,.exam-main,.res-banner-inner,.res-body,.dash-banner-inner,.dash-body,.why-section,.who-section,.chapters-section,.faq-section,.cta-banner,.proof-strip,.how-section,.site-footer{padding-left:20px;padding-right:20px}
  .setup-hero-inner{grid-template-columns:1fr}
  .res-banner-inner{grid-template-columns:1fr}
  .res-body,.dash-grid{grid-template-columns:1fr}
  .hero-cta{flex-direction:column}
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â• GLOBAL NAV â•â•â•â•â•â•â•â•â•â• -->
<nav class="gnav" id="gnav">
  <div class="gnav-logo" onclick="go('screen-landing','navLanding')"><em>Brevet</em> Blanc Maths</div>
  <div class="gnav-links">
    <button class="gnav-link active" id="navLanding" onclick="go('screen-landing','navLanding')">Accueil</button>
    <button class="gnav-link" id="navSetup" onclick="go('screen-setup','navSetup')">ğŸ“ Commencer</button>
    <button class="gnav-link" id="navDash" onclick="go('screen-dash','navDash');renderDash()">ğŸ“Š Tableau de bord</button>
  </div>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SCREEN 0 â€” LANDING PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen active" id="screen-landing">

  <!-- Hero -->
  <section class="hero">
    <div class="hero-inner">
      <div>
        <div class="hero-kicker">Ã‰lÃ¨ves de 3Ã¨me Â· Programme officiel DNB</div>
        <h1>PrÃ©parez votre<br><em>Brevet Blanc</em><br>de Maths</h1>
        <p class="hero-lead">Exercices interactifs corrigÃ©s en ligne, simulateur d'examen chronomÃ©trÃ© et suivi personnalisÃ© â€” conÃ§us pour vous mettre en situation rÃ©elle avant le jour J.</p>
        <div class="hero-cta">
          <button class="btn-navy" style="font-size:15px;padding:13px 32px" onclick="go('screen-setup','navSetup')">Commencer gratuitement â†’</button>
          <button class="btn-outline" style="background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.2);color:rgba(250,246,239,.6)" onclick="scrollToId('why-section')">En savoir plus</button>
        </div>
      </div>
      <div class="hero-right">
        <div class="hero-card"><div class="hero-card-icon">â±ï¸</div><div><h3>Simulateur d'examen</h3><p>ChronomÃ¨tre rÃ©el, conditions identiques au brevet blanc</p></div></div>
        <div class="hero-card"><div class="hero-card-icon">ğŸ¤–</div><div><h3>Correction IA instantanÃ©e</h3><p>Feedback personnalisÃ© sur chaque rÃ©ponse, en quelques secondes</p></div></div>
        <div class="hero-card"><div class="hero-card-icon">ğŸ“Š</div><div><h3>Suivi de progression</h3><p>Historique complet, points faibles identifiÃ©s, graphiques</p></div></div>
        <div class="hero-card"><div class="hero-card-icon">ğŸ“š</div><div><h3>10 chapitres couverts</h3><p>Tout le programme officiel de maths de 3Ã¨me</p></div></div>
      </div>
    </div>
  </section>

  <!-- Social proof -->
  <div class="proof-strip">
    <div class="proof-inner">
      <div class="proof-item"><span class="pi">âœ…</span> Conforme au programme officiel</div>
      <div class="proof-item"><span class="pi">ğŸ†“</span> 100% gratuit</div>
      <div class="proof-item"><span class="pi">ğŸ“±</span> Ordinateur, tablette et smartphone</div>
      <div class="proof-item"><span class="pi">ğŸ¯</span> Exercices issus des vrais sujets APMEP 2025</div>
    </div>
  </div>

  <!-- Why -->
  <section id="why-section">
    <div class="why-section">
      <h2>Pourquoi choisir<br><em>notre plateforme ?</em></h2>
      <p class="sub">Tout ce dont vous avez besoin pour rÃ©ussir votre brevet blanc, rÃ©uni en un seul endroit.</p>
      <div class="why-grid">
        <div class="why-card">
          <div class="why-card-icon">ğŸ“–</div>
          <h3>Exercices conformes au programme</h3>
          <p>ArithmÃ©tique, gÃ©omÃ©trie, statistiques, fonctionsâ€¦ Tous les chapitres essentiels sont couverts, modÃ©lisÃ©s sur les vrais sujets du DNB 2025.</p>
        </div>
        <div class="why-card">
          <div class="why-card-icon">â±ï¸</div>
          <h3>Mises en situation rÃ©elles</h3>
          <p>Simulateur d'examen avec chronomÃ¨tre et consignes identiques au brevet blanc. Choisissez la durÃ©e : 2h, 1h, 30 min ou moins.</p>
        </div>
        <div class="why-card">
          <div class="why-card-icon">ğŸ¤–</div>
          <h3>CorrigÃ©s dÃ©taillÃ©s et pÃ©dagogiques</h3>
          <p>Chaque rÃ©ponse est corrigÃ©e par intelligence artificielle avec un feedback personnalisÃ©. Chaque erreur devient une opportunitÃ© de progresser.</p>
        </div>
        <div class="why-card">
          <div class="why-card-icon">ğŸ“ˆ</div>
          <h3>Suivi personnalisÃ©</h3>
          <p>Suivez vos rÃ©sultats brevet par brevet, identifiez vos points faibles par chapitre et concentrez-vous sur ce qui compte vraiment.</p>
        </div>
        <div class="why-card">
          <div class="why-card-icon">ğŸ“±</div>
          <h3>Accessible partout, tout le temps</h3>
          <p>Sur ordinateur, tablette ou smartphone, 24h/24 et 7j/7. RÃ©visez oÃ¹ vous voulez, quand vous voulez.</p>
        </div>
        <div class="why-card">
          <div class="why-card-icon">ğŸ¯</div>
          <h3>Exercices alÃ©atoires Ã  l'infini</h3>
          <p>Chaque brevet blanc gÃ©nÃ¨re un sujet diffÃ©rent depuis notre banque d'exercices. Pas de redite, toujours de la nouveautÃ©.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- How it works -->
  <section class="how-section">
    <div class="how-inner">
      <h2>Comment Ã§a <em>marche ?</em></h2>
      <p class="sub">Simple, rapide, efficace â€” en 4 Ã©tapes.</p>
      <div class="how-steps">
        <div class="how-step">
          <h3>Choisissez votre durÃ©e</h3>
          <p>SÃ©lectionnez la durÃ©e de votre brevet blanc : 2h (durÃ©e rÃ©elle), 1h, 30 min, 10 min ou 5 min selon le temps disponible.</p>
        </div>
        <div class="how-step">
          <h3>SÃ©lectionnez vos notions</h3>
          <p>Travaillez sur tous les chapitres Ã  la fois ou ciblez les notions spÃ©cifiques que vous souhaitez rÃ©viser en prioritÃ©.</p>
        </div>
        <div class="how-step">
          <h3>EntraÃ®nez-vous en ligne</h3>
          <p>RÃ©pondez aux exercices chronomÃ©trÃ©, validez vos rÃ©ponses et recevez une correction IA instantanÃ©e avec explications dÃ©taillÃ©es.</p>
        </div>
        <div class="how-step">
          <h3>Suivez votre progression</h3>
          <p>Consultez votre tableau de bord, analysez vos points faibles par notion et rÃ©visez efficacement pour le brevet blanc.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- For who -->
  <section>
    <div class="who-section">
      <h2>Pour <em>qui ?</em></h2>
      <p class="sub">Une plateforme pensÃ©e pour tous ceux qui veulent prÃ©parer le brevet avec sÃ©rieux.</p>
      <div class="who-grid">
        <div class="who-card">
          <h3>ğŸ“ Ã‰lÃ¨ves de 3Ã¨me</h3>
          <p>Qui veulent se prÃ©parer sÃ©rieusement au brevet blanc en s'entraÃ®nant dans les mÃªmes conditions que l'examen.</p>
        </div>
        <div class="who-card">
          <h3>ğŸ“‰ CollÃ©giens en difficultÃ©</h3>
          <p>Souhaitant amÃ©liorer leurs rÃ©sultats en maths grÃ¢ce Ã  un entraÃ®nement ciblÃ© sur leurs points faibles.</p>
        </div>
        <div class="who-card">
          <h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parents accompagnants</h3>
          <p>Recherchant un outil fiable et pÃ©dagogique pour aider leurs enfants Ã  se prÃ©parer au brevet des collÃ¨ges.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Chapters -->
  <div class="chapters-section">
    <div class="chapters-inner">
      <h2>Tous les chapitres du <em>programme</em></h2>
      <p class="sub">10 notions couvertes â€” tout ce que vous verrez au brevet blanc.</p>
      <div class="chap-pills">
        <span class="chap-pill">ğŸ“ GÃ©omÃ©trie</span>
        <span class="chap-pill">ğŸ“Š Statistiques</span>
        <span class="chap-pill">ğŸ² ProbabilitÃ©s</span>
        <span class="chap-pill">ğŸ”¢ ArithmÃ©tique & PGCD</span>
        <span class="chap-pill">ğŸ“ˆ ProportionnalitÃ©</span>
        <span class="chap-pill">ğŸ”¤ AlgÃ¨bre & Ã‰quations</span>
        <span class="chap-pill">âš¡ Puissances</span>
        <span class="chap-pill">ğŸ’» Algorithmique</span>
        <span class="chap-pill">ğŸ“¦ Volumes & Grandeurs</span>
        <span class="chap-pill">ğŸ”§ Fonctions affines</span>
      </div>
    </div>
  </div>

  <!-- FAQ -->
  <div class="faq-section">
    <h2>Vos <em>questions</em></h2>
    <div class="faq-item" onclick="toggleFaq(this)">
      <div class="faq-q">Les exercices couvrent-ils tout le programme de 3Ã¨me ? <span class="faq-arrow">â–¼</span></div>
      <div class="faq-a">Oui, tous les exercices sont conformes au programme officiel de mathÃ©matiques du collÃ¨ge. Ils sont modÃ©lisÃ©s sur les vrais sujets du DiplÃ´me National du Brevet 2025, compilÃ©s par l'APMEP (Association des Professeurs de MathÃ©matiques de l'Enseignement Public).</div>
    </div>
    <div class="faq-item" onclick="toggleFaq(this)">
      <div class="faq-q">Comment fonctionne la correction par intelligence artificielle ? <span class="faq-arrow">â–¼</span></div>
      <div class="faq-a">Vos rÃ©ponses sont analysÃ©es par Claude (Anthropic), un modÃ¨le d'IA avancÃ©, qui compare votre dÃ©marche Ã  la rÃ©ponse officielle et vous attribue des points avec un feedback pÃ©dagogique personnalisÃ©. La correction est instantanÃ©e et explique vos erreurs Ã©tape par Ã©tape.</div>
    </div>
    <div class="faq-item" onclick="toggleFaq(this)">
      <div class="faq-q">Puis-je m'entraÃ®ner quand je veux ? <span class="faq-arrow">â–¼</span></div>
      <div class="faq-a">Absolument. La plateforme est accessible en continu, 24h/24 et 7j/7, sur tous vos appareils â€” ordinateur, tablette ou smartphone. Aucune installation requise, tout fonctionne dans votre navigateur.</div>
    </div>
    <div class="faq-item" onclick="toggleFaq(this)">
      <div class="faq-q">Les corrigÃ©s sont-ils vraiment dÃ©taillÃ©s ? <span class="faq-arrow">â–¼</span></div>
      <div class="faq-a">Oui, chaque exercice possÃ¨de un corrigÃ© complet avec explications Ã©tape par Ã©tape, accessible aprÃ¨s avoir validÃ© toutes vos rÃ©ponses. La correction IA vous donne en plus un retour personnalisÃ© sur votre propre rÃ©ponse.</div>
    </div>
    <div class="faq-item" onclick="toggleFaq(this)">
      <div class="faq-q">Cela amÃ©liore-t-il vraiment mes chances au brevet blanc ? <span class="faq-arrow">â–¼</span></div>
      <div class="faq-a">Oui. En simulant l'examen dans les mÃªmes conditions de temps et de format, en corrigeant vos erreurs immÃ©diatement et en suivant votre progression, vous gagnez en confiance et en efficacitÃ©. La rÃ©pÃ©tition et l'identification des points faibles sont les clÃ©s d'une bonne prÃ©paration.</div>
    </div>
    <div class="faq-item" onclick="toggleFaq(this)">
      <div class="faq-q">Mon historique est-il sauvegardÃ© entre les sessions ? <span class="faq-arrow">â–¼</span></div>
      <div class="faq-a">Oui, votre tableau de bord conserve l'historique de tous vos brevets blancs, vos scores, vos erreurs et votre progression par notion. Ces donnÃ©es sont stockÃ©es localement et persistent d'une session Ã  l'autre.</div>
    </div>
  </div>

  <!-- CTA Banner -->
  <div class="cta-banner">
    <div class="cta-banner-inner">
      <h2>Commencez<br><em>dÃ¨s aujourd'hui</em></h2>
      <p>Ne laissez pas le hasard dÃ©cider de vos rÃ©sultats. EntraÃ®nez-vous maintenant et atteignez vos objectifs.</p>
      <ul class="cta-list">
        <li>EntraÃ®nez-vous comme si vous Ã©tiez le jour de l'examen</li>
        <li>RÃ©visez tous les chapitres essentiels du programme de maths</li>
        <li>Suivez vos progrÃ¨s et amÃ©liorez vos points faibles</li>
        <li>CorrigÃ©s dÃ©taillÃ©s et pÃ©dagogiques Ã  chaque exercice</li>
      </ul>
      <div class="cta-btns">
        <button class="btn-navy" style="font-size:15px;padding:13px 32px" onclick="go('screen-setup','navSetup')">GÃ©nÃ©rer mon brevet blanc â†’</button>
        <button class="btn-outline" style="background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.18);color:rgba(250,246,239,.6)" onclick="go('screen-dash','navDash');renderDash()">ğŸ“Š Tableau de bord</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="logo"><em>Brevet</em> Blanc Maths</div>
    <p>PrÃ©paration au DiplÃ´me National du Brevet Â· Programme officiel 3Ã¨me</p>
    <p>Exercices modÃ©lisÃ©s sur les sujets APMEP 2025</p>
  </footer>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SCREEN 1 â€” SETUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-setup">
  <div class="setup-hero">
    <div class="setup-hero-inner">
      <div>
        <div class="setup-kicker">MathÃ©matiques Â· DNB</div>
        <h1><em>Brevet</em> Blanc</h1>
        <div class="setup-hero-sub">
          <span>Exercices alÃ©atoires issus des vrais sujets 2025</span>
          <span>Correction IA instantanÃ©e</span>
        </div>
      </div>
      <div class="hero-stat-box">
        <div class="hsb"><div class="v">100</div><div class="l">Points</div></div>
        <div class="hsb"><div class="v" id="setupTimerVal">2h</div><div class="l">DurÃ©e</div></div>
      </div>
    </div>
  </div>

  <div class="setup-body">
    <div class="setup-section">
      <div class="rule">DurÃ©e de l'Ã©preuve</div>
      <div class="timer-row" id="timerRow">
        <div class="timer-chip sel" data-min="120" onclick="selTimer(this)">2h â€” DurÃ©e rÃ©elle</div>
        <div class="timer-chip" data-min="60" onclick="selTimer(this)">1 heure</div>
        <div class="timer-chip" data-min="30" onclick="selTimer(this)">30 min</div>
        <div class="timer-chip" data-min="10" onclick="selTimer(this)">10 min</div>
        <div class="timer-chip" data-min="5" onclick="selTimer(this)">5 min</div>
      </div>
    </div>

    <div class="setup-section">
      <div class="rule">Notions Ã  travailler</div>
      <div class="chap-grid" id="chapGrid">
        <div class="chap-chip sel" data-id="all" onclick="selChap(this)"><div class="chk">âœ“</div><div><div class="ch-name">Toutes les notions</div><div class="ch-sub">Sujet complet type brevet</div></div></div>
        <div class="chap-chip" data-id="probabilites" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">ProbabilitÃ©s</div><div class="ch-sub">FrÃ©quences, Ã©vÃ©nements</div></div></div>
        <div class="chap-chip" data-id="proportionnalite" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">ProportionnalitÃ©</div><div class="ch-sub">Coefficients, pourcentages</div></div></div>
        <div class="chap-chip" data-id="statistiques" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Statistiques</div><div class="ch-sub">Moyenne, mÃ©diane, quartiles</div></div></div>
        <div class="chap-chip" data-id="geometrie" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">GÃ©omÃ©trie</div><div class="ch-sub">Pythagore, trigonomÃ©trie</div></div></div>
        <div class="chap-chip" data-id="algebre" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">AlgÃ¨bre</div><div class="ch-sub">Ã‰quations, fonctions affines</div></div></div>
        <div class="chap-chip" data-id="puissances" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Puissances & fractions</div><div class="ch-sub">Notation scientifique</div></div></div>
        <div class="chap-chip" data-id="pgcd" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">ArithmÃ©tique & PGCD</div><div class="ch-sub">Facteurs premiers</div></div></div>
        <div class="chap-chip" data-id="programmation" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Algorithmique</div><div class="ch-sub">Programmes de calcul</div></div></div>
        <div class="chap-chip" data-id="volumes" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Volumes & grandeurs</div><div class="ch-sub">PavÃ©s, cylindres</div></div></div>
      </div>
    </div>

    <div class="setup-cta">
      <button class="btn-navy" style="font-size:15px;padding:13px 32px" onclick="startExam()">GÃ©nÃ©rer mon brevet blanc â†’</button>
      <button class="btn-outline" onclick="go('screen-landing','navLanding')">â† Accueil</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SCREEN 2 â€” EXAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-exam">
  <div class="exam-top">
    <div class="exam-top-inner">
      <div class="exam-title-wrap">
        <h2>Brevet Blanc â€” MathÃ©matiques</h2>
        <div class="sub" id="examSub">Chargementâ€¦</div>
      </div>
      <div class="timer-block">
        <div>
          <div class="timer-face" id="timerFace">02:00:00</div>
          <div style="font-size:9px;letter-spacing:2px;text-transform:uppercase;color:rgba(250,246,239,.3);text-align:center">Temps</div>
        </div>
        <div class="live-sc-box"><div class="live-sc-num" id="liveSc">0</div><div class="live-sc-lbl">pts</div></div>
        <button class="btn-end" onclick="endEarly()">Terminer</button>
      </div>
    </div>
  </div>
  <div class="pills-bar"><div class="pills-bar-inner" id="pillsBar"></div></div>
  <div class="exam-main">
    <div class="loading-box" id="loadingBox"><div class="spinner"></div><p>GÃ©nÃ©ration des exercicesâ€¦</p></div>
    <div id="exContainer"></div>
    <div class="exam-footer" id="examFooter" style="display:none">
      <div>
        <div style="font-size:11px;letter-spacing:2px;text-transform:uppercase;color:var(--ink4);font-weight:600;margin-bottom:4px">Total provisoire</div>
        <p>Validez vos rÃ©ponses pour calculer votre score</p>
      </div>
      <div class="footer-score"><span id="footerSc">0</span><sub> /100</sub></div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SCREEN 3 â€” RESULTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-results">
  <div class="res-banner">
    <div class="res-banner-inner">
      <div>
        <div class="res-eyebrow">RÃ©sultats Â· Brevet Blanc</div>
        <div class="res-score" id="resScore">0 <span>/ 100</span></div>
        <div class="res-mention" id="resMention"></div>
        <div class="res-bar-wrap"><div class="res-bar" id="resBar" style="width:0%"></div></div>
      </div>
      <div class="res-detail">
        <div class="res-stat"><div class="v" id="resCorrect">0</div><div class="l">Correctes</div></div>
        <div class="res-stat"><div class="v" id="resPartial">0</div><div class="l">Partielles</div></div>
        <div class="res-stat"><div class="v" id="resWrong">0</div><div class="l">Incorrectes</div></div>
      </div>
    </div>
  </div>
  <div class="res-body">
    <div>
      <div class="rule">Par notion</div>
      <div id="resByNotion"></div>
    </div>
    <div>
      <div class="rule">Points Ã  retravailler</div>
      <div id="resErrors"></div>
    </div>
    <div class="res-cta">
      <button class="btn-navy" style="font-size:14px;padding:12px 28px" onclick="go('screen-setup','navSetup')">â†º Nouveau brevet</button>
      <button class="btn-outline" onclick="go('screen-dash','navDash');renderDash()">ğŸ“Š Tableau de bord</button>
      <button class="btn-outline" onclick="go('screen-landing','navLanding')">â† Accueil</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SCREEN 4 â€” DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-dash">
  <div class="dash-banner">
    <div class="dash-banner-inner">
      <h2>Tableau de <em>bord</em></h2>
      <p>Votre historique complet et analyse de progression</p>
    </div>
  </div>
  <div class="dash-body">
    <div class="stat-row" id="dashStats"></div>
    <div class="chart-section" id="chartSection" style="display:none">
      <div class="rule">Progression des scores</div>
      <div class="chart-wrap" id="chartWrap"></div>
    </div>
    <div class="dash-grid" id="dashGrid"></div>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let selMin = 120, selChaps = ['all'];
let timerIv = null, secsLeft = 0;
let exerciseData = [], scores = {}, validated = {}, feedbacks = {};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function go(screenId, navId){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(screenId).classList.add('active');
  document.querySelectorAll('.gnav-link').forEach(n=>n.classList.remove('active'));
  if(navId) document.getElementById(navId)?.classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
}
function scrollToId(id){ document.getElementById(id)?.scrollIntoView({behavior:'smooth'}); }
function toggleFaq(el){ el.classList.toggle('open'); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EXERCISE BANK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const BANK = {
  probabilites:[
    {title:"ProbabilitÃ©s â€” Urne et tirage alÃ©atoire",notion:"ProbabilitÃ©s",pts:20,
     intro:"Dans une urne de 40 boules indiscernables au toucher, 5 sont rouges, 20 sont vertes et 15 sont blanches. On tire une boule au hasard.",
     questions:[
       {pts:7,text:"Calculer la probabilitÃ© d'obtenir une boule verte. Justifier.",ans:"P(verte) = 20/40 = 1/2 = 0,5"},
       {pts:7,text:"Calculer la probabilitÃ© d'obtenir une boule qui n'est pas rouge.",ans:"P(non rouge) = (20+15)/40 = 35/40 = 7/8 â‰ˆ 0,875"},
       {pts:6,text:"On rÃ©pÃ¨te l'expÃ©rience 200 fois. Combien de boules vertes peut-on espÃ©rer approximativement ?",ans:"200 Ã— 1/2 = 100 boules vertes environ"}
     ]},
    {title:"ProbabilitÃ©s â€” DÃ© Ã©quilibrÃ©",notion:"ProbabilitÃ©s",pts:18,
     intro:"On lance un dÃ© Ã©quilibrÃ© Ã  6 faces numÃ©rotÃ©es de 1 Ã  6.",
     questions:[
       {pts:6,text:"Quelle est la probabilitÃ© d'obtenir un nombre pair ?",ans:"Issues paires : 2, 4, 6 â†’ P = 3/6 = 1/2"},
       {pts:6,text:"Quelle est la probabilitÃ© d'obtenir un nombre strictement supÃ©rieur Ã  4 ?",ans:"Issues : 5 et 6 â†’ P = 2/6 = 1/3"},
       {pts:6,text:"On rÃ©pÃ¨te l'expÃ©rience 300 fois et on obtient 55 fois le chiffre 1. Commenter.",ans:"P thÃ©orique = 1/6 â‰ˆ 16,7%. FrÃ©quence = 55/300 â‰ˆ 18,3%. Proche â€” variation alÃ©atoire normale."}
     ]}
  ],
  proportionnalite:[
    {title:"ProportionnalitÃ© & Pourcentages",notion:"ProportionnalitÃ©",pts:20,
     intro:"Un article coÃ»te 25 â‚¬. Le magasin propose plusieurs opÃ©rations commerciales.",
     questions:[
       {pts:7,text:"Calculer le prix de l'article aprÃ¨s une augmentation de 14 %.",ans:"25 Ã— 1,14 = 28,50 â‚¬"},
       {pts:7,text:"Un second article coÃ»te 80 â‚¬ avec une rÃ©duction de 20 %. Calculer son nouveau prix.",ans:"80 Ã— 0,80 = 64 â‚¬"},
       {pts:6,text:"Un article passe de 45 â‚¬ Ã  36 â‚¬. Calculer le taux de rÃ©duction en %.",ans:"(45âˆ’36)/45 Ã— 100 = 20%"}
     ]},
    {title:"ProportionnalitÃ© â€” Agrandissement et aires",notion:"ProportionnalitÃ©",pts:20,
     intro:"Le polygone B est un agrandissement du polygone A. Coefficient d'agrandissement : 2,5. Aire de A : 7,5 cmÂ².",
     questions:[
       {pts:7,text:"Calculer l'aire du polygone B. Rappel : si les longueurs sont multipliÃ©es par k, les aires sont multipliÃ©es par kÂ².",ans:"Aire B = 7,5 Ã— 2,5Â² = 46,875 cmÂ²"},
       {pts:7,text:"Le pÃ©rimÃ¨tre de A est 12 cm. Calculer le pÃ©rimÃ¨tre de B.",ans:"PÃ©rimÃ¨tre B = 12 Ã— 2,5 = 30 cm"},
       {pts:6,text:"Polygone C : coefficient 0,4 par rapport Ã  A. Calculer son aire.",ans:"Aire C = 7,5 Ã— 0,4Â² = 1,2 cmÂ²"}
     ]}
  ],
  statistiques:[
    {title:"Statistiques â€” Indicateurs de position",notion:"Statistiques",pts:20,
     intro:"Dans une classe de 3Ã¨me, rÃ©partition des tailles des Ã©lÃ¨ves :",
     tableData:{headers:["Taille (cm)","152","157","160","162","165","170","174","180"],rows:[["Effectif","2","4","2","5","2","4","6","5"]]},
     questions:[
       {pts:8,text:"Calculer la moyenne des tailles (arrondir au dixiÃ¨me).",ans:"Somme = 5016. Effectif = 30. Moyenne = 167,2 cm"},
       {pts:6,text:"DÃ©terminer la mÃ©diane.",ans:"30 Ã©lÃ¨ves â†’ entre 15e et 16e. 15e = 165 cm, 16e = 170 cm. MÃ©diane = 167,5 cm"},
       {pts:6,text:"Calculer Q1, Q3 et l'Ã©cart interquartile.",ans:"Q1 = 8e valeur = 160 cm. Q3 = 23e valeur = 174 cm. IQR = 14 cm"}
     ]},
    {title:"Statistiques â€” Masses et probabilitÃ©s",notion:"Statistiques",pts:19,
     intro:"5 colis (A, B, C, D, E) de masses (kg) : 4, 9, 2, 7, 11.",
     questions:[
       {pts:7,text:"Calculer la moyenne des masses.",ans:"(4+9+2+7+11)/5 = 6,6 kg"},
       {pts:6,text:"DÃ©terminer la mÃ©diane. InterprÃ©ter.",ans:"TriÃ©es : 2,4,7,9,11. MÃ©diane = 7 kg. La moitiÃ© des colis pÃ¨sent moins de 7 kg."},
       {pts:6,text:"ProbabilitÃ© de choisir un colis de masse < 8 kg.",ans:"Colis < 8 : A(4), C(2), D(7) â†’ P = 3/5"}
     ]}
  ],
  geometrie:[
    {title:"GÃ©omÃ©trie â€” Pythagore & triangles semblables",notion:"GÃ©omÃ©trie",pts:24,
     intro:"Triangle CDE rectangle en D. CD = 21,6 cm, CE = 29,1 cm, FC = 17,2 cm. (GF) âˆ¥ (DE).",
     questions:[
       {pts:8,text:"Montrer que DE = 19,5 cm.",ans:"DEÂ² = CEÂ² âˆ’ CDÂ² = 29,1Â² âˆ’ 21,6Â² = 381,25. DE = 19,5 cm âœ“"},
       {pts:8,text:"Calculer l'aire du triangle CDE.",ans:"Aire = (21,6 Ã— 19,5)/2 = 210,6 cmÂ²"},
       {pts:8,text:"(GF) âˆ¥ (DE). Calculer GF au mm prÃ¨s.",ans:"GF = DE Ã— FC/DC = 19,5 Ã— 17,2/21,6 â‰ˆ 15,5 cm"}
     ]},
    {title:"GÃ©omÃ©trie â€” Terrain triangulaire",notion:"GÃ©omÃ©trie",pts:21,
     intro:"Triangle ABC rectangle en B. AB = 600 m, BC = 450 m, CD = 270 m.",
     questions:[
       {pts:7,text:"Montrer que AC = 750 m.",ans:"ACÂ² = 600Â² + 450Â² = 562500. AC = 750 m âœ“"},
       {pts:7,text:"Montrer que (DE) âˆ¥ (AB) et calculer DE.",ans:"CD/CB = 0,6. (DE) âˆ¥ (AB). DE = 600 Ã— 0,6 = 360 m"},
       {pts:7,text:"Calculer l'aire du triangle CDE.",ans:"Aire CDE = 135000 Ã— 0,36 = 48600 mÂ²"}
     ]}
  ],
  algebre:[
    {title:"AlgÃ¨bre â€” Programme de calcul",notion:"AlgÃ¨bre",pts:20,
     intro:"Programme : choisir x â†’ Ã—(âˆ’2) â†’ +4 â†’ Ã—4.",
     questions:[
       {pts:5,text:"Montrer que pour x = 1, le rÃ©sultat est 8.",ans:"1Ã—(âˆ’2)=âˆ’2. âˆ’2+4=2. 2Ã—4=8 âœ“"},
       {pts:5,text:"RÃ©sultat pour x = âˆ’2 ?",ans:"âˆ’2Ã—(âˆ’2)=4. 4+4=8. 8Ã—4=32"},
       {pts:5,text:"Montrer que le rÃ©sultat s'Ã©crit âˆ’8x + 16.",ans:"x â†’ âˆ’2x â†’ âˆ’2x+4 â†’ 4(âˆ’2x+4) = âˆ’8x+16 âœ“"},
       {pts:5,text:"RÃ©soudre âˆ’8x + 16 = 4.",ans:"âˆ’8x = âˆ’12. x = 3/2 = 1,5"}
     ]},
    {title:"AlgÃ¨bre â€” Rectangle et Ã©quation",notion:"AlgÃ¨bre",pts:20,
     intro:"Rectangle ABCD avec AD = x et AB = 16âˆ’2x. CarrÃ© EFGH avec EF = 2x.",
     questions:[
       {pts:5,text:"Pour x = 1,5, calculer le pÃ©rimÃ¨tre du carrÃ© EFGH.",ans:"EF = 3 cm. PÃ©rimÃ¨tre = 12 cm"},
       {pts:5,text:"Pour x = 1,5, calculer AB. VÃ©rifier AB > 0.",ans:"AB = 13 cm > 0 âœ“"},
       {pts:5,text:"Montrer que le pÃ©rimÃ¨tre du rectangle s'Ã©crit âˆ’2x + 32.",ans:"P = 2(x + 16âˆ’2x) = 32âˆ’2x âœ“"},
       {pts:5,text:"Trouver x pour que les deux pÃ©rimÃ¨tres soient Ã©gaux.",ans:"âˆ’2x+32 = 8x â†’ x = 3,2 cm"}
     ]}
  ],
  puissances:[
    {title:"Puissances & notation scientifique",notion:"Puissances",pts:15,
     intro:"Exercice de calcul sur les puissances de 10.",
     questions:[
       {pts:5,text:"Ã‰crire en puissance de 10 : a) 10â´ Ã— 10Â³   b) 10â· Ã· 10Â²   c) (10Â³)Â²",ans:"a) 10â·   b) 10âµ   c) 10â¶"},
       {pts:5,text:"Ã‰crire en notation scientifique : a) 0,000 045   b) 12 800 000",ans:"a) 4,5 Ã— 10â»âµ   b) 1,28 Ã— 10â·"},
       {pts:5,text:"DiamÃ¨tre d'un atome : 2,4 Ã— 10â»Â¹â° m. Atomes pour couvrir 1 mm ?",ans:"N = 10â»Â³ Ã· (2,4Ã—10â»Â¹â°) â‰ˆ 4,2 Ã— 10â¶ atomes"}
     ]}
  ],
  pgcd:[
    {title:"ArithmÃ©tique â€” PGCD et lots",notion:"ArithmÃ©tique",pts:15,
     intro:"350 poissons de type A et 300 de type B Ã  rÃ©partir en lots identiques.",
     questions:[
       {pts:5,text:"DÃ©composer 300 en facteurs premiers.",ans:"300 = 2Â² Ã— 3 Ã— 5Â²"},
       {pts:5,text:"DÃ©composer 350 en facteurs premiers.",ans:"350 = 2 Ã— 5Â² Ã— 7"},
       {pts:5,text:"Calculer le PGCD et le nombre maximal de lots.",ans:"PGCD = 50. Maximum 50 lots : 7 poissons A et 6 poissons B par lot."}
     ]}
  ],
  programmation:[
    {title:"Algorithmique â€” Deux programmes",notion:"Algorithmique",pts:20,
     intro:"Programme A : x â†’ Ã—3 â†’ +15 â†’ Ã·3 â†’ âˆ’x. Programme B : x â†’ (xâˆ’1)Ã—(xâˆ’6) â†’ +5.",
     questions:[
       {pts:5,text:"Montrer que pour x = 4, A donne 5.",ans:"4Ã—3=12. 12+15=27. 27Ã·3=9. 9âˆ’4=5 âœ“"},
       {pts:5,text:"Justifier que A donne toujours le mÃªme rÃ©sultat.",ans:"x â†’ 3x â†’ 3x+15 â†’ x+5 â†’ x+5âˆ’x = 5 âœ“"},
       {pts:5,text:"Pour x = 10, quel rÃ©sultat donne B ?",ans:"(10âˆ’1)Ã—(10âˆ’6)+5 = 9Ã—4+5 = 41"},
       {pts:5,text:"Trouver les deux valeurs pour lesquelles A = B.",ans:"xÂ²âˆ’7x+6=0 â†’ x=1 ou x=6"}
     ]}
  ],
  volumes:[
    {title:"Volumes â€” Aquariums",notion:"Volumes",pts:18,
     intro:"Il faut â‰¥ 15 L par poisson. Aquariums remplis aux 4/5 de leur hauteur.",
     questions:[
       {pts:7,text:"Aquarium cylindrique : âˆ… 30 cm, h = 25 cm. Volume d'eau ? Suffisant ?",ans:"V eau = Ï€Ã—15Â²Ã—25Ã—(4/5) â‰ˆ 14137 cmÂ³ â‰ˆ 14,1 L < 15 L â€” insuffisant."},
       {pts:7,text:"Aquarium pavÃ© droit 28Ã—28Ã—30 cm. Volume d'eau ? Convient-il ?",ans:"V eau = 23520 Ã— 0,8 = 18816 cmÂ³ = 18,8 L > 15 L â€” convient âœ“"},
       {pts:4,text:"Poisson : 15 â‚¬, aquarium : 40 â‚¬. Remise de 15%. Prix final ?",ans:"Total = 55 â‚¬. Remise = 8,25 â‚¬. Prix = 46,75 â‚¬"}
     ]}
  ],

  // â•â•â•â•â•â•â•â•â•â•â• NOUVEAUX EXERCICES DNB 2023 + DNB AmÃ©rique du Nord mai 2024 â•â•â•â•â•â•â•â•â•â•â•

  probabilites2023:[
    {title:"ProbabilitÃ©s â€” Jeu de 32 cartes",notion:"ProbabilitÃ©s",pts:20,
     intro:"Un jeu de 32 cartes comprend 4 familles (trÃ¨fle, carreau, cÅ“ur, pique), chacune avec 8 cartes : 7, 8, 9, 10, valet, dame, roi, as. On tire une carte au hasard.",
     questions:[
       {pts:6,text:"Quelle est la probabilitÃ© d'obtenir le 8 de pique ?",ans:"1 carte sur 32. P(8 de pique) = 1/32"},
       {pts:8,text:"Quelle est la probabilitÃ© d'obtenir un roi ou un cÅ“ur ? Justifier.",ans:"4 rois + 8 cÅ“urs âˆ’ 1 roi de cÅ“ur = 11 cartes. P = 11/32"},
       {pts:6,text:"On pioche une carte, on la remet, puis on pioche une seconde. ProbabilitÃ© d'obtenir deux rois ?",ans:"P(roi) = 4/32 = 1/8. Tirages indÃ©pendants â†’ P(deux rois) = 1/8 Ã— 1/8 = 1/64"}
     ]},
    {title:"ProbabilitÃ©s â€” Urne boules noires et rouges",notion:"ProbabilitÃ©s",pts:22,
     intro:"Une urne contient 3 boules noires (numÃ©rotÃ©es 1 Ã  3) et 4 boules rouges (numÃ©rotÃ©es 1 Ã  4), toutes indiscernables au toucher. â€” DNB Centres Ã©trangers juin 2023",
     questions:[
       {pts:6,text:"On pioche une boule. Quelle est la probabilitÃ© de tirer une boule rouge ?",ans:"P(rouge) = 4/7"},
       {pts:6,text:"Quelle est la probabilitÃ© de tirer une boule portant un nombre pair ?",ans:"Pairs : noire 2, rouges 2 et 4 â†’ 3 boules paires sur 7. P = 3/7"},
       {pts:10,text:"On pioche une boule, on la remet, puis on pioche une seconde. On gagne en tirant la boule rouge nÂ°1 ET une boule noire. Quelle est la probabilitÃ© de gagner ?",ans:"P(rouge1 puis noire) = 1/7 Ã— 3/7 = 3/49. P(noire puis rouge1) = 3/7 Ã— 1/7 = 3/49. P(gagner) = 6/49"}
     ]},
    {title:"ProbabilitÃ©s â€” Sac de boules et roue numÃ©rotÃ©e",notion:"ProbabilitÃ©s",pts:18,
     intro:"Jeu 1 : sac de 5 boules (1 N, 2 G, 2 P). Jeu 2 : roue Ã  6 secteurs Ã©gaux numÃ©rotÃ©s 1 Ã  6. â€” DNB PolynÃ©sie juin 2023",
     questions:[
       {pts:5,text:"Jeu 1 : montrer que la probabilitÃ© de tirer G est 2/5.",ans:"2 boules G sur 5 au total â†’ P(G) = 2/5 âœ“"},
       {pts:5,text:"Jeu 2 : quelle est la probabilitÃ© de s'arrÃªter sur un nombre premier ?",ans:"Nombres premiers de 1 Ã  6 : 2, 3, 5 â†’ 3 secteurs sur 6. P = 3/6 = 1/2"},
       {pts:8,text:"Jeu combinÃ© : on tire une boule ET on tourne la roue. On gagne si G et un nombre premier. ProbabilitÃ© de gagner ?",ans:"Ã‰vÃ©nements indÃ©pendants. P = 2/5 Ã— 1/2 = 1/5"}
     ]},
    {title:"ProbabilitÃ©s â€” Roue et urne, nombres Ã  deux chiffres",notion:"ProbabilitÃ©s",pts:20,
     intro:"Une roue Ã  4 secteurs Ã©gaux (1,2,3,4) donne le chiffre des dizaines. Une urne avec 3 boules (2,3,4) donne le chiffre des unitÃ©s. â€” DNB AmÃ©rique du Sud nov. 2023",
     questions:[
       {pts:5,text:"Ã‰crire la liste des 12 issues possibles.",ans:"12, 13, 14, 22, 23, 24, 32, 33, 34, 42, 43, 44"},
       {pts:5,text:"Quelle est la probabilitÃ© d'obtenir un nombre impair ?",ans:"UnitÃ©s impaires = 3 â†’ issues : 13, 23, 33, 43 â†’ 4 issues. P = 4/12 = 1/3"},
       {pts:5,text:"ProbabilitÃ© que le nombre formÃ© soit un nombre premier infÃ©rieur Ã  30 ?",ans:"Nombres premiers parmi les issues : 13, 23 â†’ 2 issues. P = 2/12 = 1/6"},
       {pts:5,text:"Montrer que la probabilitÃ© d'obtenir un multiple de 11 est 0,25.",ans:"Multiples de 11 parmi les issues : 22, 33, 44 â†’ 3 issues. P = 3/12 = 1/4 = 0,25 âœ“"}
     ]},
    {title:"ProbabilitÃ©s â€” Urne 15 boules numÃ©rotÃ©es",notion:"ProbabilitÃ©s",pts:20,
     intro:"Une urne contient 15 boules indiscernables numÃ©rotÃ©es de 1 Ã  15. â€” DNB AmÃ©rique du Nord mai 2024",
     questions:[
       {pts:8,text:"L'affirmation 'la probabilitÃ© de tirer un nombre premier est 7/15' est-elle vraie ? Justifier.",ans:"Nombres premiers de 1 Ã  15 : 2,3,5,7,11,13 â†’ 6 nombres (1 n'est pas premier). P = 6/15 = 2/5. L'affirmation est FAUSSE."},
       {pts:6,text:"Calculer la probabilitÃ© de tirer un multiple de 3.",ans:"Multiples de 3 de 1 Ã  15 : 3,6,9,12,15 â†’ 5 boules. P = 5/15 = 1/3"},
       {pts:6,text:"L'affirmation 'l'aire du triangle A'B'C' est 3 fois celle du triangle ABC' (homothÃ©tie de rapport âˆ’3) est-elle vraie ?",ans:"Rapport de l'homothÃ©tie = âˆ’3, donc les longueurs sont multipliÃ©es par 3. Les aires sont multipliÃ©es par 3Â² = 9. L'affirmation est FAUSSE (facteur 9, pas 3)."}
     ]}
  ],

  statistiques2023:[
    {title:"Statistiques â€” Prix des hÃ´tels, moyenne et mÃ©diane",notion:"Statistiques",pts:20,
     intro:"Prix facturÃ©s pour une nuit dans les hÃ´tels d'une ville â€” DNB AmÃ©rique du Nord, 31 mai 2023",
     tableData:{headers:["Prix/nuit (â‚¬)","60","80","85","90","110","120","350","500"],rows:[["Effectif","1200","1350","1000","1100","1200","1300","900","300"]]},
     questions:[
       {pts:5,text:"DÃ©terminer l'Ã©tendue des prix facturÃ©s.",ans:"Ã‰tendue = 500 âˆ’ 60 = 440 â‚¬"},
       {pts:8,text:"Calculer la moyenne des prix facturÃ©s pour une nuit (arrondir Ã  l'euro prÃ¨s).",ans:"Somme pondÃ©rÃ©e = 60Ã—1200+80Ã—1350+85Ã—1000+90Ã—1100+110Ã—1200+120Ã—1300+350Ã—900+500Ã—300 = 972 000. Effectif total = 8350. Moyenne â‰ˆ 116 â‚¬"},
       {pts:7,text:"L'association affirme : 'au moins la moitiÃ© des nuits est facturÃ©e Ã  moins de 100 â‚¬'. Est-ce vrai ?",ans:"Effectifs â‰¤ 90 â‚¬ : 1200+1350+1000+1100 = 4650 sur 8350 total â‰ˆ 55,7 % > 50 %. VRAI âœ“"}
     ]},
    {title:"Statistiques â€” Ventes de pots de glace",notion:"Statistiques",pts:24,
     intro:"Pots de glace vendus en juilletâ€“aoÃ»t 2022 â€” DNB Asie, 19 juin 2023",
     tableData:{headers:["","Sem. 1","Sem. 2","Sem. 3","Sem. 4"],rows:[["Juillet","453","649","786","854"],["AoÃ»t","860","1003","957","838"]]},
     questions:[
       {pts:8,text:"Calculer le nombre moyen de pots vendus par semaine sur les 8 semaines.",ans:"Total = 453+649+786+854+860+1003+957+838 = 6400. Moyenne = 6400/8 = 800 pots/semaine"},
       {pts:8,text:"67 % des pots sont Ã  1 boule (2,80 â‚¬), les autres Ã  2 boules (3,50 â‚¬). Calculer la somme rapportÃ©e par la vente.",ans:"Pots 1 boule : 0,67Ã—6400 = 4288 â†’ 4288Ã—2,80 = 12 006,40 â‚¬. Pots 2 boules : 2112 â†’ 2112Ã—3,50 = 7 392 â‚¬. Total = 19 398,40 â‚¬"},
       {pts:8,text:"Montrer que le volume d'une boule de glace de diamÃ¨tre 4,2 cm est d'environ 39 cmÂ³. (V = 4/3 Ã— Ï€ Ã— rÂ³)",ans:"r = 2,1 cm. V = 4/3 Ã— Ï€ Ã— 2,1Â³ = 4/3 Ã— Ï€ Ã— 9,261 â‰ˆ 38,79 cmÂ³ â‰ˆ 39 cmÂ³ âœ“"}
     ]},
    {title:"Statistiques â€” EntrÃ©es Ã  la piscine",notion:"Statistiques",pts:22,
     intro:"EntrÃ©es mensuelles Ã  la piscine sur une annÃ©e â€” DNB MÃ©tropole, 18 septembre 2023",
     tableData:{headers:["Mois","Jan","FÃ©v","Mar","Avr","Mai","Jui","Jul","AoÃ»","Sep","Oct","Nov","DÃ©c"],rows:[["EntrÃ©es","12500","13700","10400","13600","12300","11700","10400","11600","10200","13800","12600","11800"]]},
     questions:[
       {pts:7,text:"Calculer le nombre moyen d'entrÃ©es par mois.",ans:"Total = 144 600. Moyenne = 144 600 / 12 = 12 050 entrÃ©es/mois"},
       {pts:7,text:"Calculer l'Ã©tendue du nombre d'entrÃ©es par mois.",ans:"Max = 13 800 (oct.). Min = 10 200 (sep.). Ã‰tendue = 3 600"},
       {pts:8,text:"La piscine est un pavÃ© droit de 50 m Ã— 25 m Ã— 3 m. Calculer le volume d'eau Ã©vacuÃ© lors d'une vidange complÃ¨te.",ans:"V = 50 Ã— 25 Ã— 3 = 3 750 mÂ³"}
     ]},
    {title:"Statistiques â€” Lunettes de soleil et prix moyen",notion:"Statistiques",pts:20,
     intro:"5 modÃ¨les de lunettes vendus en 2022 â€” DNB MÃ©tropole Antilles-Guyane, 26 juin 2023",
     tableData:{headers:["ModÃ¨le","1","2","3","4","5"],rows:[["Paires vendues","1200","950","875","250","300"],["Prix unit. (â‚¬)","75","100","110","140","160"]]},
     questions:[
       {pts:5,text:"Montrer que l'Ã©tendue des prix est de 85 â‚¬.",ans:"Ã‰tendue = 160 âˆ’ 75 = 85 â‚¬ âœ“"},
       {pts:7,text:"Calculer le nombre total de paires vendues en 2022.",ans:"Total = 1200+950+875+250+300 = 3 575 paires"},
       {pts:8,text:"Calculer le montant total des ventes et le prix moyen par paire (arrondi au centime).",ans:"Ventes = 1200Ã—75+950Ã—100+875Ã—110+250Ã—140+300Ã—160 = 364 250 â‚¬. Prix moyen = 364 250/3575 â‰ˆ 101,89 â‚¬"}
     ]},
    {title:"Statistiques â€” Prix vÃªtements, moyenne et mÃ©diane",notion:"Statistiques",pts:20,
     intro:"Prix d'un vÃªtement dans diffÃ©rents magasins (â‚¬) : 12 ; 15 ; 10 ; 7 ; 13 â€” DNB AmÃ©rique du Nord, 29 mai 2024",
     questions:[
       {pts:7,text:"La moyenne est-elle 11,40 â‚¬ ? Justifier.",ans:"Moyenne = (7+10+12+13+15)/5 = 57/5 = 11,40 â‚¬. VRAIE âœ“"},
       {pts:7,text:"La mÃ©diane est-elle 10 â‚¬ ? Justifier.",ans:"Valeurs triÃ©es : 7, 10, 12, 13, 15. 3e valeur = 12 â‚¬. L'affirmation 'mÃ©diane = 10' est FAUSSE."},
       {pts:6,text:"Quelle est l'Ã©tendue des prix ?",ans:"Ã‰tendue = 15 âˆ’ 7 = 8 â‚¬"}
     ]}
  ],

  geometrie2023:[
    {title:"GÃ©omÃ©trie â€” Triangle LNA et triangles semblables",notion:"GÃ©omÃ©trie",pts:22,
     intro:"AN = 13 cm, LN = 5 cm, AL = 12 cm, ON = 3 cm. O âˆˆ [LN], H âˆˆ [NA]. Triangles LNA et ONH semblables. â€” DNB AmÃ©rique du Nord, 31 mai 2023",
     questions:[
       {pts:5,text:"Montrer que le triangle LNA est rectangle en L.",ans:"LNÂ² + ALÂ² = 25 + 144 = 169 = 13Â² = ANÂ². Par rÃ©ciproque de Pythagore, LNA est rectangle en L âœ“"},
       {pts:7,text:"Montrer que OH = 7,2 cm.",ans:"Triangles semblables LNA et ONH : ON/LN = OH/AL â†’ 3/5 = OH/12 â†’ OH = 7,2 cm âœ“"},
       {pts:10,text:"Calculer l'angle LNA (Ã  l'unitÃ©). Calculer l'aire du quadrilatÃ¨re LOHA et sa proportion par rapport Ã  l'aire du triangle LNA.",ans:"sin(LNA) = AL/AN = 12/13 â†’ angle LNA â‰ˆ 67Â°. Aire LNA = (5Ã—12)/2 = 30 cmÂ². Aire ONH = (3Ã—7,2)/2 = 10,8 cmÂ². Aire LOHA = 30 âˆ’ 10,8 = 19,2 cmÂ². Proportion = 19,2/30 = 64 %"}
     ]},
    {title:"GÃ©omÃ©trie â€” Triangles semblables EGF et LGH",notion:"GÃ©omÃ©trie",pts:20,
     intro:"EF=18 cm, FG=24 cm, EG=30 cm, GH=38,4 cm. (LH)âŠ¥(FH). Angle EGF = angle LGH. â€” DNB AmÃ©rique du Sud, nov. 2023",
     questions:[
       {pts:5,text:"Montrer que le triangle EFG est rectangle en F.",ans:"EFÂ²+FGÂ² = 324+576 = 900 = 30Â² = EGÂ². Par rÃ©ciproque de Pythagore, EFG rectangle en F âœ“"},
       {pts:5,text:"Calculer l'angle EGF (au degrÃ© prÃ¨s).",ans:"cos(EGF) = FG/EG = 24/30 = 0,8 â†’ angle EGF â‰ˆ 37Â°"},
       {pts:5,text:"Montrer que les triangles EGF et LGH sont semblables.",ans:"Angle EGF = Angle LGH (donnÃ©es). Angle EFG = Angle LHG = 90Â°. Deux angles Ã©gaux â†’ triangles semblables âœ“"},
       {pts:5,text:"Calculer le coefficient d'agrandissement de EGF vers LGH puis le pÃ©rimÃ¨tre de LGH.",ans:"k = GH/GF = 38,4/24 = 1,6. LH = 18Ã—1,6 = 28,8 cm. LG = 30Ã—1,6 = 48 cm. PÃ©rimÃ¨tre = 28,8+38,4+48 = 115,2 cm"}
     ]},
    {title:"GÃ©omÃ©trie â€” Piste d'hippodrome",notion:"GÃ©omÃ©trie",pts:18,
     intro:"La piste est composÃ©e de 2 segments de 850 m et 2 demi-cercles de rayon 40 m. â€” DNB AmÃ©rique du Nord, 31 mai 2023",
     questions:[
       {pts:5,text:"Montrer que la longueur d'un tour de piste est d'environ 1 951 m.",ans:"Droites = 2Ã—850 = 1700 m. Cercle = 2Ï€Ã—40 â‰ˆ 251,3 m. Total â‰ˆ 1 951 m âœ“"},
       {pts:7,text:"Un cheval parcourt un tour en 2 min 9 s. Calculer sa vitesse en m/s (Ã  l'unitÃ©) puis en km/h.",ans:"DurÃ©e = 129 s. v = 1951/129 â‰ˆ 15 m/s. En km/h : 15 Ã— 3,6 = 54 km/h"},
       {pts:6,text:"Aire de la piste â‰ˆ 73 027 mÂ². Marque A : 500 mÂ²/sac Ã  141,95 â‚¬. Marque B : 400 mÂ²/sac Ã  87,90 â‚¬. Marque C : 300 mÂ²/sac Ã  66,50 â‚¬. Quelle marque choisir pour un coÃ»t minimum ?",ans:"Sacs A : âŒˆ73027/500âŒ‰=147 â†’ 147Ã—141,95â‰ˆ20 867 â‚¬. Sacs B : âŒˆ73027/400âŒ‰=183 â†’ 183Ã—87,90â‰ˆ16 086 â‚¬. Sacs C : âŒˆ73027/300âŒ‰=244 â†’ 244Ã—66,50â‰ˆ16 226 â‚¬. Choisir la marque B."}
     ]},
    {title:"GÃ©omÃ©trie â€” Triangle Ã©quilatÃ©ral et Scratch",notion:"GÃ©omÃ©trie",pts:19,
     intro:"Triangle ABC Ã©quilatÃ©ral, AB = 240 mm. Point C sur [AE] avec CE = 80 mm. (DE)âˆ¥(AB). â€” DNB AmÃ©rique du Nord, 29 mai 2024",
     questions:[
       {pts:7,text:"Montrer que le triangle ABC est Ã©quilatÃ©ral.",ans:"Angle ACB = 60Â° et les codages montrent AB = BC. Triangle isocÃ¨le avec angle au sommet 60Â° â†’ tous les angles valent 60Â° â†’ triangle Ã©quilatÃ©ral âœ“"},
       {pts:6,text:"Montrer que les droites (DE) et (AB) sont parallÃ¨les.",ans:"D âˆˆ [BC], E âˆˆ [AC], et CE/CA = DE/AB (les codages montrent CE = 80 = AB/3). Par la rÃ©ciproque du thÃ©orÃ¨me de ThalÃ¨s dans le triangle CAB, (DE)âˆ¥(AB) âœ“"},
       {pts:6,text:"Dans le programme Scratch, la variable cÃ´tÃ© prend la valeur 240 pour le grand triangle, puis cÃ´tÃ©/3 pour le petit. Expliquer et calculer le cÃ´tÃ© du petit triangle.",ans:"CE = 80 mm = 240/3 mm. Le petit triangle CDE est une rÃ©duction de rapport 1/3. cÃ´tÃ©/3 = 240/3 = 80 mm."}
     ]},
    {title:"GÃ©omÃ©trie â€” Escalier et trigonomÃ©trie",notion:"GÃ©omÃ©trie",pts:20,
     intro:"Escalier de hauteur totale 272 cm. Hauteur d'une marche = 17 cm. Profondeur = 27 cm. â€” DNB MÃ©tropole Antilles-Guyane, 26 juin 2023",
     questions:[
       {pts:5,text:"Montrer qu'il faut prÃ©voir 16 marches.",ans:"272 Ã· 17 = 16 marches exactement âœ“"},
       {pts:5,text:"Montrer que la longueur de la base AB est 432 cm.",ans:"16 Ã— 27 = 432 cm âœ“"},
       {pts:10,text:"Calculer l'angle BAC (au degrÃ© prÃ¨s). L'escalier permet-il une montÃ©e agrÃ©able (25Â° Ã  40Â°) ?",ans:"tan(BAC) = BC/AB = 272/432 â‰ˆ 0,630 â†’ angle BAC â‰ˆ 32Â°. 25Â° < 32Â° < 40Â° â†’ montÃ©e agrÃ©able âœ“"}
     ]},
    {title:"GÃ©omÃ©trie â€” Terrasse en bÃ©ton",notion:"GÃ©omÃ©trie",pts:21,
     intro:"Terrasse en L : EFGH rectangle (HG=10 m, EH=6 m). Un coin (3m Ã— 4m) est dÃ©coupÃ©. Hauteur de la terrasse : 15 cm = 0,15 m. â€” DNB AmÃ©rique du Nord, 29 mai 2024",
     questions:[
       {pts:5,text:"Montrer que FJ = 4 m.",ans:"EF = HG = 10 m. EJ = EH âˆ’ JH = 6 m correspond Ã  la largeur totale de la partie rectangulaire. La partie dÃ©coupÃ©e a IJ = 15 cm. Vue de dessus : FJ = HG âˆ’ partie restante. EJ = 6 m â†’ FJ = 10 âˆ’ 6 = 4 m âœ“"},
       {pts:8,text:"Calculer la longueur minimale de planches Ã  acheter (pÃ©rimÃ¨tre de la terrasse).",ans:"PÃ©rimÃ¨tre = 10 + 6 + 4 + 3 + 6 + 3 = 32 m"},
       {pts:8,text:"Montrer que le volume de la terrasse est infÃ©rieur Ã  4 mÂ³.",ans:"Aire = 10Ã—6 âˆ’ 4Ã—3 = 60 âˆ’ 12 = 48 mÂ². V = 48 Ã— 0,15 = 7,2 mÂ³. En rÃ©alitÃ© la forme L : (6Ã—3)+(4Ã—6) = 18+24=42 mÂ² ou le calcul direct en lisant la figure. V = 42Ã—0,15 = 6,3 mÂ³ > 4 mÂ³ â†’ les 4 mÂ³ commandÃ©s ne suffisent pas pour la terrasse complÃ¨te."}
     ]}
  ],

  algebre2023:[
    {title:"AlgÃ¨bre â€” Deux programmes de calcul (Amir & Sonia)",notion:"AlgÃ¨bre",pts:15,
     intro:"Prog. Amir : x â†’ soustraire 5 â†’ Ã—2. Prog. Sonia : x â†’ +3 â†’ Ã—(nombre choisi) â†’ âˆ’16. â€” DNB Centres Ã©trangers, 14 juin 2023",
     questions:[
       {pts:5,text:"Montrer que pour x=6, Amir donne 2 et Sonia donne 38.",ans:"Amir : (6âˆ’5)Ã—2 = 2 âœ“. Sonia : (6+3)Ã—6 âˆ’ 16 = 54âˆ’16 = 38 âœ“"},
       {pts:5,text:"D'aprÃ¨s le tableau de valeurs, pour quel nombre les deux programmes donnent-ils le mÃªme rÃ©sultat ?",ans:"Pour x=2 : Amir = âˆ’6 et Sonia = âˆ’6. Les deux programmes sont Ã©gaux pour x = 2 (et x = âˆ’3)."},
       {pts:5,text:"Montrer que le rÃ©sultat de Sonia s'Ã©crit xÂ² + 3x âˆ’ 16. RÃ©soudre (xâˆ’2)(x+3) = 0.",ans:"Sonia : (x+3)Ã—x âˆ’ 16 = xÂ²+3xâˆ’16 âœ“. (xâˆ’2)(x+3)=0 â†’ x=2 ou x=âˆ’3"}
     ]},
    {title:"AlgÃ¨bre â€” Fonctions affines et tarifs cinÃ©ma",notion:"AlgÃ¨bre",pts:20,
     intro:"Tarif Classique : h(x)=11x. Tarif Essentiel : f(x)=50+5x. Tarif LibertÃ© : g(x)=240. â€” DNB AmÃ©rique du Nord, 29 mai 2024",
     questions:[
       {pts:5,text:"Avec le tarif Classique, quel est le prix pour 3 entrÃ©es ?",ans:"h(3) = 11Ã—3 = 33 â‚¬"},
       {pts:5,text:"Montrer qu'avec le tarif Essentiel, aller 8 fois au cinÃ©ma coÃ»te 90 â‚¬.",ans:"f(8) = 50+5Ã—8 = 90 â‚¬ âœ“"},
       {pts:5,text:"Quel tarif donne un prix proportionnel au nombre d'entrÃ©es ? Justifier.",ans:"Tarif Classique : h(x)=11x est une fonction linÃ©aire â†’ prix proportionnel au nombre d'entrÃ©es."},
       {pts:5,text:"Ã€ partir de combien d'entrÃ©es le tarif LibertÃ© est-il le plus intÃ©ressant par rapport au tarif Essentiel ?",ans:"240 < 50+5x â†’ 5x > 190 â†’ x > 38. Le tarif LibertÃ© est plus intÃ©ressant Ã  partir de 39 entrÃ©es."}
     ]},
    {title:"AlgÃ¨bre â€” Tarifs piscine et Ã©quation",notion:"AlgÃ¨bre",pts:22,
     intro:"Tarif A : 5,90 â‚¬/entrÃ©e. Tarif B : 30 â‚¬ abonnement + 4,40 â‚¬/entrÃ©e. â€” DNB MÃ©tropole, 18 sept. 2023",
     questions:[
       {pts:6,text:"Calculer le prix pour 10 entrÃ©es avec chaque tarif.",ans:"Tarif A : 5,90Ã—10 = 59 â‚¬. Tarif B : 4,40Ã—10+30 = 74 â‚¬"},
       {pts:8,text:"RÃ©soudre 5,90x = 4,40x + 30. Quel est le nombre d'entrÃ©es pour lequel les tarifs sont Ã©gaux ?",ans:"1,50x = 30 â†’ x = 20 entrÃ©es"},
       {pts:8,text:"Pour x < 20, quel tarif est le moins cher ? Pour x > 20 ?",ans:"x < 20 (ex. 10 entrÃ©es) : A=59â‚¬ < B=74â‚¬ â†’ tarif A. x > 20 (ex. 30 entrÃ©es) : A=177â‚¬ > B=162â‚¬ â†’ tarif B."}
     ]},
    {title:"AlgÃ¨bre â€” Programme de calcul 10xÂ²",notion:"AlgÃ¨bre",pts:20,
     intro:"Programme : x â†’ xÂ² â†’ Ã—5 â†’ +4 â†’ Ã—2 â†’ âˆ’8 = rÃ©sultat. â€” DNB Asie, 19 juin 2023",
     questions:[
       {pts:5,text:"Montrer que pour x=3, le rÃ©sultat est 90.",ans:"3Â²=9 â†’ Ã—5=45 â†’ +4=49 â†’ Ã—2=98 â†’ âˆ’8=90 âœ“"},
       {pts:5,text:"Montrer que pour x=2 et x=âˆ’2, on obtient le mÃªme rÃ©sultat.",ans:"(âˆ’2)Â²=4 = 2Â² â†’ mÃªmes calculs ensuite â†’ mÃªme rÃ©sultat 40 âœ“"},
       {pts:5,text:"Montrer que le rÃ©sultat du programme s'Ã©crit 10xÂ².",ans:"x â†’ xÂ² â†’ 5xÂ² â†’ 5xÂ²+4 â†’ 10xÂ²+8 â†’ 10xÂ²+8âˆ’8 = 10xÂ² âœ“"},
       {pts:5,text:"Trouver la valeur exacte de l'antÃ©cÃ©dent positif de 30 par f(x)=10xÂ².",ans:"10xÂ²=30 â†’ xÂ²=3 â†’ x=âˆš3 (valeur exacte)"}
     ]},
    {title:"AlgÃ¨bre â€” Programme de calcul, factorisation (2024)",notion:"AlgÃ¨bre",pts:20,
     intro:"Programme : x â†’ branche 1 : (x+2)Ã—4 ; branche 2 : xÃ—5âˆ’3 â†’ multiplier les deux. â€” DNB AmÃ©rique du Nord, 29 mai 2024",
     questions:[
       {pts:5,text:"Montrer que pour x=2, le rÃ©sultat est 112.",ans:"Branche 1 : (2+2)Ã—4=16. Branche 2 : 2Ã—5âˆ’3=7. 16Ã—7=112 âœ“"},
       {pts:5,text:"Quel rÃ©sultat pour x=âˆ’3 ?",ans:"Branche 1 : (âˆ’3+2)Ã—4=âˆ’4. Branche 2 : âˆ’3Ã—5âˆ’3=âˆ’18. RÃ©sultat = (âˆ’4)Ã—(âˆ’18) = 72"},
       {pts:5,text:"Quelle expression traduit correctement ce programme parmi A:(x+2Ã—4)(xÃ—5âˆ’3), B:(4x+2)(5xâˆ’3), C:(4x+8)(5xâˆ’3) ?",ans:"L'expression correcte est C : (4x+8)(5xâˆ’3) = 4(x+2)(5xâˆ’3). C et D = (x+2)Ã—4Ã—(5xâˆ’3) sont correctes."},
       {pts:5,text:"DÃ©velopper et rÃ©duire (4x+8)(5xâˆ’3). Trouver les deux valeurs donnant 0.",ans:"20xÂ²âˆ’12x+40xâˆ’24 = 20xÂ²+28xâˆ’24. Pour 0 : 4x+8=0 â†’ x=âˆ’2 ou 5xâˆ’3=0 â†’ x=3/5"}
     ]},
    {title:"AlgÃ¨bre â€” Programmes A et B, fonctions affines",notion:"AlgÃ¨bre",pts:20,
     intro:"Prog. A : x â†’ Ã—(âˆ’2) â†’ +5. Prog. B : x â†’ âˆ’5 â†’ Ã—3 â†’ +11. â€” DNB MÃ©tropole Antilles-Guyane, 26 juin 2023",
     questions:[
       {pts:5,text:"Montrer que pour x=âˆ’3, le programme A donne 11.",ans:"(âˆ’3)Ã—(âˆ’2)+5 = 6+5 = 11 âœ“"},
       {pts:5,text:"Montrer que le rÃ©sultat du programme B s'Ã©crit 3xâˆ’4.",ans:"(xâˆ’5)Ã—3+11 = 3xâˆ’15+11 = 3xâˆ’4 âœ“"},
       {pts:5,text:"Les fonctions f(x)=âˆ’2x+5 et g(x)=3xâˆ’4 sont tracÃ©es. Par lecture graphique, donner la valeur pour laquelle f(x)=g(x).",ans:"D'aprÃ¨s le graphique, les deux droites se croisent pour x â‰ˆ 1,8"},
       {pts:5,text:"Calculer prÃ©cisÃ©ment le nombre de dÃ©part pour lequel les programmes A et B donnent le mÃªme rÃ©sultat.",ans:"âˆ’2x+5 = 3xâˆ’4 â†’ âˆ’5x = âˆ’9 â†’ x = 9/5 = 1,8"}
     ]}
  ],

  proportionnalite2023:[
    {title:"ProportionnalitÃ© â€” Visiteurs d'un site touristique",notion:"ProportionnalitÃ©",pts:20,
     intro:"Site touristique : 187 216 visiteurs en 2020, 219 042 en 2021. Objectif du maire : +15 % minimum. â€” DNB AmÃ©rique du Nord, 31 mai 2023",
     questions:[
       {pts:7,text:"Calculer le taux d'Ã©volution entre 2020 et 2021. L'objectif a-t-il Ã©tÃ© atteint ?",ans:"Taux = (219042âˆ’187216)/187216 Ã— 100 â‰ˆ 17 %. Objectif 15 % atteint âœ“"},
       {pts:7,text:"Si la progression se poursuit Ã  +17 % par an, combien de visiteurs en 2022 ?",ans:"219042 Ã— 1,17 â‰ˆ 256 279 visiteurs"},
       {pts:6,text:"Le coefficient d'agrandissement du polygone 2 par rapport au polygone 1 est 3. Aire du polygone 1 = 11 cmÂ². Calculer l'aire du polygone 2.",ans:"L'aire est multipliÃ©e par kÂ²=9. Aire polygone 2 = 11Ã—9 = 99 cmÂ²"}
     ]}
  ],

  arithmetique2023:[
    {title:"ArithmÃ©tique â€” PGCD paniers de lÃ©gumes",notion:"ArithmÃ©tique",pts:18,
     intro:"JosÃ© dispose de 39 salades (3Ã—13), 78 carottes et 51 aubergines. Il veut des paniers identiques utilisant tous les lÃ©gumes. â€” DNB Nouvelle-CalÃ©donie, dÃ©c. 2023",
     questions:[
       {pts:6,text:"DÃ©composer 78 et 51 en produit de facteurs premiers.",ans:"78 = 2Ã—3Ã—13. 51 = 3Ã—17"},
       {pts:6,text:"Calculer le PGCD(39,78,51) et en dÃ©duire le nombre maximal de paniers.",ans:"PGCD(39,78)=39. PGCD(39,51)=3. PGCD(39,78,51)=3. Maximum 3 paniers."},
       {pts:6,text:"JosÃ© fait 13 paniers. Combien d'aubergines par panier ? Combien sans panier ?",ans:"51Ã·13=3 reste 12. Chaque panier : 3 aubergines. 12 aubergines non utilisÃ©es â†’ il faut en cueillir 1 de plus."}
     ]},
    {title:"ArithmÃ©tique â€” PGCD lots figurines et autocollants",notion:"ArithmÃ©tique",pts:22,
     intro:"195 figurines et 234 autocollants (234=2Ã—3Â²Ã—13). Lots identiques, tout doit Ãªtre utilisÃ©. â€” DNB Centres Ã©trangers, 14 juin 2023",
     questions:[
       {pts:6,text:"Peut-on faire 3 lots identiques ? Justifier.",ans:"195Ã·3=65 âœ“. 234Ã·3=78 âœ“. Oui, 3 est un diviseur commun."},
       {pts:8,text:"DÃ©composer 195 en facteurs premiers. Calculer PGCD(195,234).",ans:"195 = 3Ã—5Ã—13. PGCD(195,234) = 3Ã—13 = 39"},
       {pts:8,text:"Nombre maximal de lots ? Composition de chaque lot ?",ans:"Nombre max = 39 lots. Figurines/lot = 195/39 = 5. Autocollants/lot = 234/39 = 6."}
     ]},
    {title:"ArithmÃ©tique â€” PPCM course de karting",notion:"ArithmÃ©tique",pts:22,
     intro:"Un professionnel fait un tour en 60 s, un amateur en 72 s. Ils partent ensemble. â€” DNB PolynÃ©sie, 23 juin 2023",
     questions:[
       {pts:7,text:"DÃ©composer 60 et 72 en produit de facteurs premiers.",ans:"60 = 2Â²Ã—3Ã—5. 72 = 2Â³Ã—3Â²"},
       {pts:8,text:"Au bout de combien de secondes se retrouveront-ils ensemble pour la premiÃ¨re fois ?",ans:"PPCM(60,72) = 2Â³Ã—3Â²Ã—5 = 360 s = 6 minutes"},
       {pts:7,text:"Combien de tours chacun aura-t-il effectuÃ©s ?",ans:"Professionnel : 360/60 = 6 tours. Amateur : 360/72 = 5 tours"}
     ]},
    {title:"ArithmÃ©tique â€” DÃ©composition et baguettes",notion:"ArithmÃ©tique",pts:16,
     intro:"Nombre de baguettes et prix (1â†’1,10â‚¬, 2â†’2,20â‚¬, 3â†’3,30â‚¬, 4â†’4â‚¬). Engrenage : roue A Ã  8 dents, roue B Ã  12 dents. â€” DNB AmÃ©rique du Sud, nov. 2023",
     questions:[
       {pts:5,text:"Le prix est-il proportionnel au nombre de baguettes ? Justifier.",ans:"Pour 4 baguettes : 4â‚¬ â‰  4Ã—1,10â‚¬ = 4,40â‚¬. Le rapport n'est pas constant â†’ pas de proportionnalitÃ©. FAUX."},
       {pts:5,text:"L'engrenage sera-t-il dans la mÃªme position au bout de 6 tours pour la roue A et 4 tours pour la roue B ?",ans:"6Ã—8 = 48 dents pour A. 4Ã—12 = 48 dents pour B. MÃªme nombre de dents engrenÃ©es â†’ VRAI âœ“"},
       {pts:6,text:"DÃ©composer 780 en produit de facteurs premiers.",ans:"780 = 2Â²Ã—3Ã—5Ã—13"}
     ]}
  ],

  volumes2023:[
    {title:"Volumes â€” Bac Ã  sable sous cabane",notion:"Volumes",pts:24,
     intro:"Bac Ã  sable (pavÃ© droit) : 200 cm Ã— 180 cm Ã— 20 cm. Volume = 0,72 mÂ³. MÃ©lange sable maÃ§onner/sable fin ratio 3:2. â€” DNB Centres Ã©trangers, 14 juin 2023",
     questions:[
       {pts:6,text:"Calculer le volume du bac en cmÂ³.",ans:"V = 200Ã—180Ã—20 = 720 000 cmÂ³"},
       {pts:8,text:"VÃ©rifier que le volume de sable Ã  maÃ§onner est 0,432 mÂ³ et de sable fin 0,288 mÂ³.",ans:"Ratio 3:2 â†’ 5 parts. MaÃ§onner = 3/5Ã—0,72 = 0,432 mÂ³ âœ“. Fin = 2/5Ã—0,72 = 0,288 mÂ³ âœ“"},
       {pts:10,text:"Sacs maÃ§onner : 35 kg / 0,022 mÂ³ / 2,95 â‚¬. Sacs fin : 25 kg / 0,016 mÂ³ / 5,95 â‚¬. Calculer le coÃ»t total (sacs entiers).",ans:"Sacs maÃ§onner : âŒˆ0,432/0,022âŒ‰=20 â†’ 20Ã—2,95=59 â‚¬. Sacs fin : âŒˆ0,288/0,016âŒ‰=18 â†’ 18Ã—5,95=107,10 â‚¬. Total = 166,10 â‚¬"}
     ]},
    {title:"Volumes â€” BÃ©ton et ratio de mÃ©lange",notion:"Volumes",pts:21,
     intro:"4 mÂ³ de bÃ©ton Ã  rÃ©aliser. Ratio ciment:gravier:sable = 2:7:5. 1 mÂ³ nÃ©cessite 250 kg de ciment. Surface Ã  peindre = 48 mÂ². â€” DNB AmÃ©rique du Nord, 29 mai 2024",
     questions:[
       {pts:7,text:"Calculer la masse de ciment nÃ©cessaire pour 4 mÂ³ de bÃ©ton.",ans:"4Ã—250 = 1 000 kg de ciment"},
       {pts:7,text:"Calculer la masse de gravier et de sable pour 4 mÂ³.",ans:"1 part ciment = 1000/2 = 500 kg. Gravier = 7Ã—500 = 3 500 kg. Sable = 5Ã—500 = 2 500 kg"},
       {pts:7,text:"On peint 48 mÂ² en 2 couches (1 L = 5 mÂ²/couche). Pots A=5L Ã  79,90 â‚¬, Pots B=10L Ã  129,90 â‚¬, offre : âˆ’50% sur le 2e article identique. Quel est le choix le moins cher ?",ans:"Volume = 2Ã—48/5 = 19,2 L. 2 pots B : 129,90+64,95=194,85 â‚¬ (20 L). 4 pots A : 79,90Ã—2+39,95Ã—2=239,70 â‚¬. Choisir 2 pots B."}
     ]},
    {title:"Volumes â€” Rampe d'accÃ¨s prisme triangulaire",notion:"Volumes",pts:20,
     intro:"Rampe prisme triangulaire : AC=30 cm (hauteur), angle ACB=90Â°, AB=124 cm, longueur BE=9 m. â€” DNB PolynÃ©sie, sept. 2023",
     questions:[
       {pts:6,text:"Montrer que BC â‰ˆ 120 cm.",ans:"BC = âˆš(ABÂ²âˆ’ACÂ²) = âˆš(15376âˆ’900) = âˆš14476 â‰ˆ 120,3 cm â‰ˆ 120 cm âœ“"},
       {pts:6,text:"Calculer l'angle ABC (au degrÃ© prÃ¨s).",ans:"tan(ABC) = AC/BC = 30/120 = 0,25 â†’ angle ABC â‰ˆ 14Â°"},
       {pts:8,text:"Les propriÃ©taires prÃ©voient 2 mÂ³ de bÃ©ton. Ce volume suffit-il pour la rampe ?",ans:"Aire base = (1/2)Ã—120Ã—30 = 1800 cmÂ² = 0,18 mÂ². V rampe = 0,18Ã—9 = 1,62 mÂ³ < 2 mÂ³. Oui, suffisant âœ“"}
     ]},
    {title:"Volumes â€” Bougies cylindriques",notion:"Volumes",pts:16,
     intro:"Bougie cylindrique : rayon 3 cm, hauteur 12 cm. Volume de cire = 9/10 du volume total. DensitÃ© cire = 0,7 g/cmÂ³. â€” DNB AmÃ©rique du Sud, nov. 2023",
     questions:[
       {pts:6,text:"Montrer que le volume d'une bougie est d'environ 339 cmÂ³.",ans:"V = Ï€Ã—3Â²Ã—12 = 108Ï€ â‰ˆ 339,3 cmÂ³ â‰ˆ 339 cmÂ³ âœ“"},
       {pts:5,text:"Calculer la masse de cire nÃ©cessaire pour une bougie (au gramme prÃ¨s).",ans:"V cire = 9/10Ã—339 = 305,1 cmÂ³. Masse = 305,1Ã—0,7 â‰ˆ 214 g"},
       {pts:5,text:"Objectif production : moyenne de 7 900 bougies/mois sur 3 mois. Janvier : 6 500. FÃ©vrier : 8 000. Combien faut-il en produire en mars ?",ans:"Total objectif = 7900Ã—3 = 23 700. DÃ©jÃ  produit = 6500+8000 = 14500. Mars = 23700âˆ’14500 = 9 200 bougies"}
     ]}
  ],

  algorithmique2023:[
    {title:"Algorithmique â€” Motif Fleur (Scratch)",notion:"Algorithmique",pts:20,
     intro:"Motif 'Fleur' = 5 pÃ©tales en parallÃ©logramme (35 pas Ã— 20 pas, angles 60Â° et 120Â°). â€” DNB AmÃ©rique du Nord, 31 mai 2023",
     questions:[
       {pts:6,text:"Expliquer pourquoi le bloc Fleur utilise 72Â° entre chaque pÃ©tale.",ans:"360Â° Ã· 5 pÃ©tales = 72Â°. Cela garantit un placement rÃ©gulier sur tout le tour."},
       {pts:7,text:"Combien de fois faut-il rÃ©pÃ©ter le bloc PÃ©tale pour une fleur Ã  5 pÃ©tales ?",ans:"5 fois (5 rotations de 72Â° = 360Â° â†’ retour Ã  la position initiale)."},
       {pts:7,text:"On modifie pour une fleur Ã  6 pÃ©tales. Quelles modifications apporter ?",ans:"Nombre de rÃ©pÃ©titions : 6. Angle de rotation : 360Â°/6 = 60Â°."}
     ]},
    {title:"Algorithmique â€” CarrÃ©s imbriquÃ©s avec Scratch",notion:"Algorithmique",pts:19,
     intro:"Programme Scratch construisant 10 carrÃ©s emboÃ®tÃ©s. Le cÃ´tÃ© du 1er carrÃ© = 300 pixels. Chaque carrÃ© suivant est rÃ©duit de 20 %. â€” DNB PolynÃ©sie, sept. 2023",
     questions:[
       {pts:5,text:"Montrer que le cÃ´tÃ© du 2e carrÃ© mesure 240 pixels.",ans:"300Ã—0,8 = 240 pixels âœ“"},
       {pts:7,text:"Quelle est la longueur du dernier carrÃ© (10e) ? Arrondir au pixel.",ans:"300 Ã— 0,8â¹ = 300 Ã— 0,1342â€¦ â‰ˆ 40 pixels"},
       {pts:7,text:"Le script exÃ©cute 'mettre CÃ´tÃ© Ã  CÃ´tÃ©Ã—0,8' dans une boucle. Quelle est la valeur du cÃ´tÃ© aprÃ¨s 3 itÃ©rations ?",ans:"300 â†’ 240 â†’ 192 â†’ 153,6 â‰ˆ 154 pixels"}
     ]},
    {title:"Algorithmique â€” Triangle et Scratch (2024)",notion:"Algorithmique",pts:19,
     intro:"Programme Scratch pour tracer le grand triangle ABC (cÃ´tÃ©=240) puis le petit CDE (cÃ´tÃ©=80). Variable 'cÃ´tÃ©'. â€” DNB AmÃ©rique du Nord, 29 mai 2024",
     questions:[
       {pts:5,text:"Quelles sont les coordonnÃ©es du point de dÃ©part du lutin ?",ans:"Ligne 2 du programme : aller Ã  x:âˆ’180, y:âˆ’150. CoordonnÃ©es = (âˆ’180 ; âˆ’150)"},
       {pts:7,text:"Quelle valeur saisir Ã  la ligne 4 (mettre cÃ´tÃ© Ã  ...) pour tracer le grand triangle ?",ans:"cÃ´tÃ© = 240 (AB = 240 mm = 240 pas)"},
       {pts:7,text:"Expliquer l'instruction 'cÃ´tÃ©/3' (ligne 8) et calculer le cÃ´tÃ© du petit triangle.",ans:"CE = 80 mm = 240/3 â†’ rÃ©duction de rapport 1/3. cÃ´tÃ©/3 = 240/3 = 80 pas."}
     ]}
  ]
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SETUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function selTimer(el){
  document.querySelectorAll('.timer-chip').forEach(c=>c.classList.remove('sel'));
  el.classList.add('sel'); selMin = parseInt(el.dataset.min);
  const h=Math.floor(selMin/60),m=selMin%60;
  document.getElementById('setupTimerVal').textContent = h>0?(m>0?`${h}h${m}`:h+'h'):m+' min';
}
function selChap(el){
  const id=el.dataset.id;
  if(id==='all'){
    document.querySelectorAll('.chap-chip').forEach(c=>{c.classList.remove('sel');c.querySelector('.chk').textContent='';});
    el.classList.add('sel'); el.querySelector('.chk').textContent='âœ“';
    selChaps=['all'];
  } else {
    const allC=document.querySelector('.chap-chip[data-id="all"]');
    allC.classList.remove('sel'); allC.querySelector('.chk').textContent='';
    el.classList.toggle('sel');
    el.querySelector('.chk').textContent = el.classList.contains('sel')?'âœ“':'';
    selChaps=[...document.querySelectorAll('.chap-chip.sel')].map(c=>c.dataset.id).filter(i=>i!=='all');
    if(!selChaps.length){ allC.classList.add('sel'); allC.querySelector('.chk').textContent='âœ“'; selChaps=['all']; }
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EXAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function pickExercises(){
  let pool=[];
  if(selChaps.includes('all')){
    Object.values(BANK).forEach(arr=>pool.push(...arr));
  } else {
    selChaps.forEach(ch=>{
      // Include base key and all extended keys (e.g. probabilites + probabilites2023 + probabilites2023a)
      Object.keys(BANK).filter(k=>k===ch||k.startsWith(ch)).forEach(k=>pool.push(...BANK[k]));
    });
  }
  for(let i=pool.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[pool[i],pool[j]]=[pool[j],pool[i]];}
  return pool.slice(0,5);
}

function startExam(){
  const picked=pickExercises(); if(!picked.length) return;
  exerciseData=picked; scores={}; validated={}; feedbacks={};
  go('screen-exam',null);
  document.getElementById('exContainer').innerHTML='';
  document.getElementById('examFooter').style.display='none';
  document.getElementById('loadingBox').style.display='block';
  document.getElementById('examSub').textContent='Chargementâ€¦';
  startTimer(selMin*60);
  setTimeout(renderExam, 300);
}

function renderExam(){
  document.getElementById('loadingBox').style.display='none';
  const container=document.getElementById('exContainer');
  const pills=document.getElementById('pillsBar');
  pills.innerHTML=''; container.innerHTML='';
  document.getElementById('examSub').textContent=[...new Set(exerciseData.map(e=>e.notion))].join(' Â· ');

  exerciseData.forEach((ex,ei)=>{
    const exId=`ex${ei+1}`;
    const totalPts=ex.questions.reduce((s,q)=>s+q.pts,0);

    const pill=document.createElement('button');
    pill.className='pill'; pill.id=`pill-${exId}`;
    pill.textContent=`Ex. ${ei+1} â€” ${ex.notion}`;
    pill.onclick=()=>document.getElementById(exId)?.scrollIntoView({behavior:'smooth',block:'start'});
    pills.appendChild(pill);

    let tableHTML='';
    if(ex.tableData){tableHTML=`<table><tr>${ex.tableData.headers.map(h=>`<th>${h}</th>`).join('')}</tr>${ex.tableData.rows.map(r=>`<tr>${r.map(c=>`<td>${c}</td>`).join('')}</tr>`).join('')}</table>`;}

    let qHTML='';
    ex.questions.forEach((q,qi)=>{
      const qId=`${exId}q${qi+1}`;
      const ae=escQ(q.ans);
      qHTML+=`<div class="question">
        <div class="q-head"><span class="q-num">Question ${ei+1}.${qi+1}</span><span class="q-pts-badge">${q.pts} pts</span></div>
        <div class="q-text">${q.text}</div>
        <div class="answer-zone">
          <div class="answer-lbl">Ma rÃ©ponse</div>
          <textarea class="answer-ta" id="a-${qId}" placeholder="RÃ©digez votre rÃ©ponse iciâ€¦" oninput="onType(this)"></textarea>
          <div class="val-bar">
            <button class="btn-val" id="vbtn-${qId}" onclick="doVal('${qId}','${exId}',${q.pts},'${ae}')" disabled>âœ“ Valider</button>
            <button class="btn-edit" id="ebtn-${qId}" onclick="doEdit('${qId}','${exId}')">âœ Modifier</button>
            <span class="val-tag" id="vtag-${qId}">âœ… ValidÃ©e</span>
            <span class="val-hint" id="vhint-${qId}">RÃ©digez puis validez</span>
          </div>
          <div class="ai-result" id="ar-${qId}"></div>
        </div>
      </div>`;
    });

    const corrBlocks=ex.questions.map((q,qi)=>`<div class="corr-block"><div class="corr-title">Q${ei+1}.${qi+1}</div><p>${q.ans}</p></div>`).join('');

    container.insertAdjacentHTML('beforeend',`<div class="exercise" id="${exId}">
      <div class="ex-head">
        <div>
          <div class="ex-eyebrow">Exercice ${ei+1}</div>
          <div class="ex-title">${ex.title}</div>
          <div class="ex-notion">${ex.notion}</div>
        </div>
        <div class="ex-pts"><div class="n">${totalPts}</div><div class="l">points</div></div>
      </div>
      <div class="ex-body">
        <p>${ex.intro}</p>${tableHTML}${qHTML}
        <div class="corr-toggle">
          <button class="btn-see" id="cBtn-${exId}" onclick="toggleCorr('corr-${exId}','cBtn-${exId}')" disabled>â–¶ Voir la correction</button>
          <span class="corr-hint" id="chint-${exId}">Validez toutes vos rÃ©ponses pour accÃ©der Ã  la correction</span>
        </div>
        <div class="correction" id="corr-${exId}">
          <div class="corr-head"><div class="corr-badge">âœ“</div><span>Correction dÃ©taillÃ©e</span></div>
          ${corrBlocks}
        </div>
      </div>
    </div>`);
  });

  document.getElementById('examFooter').style.display='flex';
  updateLive();
}

function escQ(s){return(s||'').replace(/\\/g,'\\\\').replace(/'/g,"\\'").replace(/"/g,'&quot;');}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TIMER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function startTimer(s){ clearInterval(timerIv); secsLeft=s; renderTimer(); timerIv=setInterval(()=>{secsLeft--;renderTimer();if(secsLeft<=0){clearInterval(timerIv);endExam();}},1000); }
function renderTimer(){ const h=Math.floor(secsLeft/3600),m=Math.floor((secsLeft%3600)/60),s=secsLeft%60; const el=document.getElementById('timerFace'); el.textContent=`${p2(h)}:${p2(m)}:${p2(s)}`; el.className='timer-face'+(secsLeft<300?' danger':secsLeft<600?' warn':''); }
function p2(n){return String(n).padStart(2,'0');}
function endEarly(){if(confirm('Terminer le brevet maintenant ?'))endExam();}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANSWERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function onType(el){
  const has=el.value.trim().length>0; el.classList.toggle('has-content',has);
  const qId=el.id.replace('a-','');
  const btn=document.getElementById('vbtn-'+qId); if(btn)btn.disabled=!has;
  const hint=document.getElementById('vhint-'+qId); if(hint)hint.textContent=has?'Cliquez pour valider':'RÃ©digez puis validez';
}

async function doVal(qId,exId,maxPts,ae){
  const ta=document.getElementById('a-'+qId);
  const answer=ta.value.trim(); if(!answer)return;
  validated[qId]=true; ta.classList.add('locked'); ta.readOnly=true;
  document.getElementById('vbtn-'+qId).style.display='none';
  document.getElementById('ebtn-'+qId).style.display='inline-flex';
  document.getElementById('vtag-'+qId).classList.add('show');
  const hint=document.getElementById('vhint-'+qId); if(hint)hint.textContent='';
  const ar=document.getElementById('ar-'+qId);
  ar.classList.add('visible');
  ar.innerHTML=`<div class="ai-rh loading-bg"><span class="ai-rl"><span class="mini-sp"></span>&nbsp; Correction en coursâ€¦</span><span class="ai-sc loading-col">â€¦</span></div>`;
  const officialAns=ae.replace(/&quot;/g,'"');
  const prompt=`Tu es un correcteur du brevet des collÃ¨ges en mathÃ©matiques. La question vaut ${maxPts} points.\nRÃ©ponse officielle : "${officialAns}"\nRÃ©ponse de l'Ã©lÃ¨ve : "${answer}"\nRÃ©ponds UNIQUEMENT en JSON valide : {"pts":<entier 0 Ã  ${maxPts}>,"feedback":"<1-2 phrases courtes en franÃ§ais>"}`;
  let pts=0,feedback='';
  try{
    const resp=await fetch('https://api.anthropic.com/v1/messages',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:200,messages:[{role:'user',content:prompt}]})});
    const data=await resp.json();
    const raw=data.content?.[0]?.text||'{}';
    const parsed=JSON.parse(raw.replace(/```json|```/g,'').trim());
    pts=Math.max(0,Math.min(maxPts,Math.round(parsed.pts))); feedback=parsed.feedback||'';
  }catch(e){feedback='Correction indisponible.';}
  scores[qId]=pts; feedbacks[qId]=feedback;
  updateLive(); updatePill(exId);
  const ratio=pts/maxPts;
  let cls,icon,label;
  if(ratio>=.85){cls='correct';icon='âœ“';label='Correct';}
  else if(ratio>=.4){cls='partial';icon='~';label='Partiellement correct';}
  else{cls='wrong';icon='âœ—';label='Incorrect';}
  ar.innerHTML=`<div class="ai-rh ${cls}-bg"><span class="ai-rl" style="color:${cls==='correct'?'var(--green)':cls==='partial'?'var(--gold)':'var(--red)'}">${icon} ${label}</span><span class="ai-sc ${cls}-col">${pts}<span style="font-size:13px;opacity:.5;font-weight:400"> / ${maxPts} pts</span></span></div><div class="ai-fb">${feedback}</div>`;
}

function doEdit(qId,exId){
  validated[qId]=false; delete scores[qId]; delete feedbacks[qId];
  const ta=document.getElementById('a-'+qId); ta.classList.remove('locked'); ta.readOnly=false; ta.focus();
  document.getElementById('vbtn-'+qId).style.display='inline-flex';
  document.getElementById('vbtn-'+qId).disabled=false;
  document.getElementById('ebtn-'+qId).style.display='none';
  document.getElementById('vtag-'+qId).classList.remove('show');
  const hint=document.getElementById('vhint-'+qId); if(hint)hint.textContent='Modifiez puis revalidez';
  const ar=document.getElementById('ar-'+qId); ar.classList.remove('visible'); ar.innerHTML='';
  updateLive(); updatePill(exId);
}

function toggleCorr(corrId,btnId){
  const p=document.getElementById(corrId),b=document.getElementById(btnId);
  const open=p.classList.contains('open');
  if(open){p.classList.remove('open');b.textContent='â–¶ Voir la correction';b.classList.remove('active');}
  else{p.classList.add('open');b.textContent='â–¼ Masquer';b.classList.add('active');setTimeout(()=>p.scrollIntoView({behavior:'smooth',block:'nearest'}),80);}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCORING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function totalScore(){return Object.values(scores).reduce((s,v)=>s+v,0);}
function updateLive(){
  const t=totalScore();
  const el=document.getElementById('liveSc'); if(el)el.textContent=t;
  const fe=document.getElementById('footerSc'); if(fe)fe.textContent=t;
}
function updatePill(exId){
  const idx=parseInt(exId.replace('ex',''))-1;
  const ex=exerciseData[idx]; if(!ex)return;
  const qIds=ex.questions.map((_,i)=>`${exId}q${i+1}`);
  const pill=document.getElementById(`pill-${exId}`); if(!pill)return;
  const anyVal=qIds.some(q=>validated[q]);
  const allGraded=qIds.every(q=>scores[q]!==undefined);
  pill.classList.toggle('answered',anyVal&&!allGraded);
  pill.classList.toggle('corrected',allGraded);
  const cBtn=document.getElementById(`cBtn-${exId}`);
  const chint=document.getElementById(`chint-${exId}`);
  if(cBtn){
    const rem=qIds.filter(q=>!validated[q]).length;
    if(allGraded){cBtn.disabled=false;if(chint)chint.textContent='Correction disponible';}
    else if(anyVal){if(chint)chint.textContent=`Encore ${rem} rÃ©ponse${rem>1?'s':''} Ã  valider`;}
  }
}
function getMention(s){
  if(s>=90)return'ğŸ† FÃ©licitations â€” Excellent';if(s>=80)return'ğŸŒŸ TrÃ¨s Bien';
  if(s>=70)return'ğŸ‘ Bien';if(s>=60)return'âœ… Assez Bien';
  if(s>=50)return'ğŸ“š Admis';return'ğŸ’ª Ã€ retravailler';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   END EXAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function endExam(){
  clearInterval(timerIv);
  const total=totalScore();
  const maxTotal=exerciseData.reduce((s,ex)=>s+ex.questions.reduce((s2,q)=>s2+q.pts,0),0);
  const scaled=Math.round(total/maxTotal*100);
  saveSession(scaled);
  go('screen-results',null);
  document.getElementById('resScore').innerHTML=`${scaled} <span>/ 100</span>`;
  document.getElementById('resMention').textContent=getMention(scaled);
  const barCol=scaled>=70?'#1d6b3a':scaled>=50?'#b8870a':'#c0392b';
  setTimeout(()=>{document.getElementById('resBar').style.width=scaled+'%';document.getElementById('resBar').style.background=barCol;},100);

  let correct=0,partial=0,wrong=0;
  exerciseData.forEach((ex,i)=>{ex.questions.forEach((q,j)=>{const r=(scores[`ex${i+1}q${j+1}`]||0)/q.pts;if(r>=.85)correct++;else if(r>=.4)partial++;else wrong++;});});
  document.getElementById('resCorrect').textContent=correct;
  document.getElementById('resPartial').textContent=partial;
  document.getElementById('resWrong').textContent=wrong;

  const ns={};
  exerciseData.forEach((ex,i)=>{const n=ex.notion;if(!ns[n])ns[n]={e:0,m:0};ex.questions.forEach((q,j)=>{const qId=`ex${i+1}q${j+1}`;ns[n].e+=scores[qId]||0;ns[n].m+=q.pts;});});
  let nH='';
  Object.entries(ns).forEach(([n,v])=>{const pct=Math.round(v.e/v.m*100);const col=pct>=70?'var(--green)':pct>=40?'var(--gold)':'var(--red)';nH+=`<div class="bdown-row"><div><div class="bdown-notion">${n}</div><div class="bdown-pct"><div class="bdown-pct-fill" style="width:${pct}%;background:${col}"></div></div></div><div class="bdown-pts" style="color:${col}">${v.e}/${v.m}</div></div>`;});
  document.getElementById('resByNotion').innerHTML=nH||'<p style="color:var(--ink4);font-style:italic">Aucune question validÃ©e.</p>';

  let eH='',ec=0;
  exerciseData.forEach((ex,i)=>{ex.questions.forEach((q,j)=>{const qId=`ex${i+1}q${j+1}`;const sc=scores[qId]||0;if(sc<q.pts*.85&&feedbacks[qId]){ec++;const col=sc===0?'var(--red)':'var(--gold)';eH+=`<div class="err-card"><div class="err-q">${q.text.substring(0,90)}â€¦</div><div class="err-sc" style="color:${col}">${sc}/${q.pts} pts</div><div class="err-fb">${feedbacks[qId]}</div></div>`;}});});
  document.getElementById('resErrors').innerHTML=ec?eH:'<p style="color:var(--green);font-weight:600">ğŸ‰ Excellente performance !</p>';

  setTimeout(()=>document.querySelectorAll('.bdown-pct-fill').forEach(el=>{const w=el.style.width;el.style.width='0';setTimeout(()=>el.style.width=w,50);}),100);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STORAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function saveSession(scaled){
  const s={date:new Date().toLocaleDateString('fr-FR'),ts:Date.now(),score:scaled,notions:[...new Set(exerciseData.map(e=>e.notion))],duration:selMin,errors:[]};
  exerciseData.forEach((ex,i)=>{ex.questions.forEach((q,j)=>{const qId=`ex${i+1}q${j+1}`;const sc=scores[qId]||0;if(sc<q.pts*.85)s.errors.push({notion:ex.notion,pts:sc,maxPts:q.pts,fb:feedbacks[qId]||'',qText:q.text.substring(0,80)});});});
  try{
    let sessions=[];
    try{const d=await window.storage.get('sessions');if(d)sessions=JSON.parse(d.value);}catch(e){}
    sessions.push(s);
    if(sessions.length>100)sessions.splice(0,sessions.length-100);
    await window.storage.set('sessions',JSON.stringify(sessions));
  }catch(e){}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function renderDash(){
  let sessions=[];
  try{const d=await window.storage.get('sessions');if(d)sessions=JSON.parse(d.value);}catch(e){}

  if(!sessions.length){
    document.getElementById('dashStats').innerHTML='';
    document.getElementById('chartSection').style.display='none';
    document.getElementById('dashGrid').innerHTML=`<div class="empty-state" style="grid-column:1/-1"><span class="ei">ğŸ“Š</span><p>Aucun brevet blanc effectuÃ© pour l'instant.<br>Lancez votre premier entraÃ®nement pour voir vos statistiques !</p><button class="btn-navy" style="margin:20px auto 0;font-size:14px;padding:11px 24px" onclick="go('screen-setup','navSetup')">Commencer â†’</button></div>`;
    return;
  }

  const avg=Math.round(sessions.reduce((s,x)=>s+x.score,0)/sessions.length);
  const best=Math.max(...sessions.map(x=>x.score));
  const last=sessions[sessions.length-1].score;
  const trend=sessions.length>1?last-sessions[sessions.length-2].score:0;
  const trendStr=trend>0?`â†‘ +${trend}`:trend<0?`â†“ ${trend}`:'â†’ stable';
  const trendCol=trend>0?'var(--green)':trend<0?'var(--red)':'var(--ink4)';
  const totalErrs=sessions.reduce((s,x)=>s+x.errors.length,0);

  document.getElementById('dashStats').innerHTML=`
    <div class="stat-card"><div class="sc-val navy">${sessions.length}</div><div class="sc-lbl">Brevets blancs</div></div>
    <div class="stat-card"><div class="sc-val green">${avg}<span style="font-size:16px">/100</span></div><div class="sc-lbl">Moyenne gÃ©nÃ©rale</div></div>
    <div class="stat-card"><div class="sc-val gold">${best}<span style="font-size:16px">/100</span></div><div class="sc-lbl">Meilleur score</div></div>
    <div class="stat-card"><div class="sc-val" style="font-size:20px;color:${trendCol}">${trendStr}</div><div class="sc-lbl">Tendance</div></div>
    <div class="stat-card"><div class="sc-val red">${totalErrs}</div><div class="sc-lbl">Erreurs totales</div></div>`;

  if(sessions.length>=2){
    document.getElementById('chartSection').style.display='block';
    const recent=sessions.slice(-12);
    document.getElementById('chartWrap').innerHTML=recent.map(s=>{
      const h=Math.max(4,Math.round(s.score));
      const col=s.score>=70?'var(--green)':s.score>=50?'var(--gold)':'var(--red)';
      return `<div class="chart-col"><div class="chart-val">${s.score}</div><div class="chart-bar" style="height:${h}px;background:${col};opacity:.75" title="${s.date}: ${s.score}/100"></div><div class="chart-lbl">${s.date.split('/').slice(0,2).join('/')}</div></div>`;
    }).join('');
  } else {
    document.getElementById('chartSection').style.display='none';
  }

  let hH=`<table class="hist-table"><thead><tr><th>Date</th><th>Notions</th><th>Score</th><th>DurÃ©e</th></tr></thead><tbody>`;
  [...sessions].reverse().slice(0,20).forEach(s=>{
    const chip=s.score>=70?'a':s.score>=50?'b':'c';
    hH+=`<tr><td>${s.date}</td><td style="font-size:11px;color:var(--ink4);max-width:140px">${(s.notions||[]).join(', ').substring(0,36)}</td><td><span class="score-chip ${chip}">${s.score}/100</span></td><td style="font-size:12px;color:var(--ink4)">${s.duration}m</td></tr>`;
  });
  hH+='</tbody></table>';

  const nErrs={};
  sessions.forEach(s=>{s.errors.forEach(e=>{if(!nErrs[e.notion])nErrs[e.notion]=0;nErrs[e.notion]++;});});
  const sorted=Object.entries(nErrs).sort((a,b)=>b[1]-a[1]);
  let wH='';
  if(!sorted.length){wH='<p style="color:var(--green);font-weight:600">Aucun point faible identifiÃ© ğŸ‰</p>';}
  else{const mx=Math.max(...sorted.map(([,v])=>v),1);sorted.slice(0,8).forEach(([n,v])=>{const pct=Math.round(v/mx*100);const col=pct>60?'var(--red)':pct>30?'var(--gold)':'var(--green)';wH+=`<div class="nb-row"><div class="nb-label">${n}</div><div class="nb-track"><div class="nb-fill" style="width:${pct}%;background:${col}"></div></div><div class="nb-count">${v}</div></div>`;});}

  const lastErrs=sessions[sessions.length-1]?.errors||[];
  let errH=lastErrs.length?lastErrs.slice(0,3).map(e=>`<div class="err-card" style="margin-bottom:8px"><div class="err-q">${e.qText||''}â€¦</div><div class="err-sc" style="color:var(--red)">${e.pts}/${e.maxPts} pts â€” ${e.notion}</div><div class="err-fb">${e.fb}</div></div>`).join(''):'<p style="font-style:italic;color:var(--ink4);font-size:13px">Aucune erreur sur le dernier brevet !</p>';

  document.getElementById('dashGrid').innerHTML=`
    <div>
      <div class="rule">Historique complet</div>
      ${hH}
    </div>
    <div>
      <div class="rule">Points faibles par notion</div>
      <div style="margin-bottom:28px">${wH}</div>
      <div class="rule">DerniÃ¨res erreurs</div>
      <div>${errH}</div>
    </div>`;

  setTimeout(()=>document.querySelectorAll('.nb-fill').forEach(el=>{const w=el.style.width;el.style.width='0';setTimeout(()=>el.style.width=w,50);}),100);
}
</script>
</body>
</html>
