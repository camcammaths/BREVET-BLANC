<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brevet Blanc Maths ‚Äì Exercices Corrig√©s en Ligne | 3√®me</title>
<meta name="description" content="Pr√©parez votre brevet blanc de maths avec des exercices interactifs corrig√©s par IA. Simulateur d'examen chronom√©tr√©, corrig√©s d√©taill√©s, suivi de progression. Gratuit pour les √©l√®ves de 3√®me.">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Source+Serif+4:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Source+Code+Pro:wght@400;500&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{background:#fff;color:#111;font-family:'Source Serif 4',Georgia,serif;font-size:16px;line-height:1.78;min-height:100vh}
.screen{display:none;min-height:100vh;animation:pgIn .22s ease}
.screen.active{display:block}
@keyframes pgIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

/* ‚îÄ‚îÄ Design tokens ‚îÄ‚îÄ */
:root {
  --ink: #111;
  --ink2: #333;
  --ink3: #666;
  --ink4: #999;
  --ink5: #bbb;
  --rule: #e0dbd3;
  --rule2: #ece8e2;
  --bg: #fff;
  --bg2: #f7f5f1;
  --bg3: #f0ede8;
  --blue: #1a3264;
  --blue2: rgba(26,50,100,.06);
  --blue3: rgba(26,50,100,.12);
  --green: #1d6b3a;
  --green2: rgba(29,107,58,.08);
  --amber: #a06c00;
  --amber2: rgba(160,108,0,.1);
  --red: #c03928;
  --red2: rgba(192,57,40,.08);
  /* Legacy aliases for JS/existing code */
  --cream: #f7f5f1;
  --paper2: #f0ede8;
  --navy: #1a3264;
  --navy2: rgba(26,50,100,.06);
  --navy3: rgba(26,50,100,.16);
  --border: #e0dbd3;
  --border2: #ece8e2;
  --gold: #a06c00;
  --gold2: rgba(160,108,0,.1);
  --shadow: rgba(17,17,17,.08);
  --shadow2: rgba(17,17,17,.04);
}

/* ‚îÄ‚îÄ Global nav ‚îÄ‚îÄ */
.gnav{
  position:sticky;top:0;z-index:300;
  background:#fff;border-bottom:1px solid var(--rule);
  display:flex;align-items:center;height:52px;
  padding:0 48px;gap:0;
}
.gnav-logo{
  font-family:'Playfair Display',serif;
  font-size:17px;font-weight:900;
  color:var(--ink);letter-spacing:-.5px;
  cursor:pointer;margin-right:32px;flex-shrink:0;white-space:nowrap;
}
.gnav-logo em{color:var(--blue);font-style:italic}
.gnav-links{display:flex;align-items:center;flex:1}
.gnav-link{
  display:flex;align-items:center;gap:6px;height:52px;
  padding:0 14px;font-family:'Source Serif 4',serif;
  font-size:12px;font-weight:600;color:var(--ink4);letter-spacing:.3px;
  background:none;border:none;border-bottom:2px solid transparent;
  cursor:pointer;transition:color .12s;white-space:nowrap;text-transform:uppercase;
}
.gnav-link:hover{color:var(--ink)}
.gnav-link.active{color:var(--ink);border-bottom-color:var(--blue)}

/* ‚îÄ‚îÄ Utility ‚îÄ‚îÄ */
.rule{display:flex;align-items:center;gap:12px;font-size:10px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--ink5);margin-bottom:16px}
.rule::after{content:'';flex:1;height:1px;background:var(--rule)}


/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SCREEN 0 ‚Äî LANDING
   Direction: acad√©mique, √©pur√©,
   typographie serif, blanc pur.
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

/* Nav override pour landing */
#screen-landing ~ .gnav, body:has(#screen-landing.active) .gnav {
  background:#fff; border-bottom:1px solid #ddd;
}

/* ‚îÄ‚îÄ Tokens ‚îÄ‚îÄ */
:root {
  --l-ink: #111;
  --l-ink2: #444;
  --l-ink3: #888;
  --l-ink4: #bbb;
  --l-blue: #1a3264;
  --l-bg: #fff;
  --l-bg2: #f7f5f1;
  --l-rule: #e2ddd7;
  --l-max: 920px;
}

/* ‚îÄ‚îÄ Layout atoms ‚îÄ‚îÄ */
.lp { background: var(--l-bg); color: var(--l-ink); }
.lp-wrap { max-width: var(--l-max); margin: 0 auto; padding: 0 48px; }
.lp-rule { border: none; border-top: 1px solid var(--l-rule); margin: 0; }

/* ‚îÄ‚îÄ Header strip ‚îÄ‚îÄ */
.lp-header {
  border-bottom: 2px solid var(--l-ink);
  padding: 14px 0;
}
.lp-header-inner {
  display: flex; align-items: baseline; justify-content: space-between;
}
.lp-header-title {
  font-family: 'Playfair Display', serif;
  font-size: 13px; font-weight: 700; letter-spacing: 1px;
  text-transform: uppercase; color: var(--l-ink);
}
.lp-header-sub {
  font-size: 11px; color: var(--l-ink3); letter-spacing: .5px;
  font-family: 'Source Serif 4', serif;
}

/* ‚îÄ‚îÄ Hero ‚îÄ‚îÄ */
.lp-hero { padding: 80px 0 72px; }
.lp-hero-inner {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 0; align-items: start;
  border-top: 1px solid var(--l-rule);
}
.lp-hero-left { padding: 48px 48px 48px 0; border-right: 1px solid var(--l-rule); }
.lp-hero-right { padding: 48px 0 48px 48px; }

.lp-kicker {
  font-size: 10px; letter-spacing: 3.5px; text-transform: uppercase;
  color: var(--l-ink3); font-family: 'Source Serif 4', serif;
  font-weight: 600; margin-bottom: 22px; display: block;
}
.lp-h1 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(48px, 6.5vw, 88px);
  font-weight: 900; line-height: .92;
  letter-spacing: -3px; color: var(--l-ink); margin: 0;
}
.lp-h1 em { font-style: italic; color: var(--l-blue); }
.lp-tagline {
  margin-top: 28px;
  font-size: 15px; color: var(--l-ink2); line-height: 1.72;
  font-weight: 300; max-width: 400px;
}
.lp-cta-row { margin-top: 36px; display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
.lp-btn {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 12px 26px; font-family: 'Source Serif 4', serif;
  font-size: 13px; font-weight: 600; letter-spacing: .3px;
  border: none; cursor: pointer; transition: background .15s, color .15s;
}
.lp-btn-dark { background: var(--l-ink); color: #fff; }
.lp-btn-dark:hover { background: var(--l-blue); }
.lp-btn-outline {
  background: none; color: var(--l-ink3); padding: 0;
  font-size: 13px; text-decoration: underline; text-decoration-color: var(--l-rule);
}
.lp-btn-outline:hover { color: var(--l-ink); text-decoration-color: var(--l-ink); }

/* Hero right ‚Äî chiffres cl√©s */
.lp-figures { display: flex; flex-direction: column; gap: 0; }
.lp-fig {
  padding: 24px 0; border-bottom: 1px solid var(--l-rule);
  display: grid; grid-template-columns: 80px 1fr; align-items: baseline; gap: 16px;
}
.lp-fig:first-child { border-top: 1px solid var(--l-rule); }
.lp-fig-n {
  font-family: 'Playfair Display', serif;
  font-size: 42px; font-weight: 900; color: var(--l-ink);
  line-height: 1; letter-spacing: -2px;
}
.lp-fig-label { font-size: 13px; color: var(--l-ink3); line-height: 1.45; }

/* ‚îÄ‚îÄ Section heading ‚îÄ‚îÄ */
.lp-section { padding: 72px 0; }
.lp-section-bg { background: var(--l-bg2); border-top: 1px solid var(--l-rule); border-bottom: 1px solid var(--l-rule); }
.lp-section-dark { background: var(--l-ink); }
.lp-section-head { margin-bottom: 48px; }
.lp-overline {
  display: block; font-size: 10px; letter-spacing: 4px; text-transform: uppercase;
  color: var(--l-ink4); margin-bottom: 10px;
  font-family: 'Source Serif 4', serif; font-weight: 600;
}
.lp-overline-dark { color: rgba(255,255,255,.3); }
.lp-h2 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(32px, 4.5vw, 52px); font-weight: 900;
  letter-spacing: -1.5px; line-height: .97; margin: 0;
  color: var(--l-ink);
}
.lp-h2 em { font-style: italic; color: var(--l-blue); }
.lp-h2-dark { color: #fff; }
.lp-h2-dark em { color: #9ab4f0; }

/* ‚îÄ‚îÄ Features ‚Äî grille tableau ‚îÄ‚îÄ */
.lp-feat-grid {
  display: grid; grid-template-columns: repeat(3, 1fr);
  border: 1px solid var(--l-rule);
}
.lp-feat-cell {
  padding: 28px 24px; border-right: 1px solid var(--l-rule);
}
.lp-feat-cell:last-child, .lp-feat-cell:nth-child(3) { border-right: none; }
.lp-feat-cell:nth-child(n+4) { border-top: 1px solid var(--l-rule); }
.lp-feat-idx {
  font-family: 'Playfair Display', serif; font-size: 11px;
  font-weight: 700; color: var(--l-ink4); letter-spacing: 2px;
  margin-bottom: 14px; display: block;
}
.lp-feat-cell h3 {
  font-family: 'Playfair Display', serif; font-size: 16px;
  font-weight: 700; color: var(--l-ink); margin: 0 0 8px;
}
.lp-feat-cell p { font-size: 13px; color: var(--l-ink3); line-height: 1.65; margin: 0; }

/* ‚îÄ‚îÄ Steps ‚îÄ‚îÄ */
.lp-steps { display: flex; flex-direction: column; }
.lp-step {
  display: grid; grid-template-columns: 52px 1fr;
  gap: 24px; padding: 28px 0;
  border-top: 1px solid var(--l-rule); align-items: baseline;
}
.lp-step-n {
  font-family: 'Playfair Display', serif; font-size: 13px;
  font-weight: 900; color: var(--l-ink4); letter-spacing: 1px;
}
.lp-step h3 {
  font-family: 'Playfair Display', serif; font-size: 18px;
  font-weight: 700; color: var(--l-ink); margin: 0 0 6px;
}
.lp-step p { font-size: 14px; color: var(--l-ink3); line-height: 1.65; margin: 0; }

/* ‚îÄ‚îÄ Chapters pills ‚îÄ‚îÄ */
.lp-pills { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 32px; }
.lp-pill {
  padding: 6px 14px; border: 1px solid var(--l-rule);
  font-size: 12px; font-weight: 600; color: var(--l-ink2);
  font-family: 'Source Serif 4', serif; letter-spacing: .2px;
  background: #fff; transition: border-color .15s, color .15s;
}
.lp-pill:hover { border-color: var(--l-ink); color: var(--l-ink); }

/* ‚îÄ‚îÄ Pour qui ‚îÄ‚îÄ */
.lp-who-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; margin-top: 8px; }
.lp-who-item h3 {
  font-family: 'Playfair Display', serif; font-size: 17px;
  font-weight: 700; color: var(--l-ink); margin: 0 0 12px;
  padding-bottom: 12px; border-bottom: 1px solid var(--l-ink);
}
.lp-who-item p { font-size: 13px; color: var(--l-ink3); line-height: 1.65; margin: 0; }

/* ‚îÄ‚îÄ FAQ ‚îÄ‚îÄ */
.lp-faq-list { max-width: 680px; }
.lp-faq-item { border-top: 1px solid var(--l-rule); }
.lp-faq-item:last-child { border-bottom: 1px solid var(--l-rule); }
.lp-faq-q {
  display: flex; align-items: center; justify-content: space-between;
  padding: 18px 0; cursor: pointer;
  font-size: 15px; font-weight: 600; color: var(--l-ink);
  font-family: 'Source Serif 4', serif;
  gap: 16px; transition: color .15s; background: none; border: none; width: 100%; text-align: left;
}
.lp-faq-q:hover { color: var(--l-blue); }
.lp-faq-icon { font-size: 18px; color: var(--l-ink4); line-height: 1; transition: transform .2s; flex-shrink: 0; }
.lp-faq-item.open .lp-faq-icon { transform: rotate(45deg); }
.lp-faq-a { display: none; padding: 0 0 20px; font-size: 14px; color: var(--l-ink3); line-height: 1.72; }
.lp-faq-item.open .lp-faq-a { display: block; }

/* ‚îÄ‚îÄ CTA final (dark) ‚îÄ‚îÄ */
.lp-cta-strip {
  display: grid; grid-template-columns: 1fr auto;
  gap: 48px; align-items: center; padding: 72px 0;
}
.lp-cta-strip h2 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(28px, 3.5vw, 46px); font-weight: 900;
  color: #fff; letter-spacing: -1.5px; line-height: .97; margin: 0;
}
.lp-cta-strip h2 em { font-style: italic; color: #9ab4f0; }
.lp-cta-strip p { font-size: 14px; color: rgba(255,255,255,.4); margin: 12px 0 0; }
.lp-cta-actions { display: flex; flex-direction: column; gap: 10px; align-items: flex-end; flex-shrink: 0; }
.lp-btn-light { background: #fff; color: var(--l-ink); }
.lp-btn-light:hover { background: #f0ede8; }
.lp-btn-ghost-white {
  display: inline-flex; align-items: center;
  background: none; border: none; cursor: pointer;
  font-family: 'Source Serif 4', serif; font-size: 13px;
  color: rgba(255,255,255,.35); padding: 0;
  text-decoration: underline; text-decoration-color: rgba(255,255,255,.15);
  transition: color .15s;
}
.lp-btn-ghost-white:hover { color: rgba(255,255,255,.7); }

/* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
.lp-footer {
  background: #fff; border-top: 2px solid var(--l-ink);
  padding: 24px 0;
}
.lp-footer-inner {
  display: flex; align-items: center; justify-content: space-between;
  flex-wrap: wrap; gap: 12px;
}
.lp-footer-brand {
  font-family: 'Playfair Display', serif;
  font-size: 15px; font-weight: 900;
  color: var(--l-ink); letter-spacing: -.4px;
}
.lp-footer-brand em { font-style: italic; color: var(--l-blue); }
.lp-footer-meta { font-size: 11px; color: var(--l-ink4); line-height: 1.5; }

/* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
@media (max-width: 760px) {
  .lp-wrap { padding: 0 20px; }
  .lp-hero-inner { grid-template-columns: 1fr; }
  .lp-hero-left { padding: 32px 0; border-right: none; border-bottom: 1px solid var(--l-rule); }
  .lp-hero-right { padding: 32px 0; }
  .lp-h1 { letter-spacing: -2px; }
  .lp-fig { grid-template-columns: 56px 1fr; }
  .lp-fig-n { font-size: 30px; }
  .lp-feat-grid { grid-template-columns: 1fr; }
  .lp-feat-cell { border-right: none !important; border-top: 1px solid var(--l-rule) !important; }
  .lp-feat-cell:first-child { border-top: none !important; }
  .lp-who-grid { grid-template-columns: 1fr; gap: 28px; }
  .lp-cta-strip { grid-template-columns: 1fr; gap: 28px; }
  .lp-cta-actions { align-items: flex-start; }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SCREEN 1 ‚Äî SETUP
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
#screen-setup{background:var(--bg)}

/* Header band */
.setup-header{
  border-bottom:1px solid var(--rule);
  padding:0 48px;
  display:flex;align-items:center;justify-content:space-between;
  height:48px;background:var(--bg);
}
.setup-header-title{
  font-family:'Playfair Display',serif;
  font-size:13px;font-weight:700;
  letter-spacing:1px;text-transform:uppercase;color:var(--ink);
}
.setup-header-sub{font-size:11px;color:var(--ink4);font-family:'Source Serif 4',serif}

/* Hero zone */
.setup-hero{background:var(--ink);border-bottom:none;padding:0}
.setup-hero-inner{max-width:920px;margin:0 auto;display:grid;grid-template-columns:1fr auto;gap:32px;align-items:start;padding:48px 48px 40px}
.setup-eyebrow{font-size:10px;letter-spacing:4px;text-transform:uppercase;color:rgba(255,255,255,.3);font-weight:600;margin-bottom:14px;display:block;font-family:'Source Serif 4',serif}
.setup-h1{font-family:'Playfair Display',serif;font-size:clamp(34px,5vw,54px);font-weight:900;line-height:.95;letter-spacing:-2px;color:#fff;margin:0}
.setup-h1 em{font-style:italic;color:#9ab4f0}
.setup-hero-meta{margin-top:12px;font-size:13px;color:rgba(255,255,255,.3);display:flex;gap:16px;flex-wrap:wrap}
.setup-hero-meta span::before{content:'‚Äî';margin-right:7px;color:var(--rule)}

/* Stats aside */
.setup-stats{display:flex;gap:1px;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.09);align-self:start}
.setup-stat{padding:16px 22px;text-align:center;border-right:1px solid rgba(255,255,255,.07)}
.setup-stat:last-child{border-right:none}
.setup-stat-n{font-family:'Playfair Display',serif;font-size:28px;font-weight:900;color:#fff;line-height:1;letter-spacing:-1px;display:block}
.setup-stat-l{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,.3);margin-top:3px;display:block}

/* Config body */
.setup-body{max-width:920px;margin:0 auto;padding:40px 48px 72px}

.setup-block{margin-bottom:40px}
.setup-block-title{
  font-family:'Playfair Display',serif;
  font-size:17px;font-weight:700;color:var(--ink);
  padding-bottom:14px;margin-bottom:20px;
  border-bottom:1px solid var(--rule);
  display:flex;align-items:baseline;gap:10px;
}
.setup-block-title::before{content:'‚Äî';color:var(--blue)}

/* Duration chips */
.timer-row{display:flex;gap:8px;flex-wrap:wrap}
.timer-chip{
  padding:10px 22px;font-family:'Source Serif 4',serif;
  font-size:14px;font-weight:600;color:var(--ink3);
  background:var(--bg);border:1px solid var(--rule);
  cursor:pointer;transition:all .12s;
}
.timer-chip:hover{border-color:var(--ink);color:var(--ink)}
.timer-chip.sel{background:var(--ink);border-color:var(--ink);color:#fff}

/* Chapter chips */
.chap-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:1px;background:var(--rule);border:1px solid var(--rule)}
.chap-chip{
  padding:14px 16px;
  background:var(--bg);
  cursor:pointer;transition:background .12s;
  display:flex;align-items:flex-start;gap:12px;
}
.chap-chip:hover{background:var(--bg2)}
.chap-chip.sel{background:var(--blue2)}
.chk{
  width:14px;height:14px;border:1.5px solid var(--rule);
  flex-shrink:0;margin-top:4px;
  display:flex;align-items:center;justify-content:center;
  font-size:9px;font-weight:700;transition:all .12s;
}
.chap-chip.sel .chk{background:var(--blue);border-color:var(--blue);color:#fff}
.ch-name{font-size:13px;font-weight:600;color:var(--ink);line-height:1.3}
.ch-sub{font-size:11px;color:var(--ink4);font-style:italic;margin-top:2px}

.setup-cta{margin-top:36px;display:flex;align-items:center;gap:16px;flex-wrap:wrap;padding-top:28px;border-top:1px solid var(--rule)}


/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SCREEN 2 ‚Äî EXAM
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
#screen-exam{background:var(--bg)}

/* Top bar */
.exam-top{
  background:var(--ink);
  border-bottom:none;
  position:sticky;top:52px;z-index:200;
}
.exam-top-inner{
  max-width:960px;margin:0 auto;
  padding:10px 48px;
  display:flex;align-items:center;gap:16px;flex-wrap:wrap;
}
.exam-title-wrap h2{
  font-family:'Playfair Display',serif;
  font-size:16px;font-weight:700;color:#fff;
}
.exam-title-wrap .sub{
  font-size:10px;letter-spacing:2px;text-transform:uppercase;
  color:rgba(255,255,255,.3);margin-top:1px;
}
.timer-block{margin-left:auto;display:flex;align-items:center;gap:20px}
.timer-face{
  font-family:'Source Code Pro',monospace;
  font-size:20px;font-weight:500;color:#fff;
  letter-spacing:3px;line-height:1;
}
.timer-face.warn{color:#f59e0b}
.timer-face.danger{color:#f87171;animation:blink .8s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.35}}
.live-sc-box{text-align:right}
.live-sc-num{
  font-family:'Playfair Display',serif;
  font-size:20px;font-weight:900;color:#fff;line-height:1;
}
.live-sc-lbl{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,.3)}
.btn-end{
  padding:7px 14px;font-family:'Source Serif 4',serif;font-size:11px;
  font-weight:600;background:none;
  border:1px solid rgba(255,255,255,.15);
  color:rgba(255,255,255,.45);cursor:pointer;
  transition:all .12s;letter-spacing:.3px;
}
.btn-end:hover{background:var(--red);border-color:var(--red);color:#fff}

/* Pills nav */
.pills-bar{background:var(--bg2);border-bottom:1px solid var(--rule)}
.pills-bar-inner{
  max-width:960px;margin:0 auto;
  padding:8px 48px;
  display:flex;align-items:center;gap:6px;overflow-x:auto;
}
.pill{
  padding:4px 12px;font-family:'Source Serif 4',serif;
  font-size:11px;font-weight:600;
  background:transparent;
  border:1px solid var(--rule);color:var(--ink4);
  cursor:pointer;transition:all .12s;white-space:nowrap;
}
.pill:hover{border-color:var(--ink);color:var(--ink)}
.pill.answered{border-color:var(--blue);color:var(--blue);background:var(--blue2)}
.pill.corrected{border-color:var(--green);color:#fff;background:var(--green)}

/* Main content */
.exam-main{max-width:960px;margin:0 auto;padding:36px 48px 100px}

/* Loading */
.loading-box{text-align:center;padding:80px 20px}
.spinner{
  width:28px;height:28px;
  border:2px solid var(--rule);border-top-color:var(--ink);
  border-radius:50%;animation:spin .7s linear infinite;
  margin:0 auto 16px;
}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-box p{font-size:13px;font-style:italic;color:var(--ink4)}

/* Exercise card */
.exercise{
  background:var(--bg);
  border:1px solid var(--rule);
  border-left:3px solid var(--blue);
  margin-bottom:32px;overflow:hidden;
  scroll-margin-top:120px;
}
.ex-head{
  padding:20px 28px 18px;
  border-bottom:1px solid var(--rule);
  background:var(--bg2);
  display:flex;align-items:flex-start;
  justify-content:space-between;gap:16px;
}
.ex-eyebrow{
  font-size:10px;letter-spacing:3px;text-transform:uppercase;
  color:var(--blue);font-weight:600;margin-bottom:5px;
}
.ex-title{
  font-family:'Playfair Display',serif;
  font-size:20px;font-weight:700;color:var(--ink);line-height:1.2;
}
.ex-notion{font-size:13px;font-style:italic;color:var(--ink4);margin-top:3px}
.ex-pts{
  flex-shrink:0;padding:10px 16px;
  background:var(--bg);border:1px solid var(--rule);
  text-align:center;
}
.ex-pts .n{
  font-family:'Playfair Display',serif;
  font-size:28px;font-weight:900;color:var(--ink);line-height:1;
}
.ex-pts .l{
  font-size:9px;letter-spacing:2px;text-transform:uppercase;
  color:var(--ink4);margin-top:2px;
}
.ex-body{padding:22px 28px 28px}
.ex-body>p{margin-bottom:12px;color:var(--ink2);font-size:15px}

/* Table */
table{width:100%;border-collapse:collapse;margin:14px 0;font-size:14px}
th{
  background:var(--bg2);color:var(--ink);
  padding:9px 14px;text-align:left;
  font-size:10px;font-weight:600;letter-spacing:2px;text-transform:uppercase;
  border:1px solid var(--rule);
}
td{padding:9px 14px;border:1px solid var(--rule2);color:var(--ink2)}
tr:nth-child(even) td{background:var(--bg2)}

/* Question */
.question{
  margin:16px 0;
  border:1px solid var(--rule);
  border-left:2px solid var(--blue);
  background:var(--bg);overflow:hidden;
}
.q-head{
  padding:10px 16px;border-bottom:1px solid var(--rule2);
  display:flex;align-items:center;gap:10px;
  background:var(--bg2);
}
.q-num{font-size:12px;font-weight:700;color:var(--blue);font-family:'Source Serif 4',serif;letter-spacing:.5px}
.q-pts-badge{
  display:inline-flex;align-items:center;
  padding:2px 9px;background:var(--green);
  color:#fff;font-size:11px;font-weight:600;
}
.q-text{padding:13px 16px 14px;font-size:15px;color:var(--ink);line-height:1.72}

/* Answer zone */
.answer-zone{
  padding:12px 16px 14px;
  background:var(--bg2);
  border-top:1px dashed var(--rule);
}
.answer-lbl{
  font-size:10px;letter-spacing:2.5px;text-transform:uppercase;
  color:var(--ink5);margin-bottom:7px;
  display:flex;align-items:center;gap:6px;
}
.answer-lbl::before{content:'‚Äî';color:var(--blue)}
.answer-ta{
  width:100%;min-height:80px;
  padding:10px 12px;
  font-family:'Source Serif 4',serif;font-size:15px;
  line-height:1.65;color:var(--ink);
  background:var(--bg);
  border:1px solid var(--rule);
  resize:vertical;outline:none;
  transition:border-color .12s;
}
.answer-ta::placeholder{color:var(--ink5);font-style:italic}
.answer-ta:focus{border-color:var(--blue)}
.answer-ta.has-content{border-color:rgba(26,50,100,.3)}
.answer-ta.locked{
  border-color:var(--green)!important;
  background:var(--green2)!important;
  color:var(--ink2);resize:none;cursor:default;
}

/* Val bar */
.val-bar{
  display:flex;align-items:center;gap:10px;flex-wrap:wrap;
  padding:8px 12px;
  background:var(--bg);
  border:1px solid var(--rule);border-top:none;
}
.btn-val{
  display:inline-flex;align-items:center;gap:6px;
  padding:7px 16px;
  font-family:'Source Serif 4',serif;font-size:12px;font-weight:600;
  background:var(--blue);color:#fff;border:none;cursor:pointer;
  transition:background .12s;
}
.btn-val:hover{background:#0f1f44}
.btn-val:disabled{background:var(--rule);color:var(--ink4);cursor:not-allowed}
.btn-edit{
  display:none;align-items:center;gap:5px;
  padding:6px 12px;
  font-family:'Source Serif 4',serif;font-size:12px;
  background:none;border:1px solid var(--rule);color:var(--ink4);
  cursor:pointer;transition:all .12s;
}
.btn-edit:hover{border-color:var(--ink);color:var(--ink)}
.val-tag{display:none;align-items:center;gap:5px;font-size:12px;color:var(--green);font-weight:600}
.val-tag.show{display:flex}
.val-hint{font-size:11px;font-style:italic;color:var(--ink5);margin-left:auto}

/* AI result */
.ai-result{display:none;margin-top:10px;border:1px solid var(--rule);animation:fadeUp .25s ease;overflow:hidden}
.ai-result.visible{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}
.ai-rh{
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 14px;gap:10px;
}
.ai-rh.correct-bg{background:var(--green2);border-bottom:1px solid rgba(29,107,58,.15)}
.ai-rh.partial-bg{background:var(--amber2);border-bottom:1px solid rgba(160,108,0,.15)}
.ai-rh.wrong-bg{background:var(--red2);border-bottom:1px solid rgba(192,57,40,.12)}
.ai-rh.loading-bg{background:var(--bg2);border-bottom:1px solid var(--rule)}
.ai-rl{display:flex;align-items:center;gap:8px;font-size:13px;font-weight:600}
.ai-sc{font-family:'Playfair Display',serif;font-size:22px;font-weight:900;line-height:1;white-space:nowrap}
.ai-sc.correct-col{color:var(--green)}
.ai-sc.partial-col{color:var(--amber)}
.ai-sc.wrong-col{color:var(--red)}
.ai-sc.loading-col{color:var(--ink4);font-size:14px;font-family:'Source Serif 4',serif}
.ai-fb{padding:11px 14px;font-size:14px;line-height:1.65;color:var(--ink2);background:var(--bg);font-style:italic}
.mini-sp{
  display:inline-block;width:12px;height:12px;
  border:2px solid var(--rule);border-top-color:var(--blue);
  border-radius:50%;animation:spin .7s linear infinite;vertical-align:middle;
}

/* Correction */
.corr-toggle{
  margin-top:20px;padding-top:16px;
  border-top:1px dashed var(--rule);
  display:flex;align-items:center;gap:12px;flex-wrap:wrap;
}
.btn-see{
  display:inline-flex;align-items:center;gap:7px;
  padding:7px 18px;
  font-family:'Source Serif 4',serif;font-size:12px;font-weight:600;
  background:none;
  border:1px solid var(--amber);color:var(--amber);
  cursor:pointer;transition:all .12s;
}
.btn-see:hover:not(:disabled){background:var(--amber2)}
.btn-see.active{background:var(--amber);color:#fff}
.btn-see:disabled{border-color:var(--rule);color:var(--ink4);cursor:not-allowed;opacity:.5}
.corr-hint{font-size:12px;font-style:italic;color:var(--ink5)}
.correction{
  display:none;margin-top:14px;
  padding:18px 20px;
  background:var(--amber2);
  border:1px solid rgba(160,108,0,.2);
}
.correction.open{display:block;animation:fadeUp .25s ease}
.corr-head{
  display:flex;align-items:center;gap:9px;
  padding-bottom:12px;margin-bottom:14px;
  border-bottom:1px solid rgba(160,108,0,.18);
}
.corr-badge{
  width:18px;height:18px;background:var(--amber);color:#fff;
  border-radius:50%;display:flex;align-items:center;
  justify-content:center;font-size:9px;font-weight:700;flex-shrink:0;
}
.corr-head span{font-size:10px;letter-spacing:2.5px;text-transform:uppercase;color:var(--amber);font-weight:600}
.correction p{margin-bottom:9px;font-size:14px;color:var(--ink2)}
.correction p:last-child{margin-bottom:0}
.corr-block{margin-bottom:14px;padding-bottom:12px;border-bottom:1px solid rgba(160,108,0,.12)}
.corr-block:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}
.corr-title{
  font-size:10px;letter-spacing:2px;text-transform:uppercase;
  color:var(--amber);font-weight:700;margin-bottom:8px;
  display:flex;align-items:center;gap:7px;
}
.corr-title::before{content:'¬ß';font-size:14px}

/* Footer */
.exam-footer{
  border-top:1px solid var(--rule);
  padding:20px 48px;
  display:flex;align-items:center;justify-content:space-between;
  flex-wrap:wrap;gap:16px;margin-top:8px;
}
.exam-footer p{font-size:13px;font-style:italic;color:var(--ink5)}
.footer-score{
  font-family:'Playfair Display',serif;
  font-size:48px;font-weight:900;color:var(--ink);line-height:1;
}
.footer-score sub{font-size:16px;font-weight:400;color:var(--ink4);vertical-align:middle}


/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SCREEN 3 ‚Äî RESULTS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
#screen-results{background:var(--bg)}

/* Score banner */
.res-banner{
  background:var(--ink);
  border-bottom:1px solid var(--rule);
}
.res-banner-inner{
  max-width:880px;margin:0 auto;
  padding:52px 48px 44px;
  display:grid;grid-template-columns:1fr auto;
  gap:32px;align-items:center;
}
.res-eyebrow{
  font-size:10px;letter-spacing:4px;text-transform:uppercase;
  color:rgba(255,255,255,.3);font-weight:600;margin-bottom:12px;display:block;
}
.res-score{
  font-family:'Playfair Display',serif;
  font-size:clamp(64px,10vw,96px);
  font-weight:900;line-height:.9;
  letter-spacing:-4px;color:#fff;
}
.res-score span{
  font-size:clamp(20px,3vw,30px);
  color:rgba(255,255,255,.25);font-weight:400;
}
.res-mention{
  font-size:15px;font-weight:600;color:rgba(255,255,255,.6);
  margin-top:14px;
}
.res-bar-wrap{
  margin-top:14px;height:3px;
  background:rgba(255,255,255,.1);overflow:hidden;max-width:400px;
}
.res-bar{height:100%;transition:width 1.2s ease}
.res-detail{
  display:flex;flex-direction:column;gap:12px;min-width:120px;
}
.res-stat{
  padding:14px 18px;
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.08);
  text-align:center;
}
.res-stat .v{
  font-family:'Playfair Display',serif;
  font-size:22px;font-weight:900;color:#fff;line-height:1;
}
.res-stat .l{
  font-size:9px;letter-spacing:2px;text-transform:uppercase;
  color:rgba(255,255,255,.3);margin-top:3px;
}

/* Body */
.res-body{
  max-width:880px;margin:0 auto;
  padding:40px 48px 72px;
  display:grid;grid-template-columns:1fr 1fr;gap:48px;
}
.bdown-row{
  display:flex;align-items:center;justify-content:space-between;
  padding:9px 0;border-bottom:1px solid var(--rule2);
}
.bdown-row:last-child{border-bottom:none}
.bdown-notion{font-size:13px;font-weight:600;color:var(--ink3)}
.bdown-pts{font-family:'Playfair Display',serif;font-size:17px;font-weight:700}
.bdown-pct{height:2px;background:var(--rule2);margin-top:3px;overflow:hidden}
.bdown-pct-fill{height:100%;transition:width .9s ease}

.err-card{
  padding:12px 16px;background:var(--bg);
  border:1px solid var(--rule);
  border-left:2px solid var(--red);
  margin-bottom:8px;
}
.err-q{font-size:13px;color:var(--ink2);margin-bottom:5px}
.err-sc{font-size:11px;font-weight:700;letter-spacing:.5px}
.err-fb{font-size:12px;font-style:italic;color:var(--ink4);margin-top:4px}

.res-cta{
  grid-column:1/-1;
  display:flex;gap:12px;flex-wrap:wrap;
  justify-content:flex-start;
  padding-top:16px;border-top:1px solid var(--rule);
}


/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SCREEN 4 ‚Äî DASHBOARD
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
#screen-dash{background:var(--bg)}

/* Header */
.dash-banner{
  background:var(--ink);
  border-bottom:1px solid var(--rule);
}
.dash-banner-inner{
  max-width:960px;margin:0 auto;
  padding:48px 48px 40px;
}
.dash-banner-inner .lp-overline{
  color:rgba(255,255,255,.3);
  display:block;font-size:10px;letter-spacing:4px;
  text-transform:uppercase;margin-bottom:10px;
  font-family:'Source Serif 4',serif;font-weight:600;
}
.dash-banner h2{
  font-family:'Playfair Display',serif;
  font-size:clamp(30px,4.5vw,52px);font-weight:900;
  color:#fff;letter-spacing:-2px;line-height:.95;margin:0;
}
.dash-banner h2 em{font-style:italic;color:#9ab4f0}
.dash-banner p{font-size:13px;color:rgba(255,255,255,.35);margin-top:10px}

/* Body */
.dash-body{max-width:960px;margin:0 auto;padding:36px 48px 72px}

/* Stat row */
.stat-row{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:1px;background:var(--rule);
  border:1px solid var(--rule);
  margin-bottom:40px;
}
.stat-card{
  padding:20px 20px;background:var(--bg);
}
.sc-val{
  font-family:'Playfair Display',serif;
  font-size:32px;font-weight:900;line-height:1;color:var(--ink);
}
.sc-val.navy,.sc-val.blue{color:var(--blue)}
.sc-val.green{color:var(--green)}
.sc-val.gold{color:var(--amber)}
.sc-val.red{color:var(--red)}
.sc-lbl{
  font-size:10px;letter-spacing:2.5px;text-transform:uppercase;
  color:var(--ink5);margin-top:6px;
}

/* Chart */
.chart-section{margin-bottom:40px}
.chart-section .rule{font-size:10px;letter-spacing:3px;color:var(--ink5);margin-bottom:12px}
.chart-wrap{
  height:100px;display:flex;align-items:flex-end;
  gap:5px;padding:0 0 0;
  border-bottom:1px solid var(--rule);
}
.chart-col{display:flex;flex-direction:column;align-items:center;gap:4px;flex:1;min-width:0}
.chart-bar{width:100%;border-radius:0;transition:height .5s ease;min-height:2px}
.chart-lbl{font-size:9px;color:var(--ink5);text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%}
.chart-val{font-size:10px;font-weight:600;color:var(--ink4);text-align:center}

/* Grid */
.dash-grid{display:grid;grid-template-columns:3fr 2fr;gap:40px}

/* History table */
.hist-table{width:100%;border-collapse:collapse}
.hist-table th{
  padding:8px 12px;text-align:left;
  font-size:10px;letter-spacing:2.5px;text-transform:uppercase;
  color:var(--ink5);border-bottom:2px solid var(--ink);font-weight:600;
}
.hist-table td{
  padding:10px 12px;border-bottom:1px solid var(--rule2);
  font-size:13px;color:var(--ink2);
}
.hist-table tr:hover td{background:var(--bg2)}

.score-chip{
  display:inline-block;padding:2px 9px;
  font-family:'Playfair Display',serif;
  font-size:13px;font-weight:700;
}
.score-chip.a{background:var(--green2);color:var(--green)}
.score-chip.b{background:var(--amber2);color:var(--amber)}
.score-chip.c{background:var(--red2);color:var(--red)}

/* Notions bars */
.nb-row{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.nb-label{font-size:12px;font-weight:600;color:var(--ink3);width:150px;flex-shrink:0}
.nb-track{flex:1;height:3px;background:var(--rule2);overflow:hidden}
.nb-fill{height:100%;transition:width .8s ease}
.nb-count{font-size:11px;font-weight:700;color:var(--ink4);width:24px;text-align:right}

.empty-state{text-align:center;padding:72px 20px;color:var(--ink5)}
.empty-state .ei{font-size:40px;display:block;margin-bottom:16px;opacity:.4}


/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   RESPONSIVE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
@media(max-width:760px){
  .gnav{padding:0 20px}.gnav-links{display:none}
  /* Landing */
  .lp-wrap{padding:0 20px}
  .lp-hero-inner{grid-template-columns:1fr}
  .lp-hero-left{padding:32px 0;border-right:none;border-bottom:1px solid var(--rule)}
  .lp-hero-right{padding:28px 0}
  .lp-h1{letter-spacing:-2px}
  .lp-fig{grid-template-columns:52px 1fr}
  .lp-fig-n{font-size:28px}
  .lp-feat-grid{grid-template-columns:1fr}
  .lp-feat-cell{border-right:none!important;border-top:1px solid var(--rule)!important}
  .lp-feat-cell:first-child{border-top:none!important}
  .lp-who-grid{grid-template-columns:1fr;gap:24px}
  .lp-cta-strip{grid-template-columns:1fr;gap:24px}
  .lp-cta-actions{align-items:flex-start}
  /* Setup */
  .setup-header{padding:0 20px}
  .setup-hero{padding:32px 20px}
  .setup-hero-inner{grid-template-columns:1fr}
  .setup-stats{border-left:none;padding-left:0;border-top:1px solid var(--rule);padding-top:24px;display:grid;grid-template-columns:repeat(3,1fr)}
  .setup-body{padding:28px 20px 60px}
  /* Exam */
  .exam-top-inner{padding:8px 20px}
  .pills-bar-inner{padding:6px 20px}
  .exam-main{padding:24px 20px 80px}
  .exam-footer{padding:16px 20px}
  /* Results */
  .res-banner-inner{grid-template-columns:1fr;padding:36px 20px}
  .res-body{grid-template-columns:1fr;padding:28px 20px 60px;gap:32px}
  /* Dashboard */
  .dash-banner-inner{padding:36px 20px}
  .dash-body{padding:24px 20px 60px}
  .dash-grid{grid-template-columns:1fr}
}

</style>

</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GLOBAL NAV ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<nav class="gnav" id="gnav">
  <div class="gnav-logo" onclick="go('screen-landing','navLanding')"><em>Brevet</em> Blanc Maths</div>
  <div class="gnav-links">
    <button class="gnav-link active" id="navLanding" onclick="go('screen-landing','navLanding')">Accueil</button>
    <button class="gnav-link" id="navSetup" onclick="go('screen-setup','navSetup')">üìù Commencer</button>
    <button class="gnav-link" id="navDash" onclick="go('screen-dash','navDash');renderDash()">üìä Tableau de bord</button>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  SCREEN 0 ‚Äî LANDING PAGE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen active" id="screen-landing">
<div class="lp">

  <!-- HEADER STRIP -->
  <div class="lp-header">
    <div class="lp-wrap">
      <div class="lp-header-inner">
        <span class="lp-header-title">Brevet Blanc Maths</span>
        <span class="lp-header-sub">Programme officiel 3√®me ¬∑ APMEP 2023‚Äì2024</span>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <div class="lp-hero">
    <div class="lp-wrap">
      <div class="lp-hero-inner">

        <div class="lp-hero-left">
          <span class="lp-kicker">Dipl√¥me National du Brevet ¬∑ Math√©matiques</span>
          <h1 class="lp-h1">
            Entra√Æne<br>
            ment<br>
            <em>intensif.</em>
          </h1>
          <p class="lp-tagline">Exercices officiels corrig√©s par IA, simulateur d'examen chronom√©tr√©, suivi de progression. Gratuit, sans inscription.</p>
          <div class="lp-cta-row">
            <button class="lp-btn lp-btn-dark" onclick="go('screen-setup','navSetup')">
              Commencer un brevet ‚Üí
            </button>
            <button class="lp-btn lp-btn-outline" onclick="go('screen-dash','navDash');renderDash()">
              Tableau de bord
            </button>
          </div>
        </div>

        <div class="lp-hero-right">
          <div class="lp-figures">
            <div class="lp-fig">
              <span class="lp-fig-n">48</span>
              <span class="lp-fig-label">exercices issus des vrais sujets DNB 2023‚Äì2024</span>
            </div>
            <div class="lp-fig">
              <span class="lp-fig-n">10</span>
              <span class="lp-fig-label">notions du programme officiel de 3√®me couvertes</span>
            </div>
            <div class="lp-fig">
              <span class="lp-fig-n">IA</span>
              <span class="lp-fig-label">correction instantan√©e par Claude ¬∑ Anthropic</span>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <hr class="lp-rule">

  <!-- FEATURES -->
  <div class="lp-section">
    <div class="lp-wrap">
      <div class="lp-section-head">
        <span class="lp-overline">Fonctionnalit√©s</span>
        <h2 class="lp-h2">Tout ce qu'il faut pour<br><em>r√©ussir.</em></h2>
      </div>
      <div class="lp-feat-grid">
        <div class="lp-feat-cell">
          <span class="lp-feat-idx">01</span>
          <h3>Exercices officiels DNB</h3>
          <p>G√©om√©trie, statistiques, probabilit√©s, alg√®bre‚Ä¶ mod√©lis√©s sur les vrais sujets APMEP 2023‚Äì2024.</p>
        </div>
        <div class="lp-feat-cell">
          <span class="lp-feat-idx">02</span>
          <h3>Simulateur d'examen</h3>
          <p>Chronom√®tre r√©el, conditions identiques au brevet. Dur√©e au choix : 2h, 1h, 30 min, 10 min.</p>
        </div>
        <div class="lp-feat-cell">
          <span class="lp-feat-idx">03</span>
          <h3>Correction IA</h3>
          <p>Chaque r√©ponse analys√©e par Claude (Anthropic). Score au point, feedback √©tape par √©tape.</p>
        </div>
        <div class="lp-feat-cell">
          <span class="lp-feat-idx">04</span>
          <h3>Corrig√©s d√©taill√©s</h3>
          <p>D√©marche officielle compl√®te accessible apr√®s validation de chaque question.</p>
        </div>
        <div class="lp-feat-cell">
          <span class="lp-feat-idx">05</span>
          <h3>Suivi de progression</h3>
          <p>Historique, graphiques d'√©volution, analyse des points faibles par notion.</p>
        </div>
        <div class="lp-feat-cell">
          <span class="lp-feat-idx">06</span>
          <h3>100 % gratuit</h3>
          <p>Aucune inscription, aucun abonnement. Accessible 24h/24 sur tous les appareils.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- COMMENT √áA MARCHE -->
  <div class="lp-section lp-section-bg">
    <div class="lp-wrap">
      <div class="lp-section-head">
        <span class="lp-overline">M√©thode</span>
        <h2 class="lp-h2">Comment √ßa<br><em>marche ?</em></h2>
      </div>
      <div class="lp-steps">
        <div class="lp-step">
          <span class="lp-step-n">01 ‚Äî</span>
          <div>
            <h3>Choisissez la dur√©e et les notions</h3>
            <p>De 5 minutes √† 2h (dur√©e r√©elle de l'examen). Ciblez toutes les notions ou concentrez-vous sur un chapitre pr√©cis.</p>
          </div>
        </div>
        <div class="lp-step">
          <span class="lp-step-n">02 ‚Äî</span>
          <div>
            <h3>Pratiquez en conditions r√©elles</h3>
            <p>Le chronom√®tre tourne. R√©pondez aux exercices, validez question par question pour une correction IA imm√©diate.</p>
          </div>
        </div>
        <div class="lp-step">
          <span class="lp-step-n">03 ‚Äî</span>
          <div>
            <h3>Consultez les corrig√©s</h3>
            <p>Apr√®s validation, acc√©dez au corrig√© complet avec la d√©marche officielle et les points attribu√©s.</p>
          </div>
        </div>
        <div class="lp-step">
          <span class="lp-step-n">04 ‚Äî</span>
          <div>
            <h3>Analysez votre progression</h3>
            <p>Le tableau de bord identifie vos lacunes par notion et visualise votre √©volution dans le temps.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CHAPITRES -->
  <div class="lp-section">
    <div class="lp-wrap">
      <span class="lp-overline">Programme complet</span>
      <h2 class="lp-h2" style="margin-bottom:0">10 notions du programme<br><em>officiel 3√®me.</em></h2>
      <div class="lp-pills">
        <span class="lp-pill">G√©om√©trie</span>
        <span class="lp-pill">Statistiques</span>
        <span class="lp-pill">Probabilit√©s</span>
        <span class="lp-pill">Arithm√©tique &amp; PGCD</span>
        <span class="lp-pill">Proportionnalit√©</span>
        <span class="lp-pill">Alg√®bre &amp; Fonctions</span>
        <span class="lp-pill">Puissances</span>
        <span class="lp-pill">Algorithmique</span>
        <span class="lp-pill">Volumes &amp; Grandeurs</span>
        <span class="lp-pill">√âquations</span>
      </div>
    </div>
  </div>

  <hr class="lp-rule">

  <!-- POUR QUI -->
  <div class="lp-section">
    <div class="lp-wrap">
      <span class="lp-overline">Public</span>
      <h2 class="lp-h2" style="margin-bottom:40px">Pour <em>qui ?</em></h2>
      <div class="lp-who-grid">
        <div class="lp-who-item">
          <h3>√âl√®ves de 3√®me</h3>
          <p>Qui veulent pr√©parer s√©rieusement le brevet blanc en s'entra√Ænant dans les conditions r√©elles de l'examen.</p>
        </div>
        <div class="lp-who-item">
          <h3>Coll√©giens en difficult√©</h3>
          <p>Souhaitant am√©liorer leurs r√©sultats en ciblant leurs points faibles notion par notion.</p>
        </div>
        <div class="lp-who-item">
          <h3>Parents accompagnants</h3>
          <p>Recherchant un outil fiable et p√©dagogique pour aider leurs enfants √† se pr√©parer au brevet.</p>
        </div>
      </div>
    </div>
  </div>

  <hr class="lp-rule">

  <!-- FAQ -->
  <div class="lp-section">
    <div class="lp-wrap">
      <span class="lp-overline">Questions fr√©quentes</span>
      <h2 class="lp-h2" style="margin-bottom:40px">FAQ</h2>
      <div class="lp-faq-list">
        <div class="lp-faq-item">
          <button class="lp-faq-q" onclick="this.closest('.lp-faq-item').classList.toggle('open')">
            Les exercices couvrent-ils tout le programme de 3√®me ?
            <span class="lp-faq-icon">+</span>
          </button>
          <div class="lp-faq-a">Oui. Les 48 exercices sont conformes au programme officiel de math√©matiques du coll√®ge, mod√©lis√©s sur les vrais sujets DNB 2023 et 2024 compil√©s par l'APMEP.</div>
        </div>
        <div class="lp-faq-item">
          <button class="lp-faq-q" onclick="this.closest('.lp-faq-item').classList.toggle('open')">
            Comment fonctionne la correction par IA ?
            <span class="lp-faq-icon">+</span>
          </button>
          <div class="lp-faq-a">Vos r√©ponses sont analys√©es par Claude (Anthropic), qui compare votre d√©marche √† la r√©ponse officielle et vous attribue des points avec un feedback p√©dagogique personnalis√©. La correction est instantan√©e.</div>
        </div>
        <div class="lp-faq-item">
          <button class="lp-faq-q" onclick="this.closest('.lp-faq-item').classList.toggle('open')">
            Mon historique est-il sauvegard√© ?
            <span class="lp-faq-icon">+</span>
          </button>
          <div class="lp-faq-a">Oui. Votre tableau de bord conserve l'historique de tous vos brevets blancs, vos scores et votre progression par notion. Les donn√©es sont stock√©es localement dans votre navigateur.</div>
        </div>
        <div class="lp-faq-item">
          <button class="lp-faq-q" onclick="this.closest('.lp-faq-item').classList.toggle('open')">
            C'est vraiment gratuit ?
            <span class="lp-faq-icon">+</span>
          </button>
          <div class="lp-faq-a">Enti√®rement gratuit. Aucune inscription requise, aucun abonnement. Toutes les fonctionnalit√©s sont accessibles imm√©diatement.</div>
        </div>
        <div class="lp-faq-item">
          <button class="lp-faq-q" onclick="this.closest('.lp-faq-item').classList.toggle('open')">
            Puis-je m'entra√Æner sur mobile ?
            <span class="lp-faq-icon">+</span>
          </button>
          <div class="lp-faq-a">Oui. La plateforme est enti√®rement responsive : ordinateur, tablette, smartphone. Aucune installation requise.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- CTA FINAL DARK -->
  <div class="lp-section lp-section-dark">
    <div class="lp-wrap">
      <div class="lp-cta-strip">
        <div>
          <h2 style="font-family:'Playfair Display',serif;font-size:clamp(28px,3.5vw,46px);font-weight:900;color:#fff;letter-spacing:-1.5px;line-height:.97;margin:0">
            Ne laissez pas le hasard<br>
            <em style="font-style:italic;color:#9ab4f0">d√©cider de vos r√©sultats.</em>
          </h2>
          <p style="font-size:14px;color:rgba(255,255,255,.38);margin:14px 0 0;line-height:1.6">Commencez √† vous entra√Æner maintenant ‚Äî gratuitement.</p>
        </div>
        <div class="lp-cta-actions">
          <button class="lp-btn lp-btn-light" onclick="go('screen-setup','navSetup')">
            G√©n√©rer mon brevet ‚Üí
          </button>
          <button class="lp-btn-ghost-white" onclick="go('screen-dash','navDash');renderDash()">
            Tableau de bord
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="lp-footer">
    <div class="lp-wrap">
      <div class="lp-footer-inner">
        <span class="lp-footer-brand"><em>Brevet</em> Blanc Maths</span>
        <span class="lp-footer-meta">Dipl√¥me National du Brevet ¬∑ Programme officiel 3√®me ¬∑ Exercices APMEP 2023‚Äì2024</span>
      </div>
    </div>
  </div>

</div>
</div>
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  SCREEN 1 ‚Äî SETUP
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="screen-setup">

  <!-- ‚îÄ‚îÄ Header ‚îÄ‚îÄ -->
  <div class="setup-header" style="padding:0 48px">
    <span class="setup-header-title">Configuration</span>
    <span class="setup-header-sub">Programme officiel 3√®me ¬∑ APMEP 2023‚Äì2024</span>
  </div>

  <!-- ‚îÄ‚îÄ Hero ‚îÄ‚îÄ -->
  <div class="setup-hero">
    <div class="setup-hero-inner" style="max-width:920px;margin:0 auto">
      <div>
        <span class="setup-eyebrow">Nouveau brevet blanc</span>
        <h1 class="setup-h1">
          Choisissez votre<br><em>√©preuve.</em>
        </h1>
        <div class="setup-hero-meta">
          <span>100 points au total</span>
          <span>Dur√©e au choix</span>
          <span>Notions cibl√©es</span>
        </div>
      </div>
      <div class="setup-stats">
        <div class="setup-stat">
          <div class="setup-stat-n">100</div>
          <div class="setup-stat-l">points</div>
        </div>
        <div class="setup-stat">
          <div class="setup-stat-n" id="setupTimerVal">2h</div>
          <div class="setup-stat-l">dur√©e choisie</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ Config body ‚îÄ‚îÄ -->
  <div class="setup-body">

    <div class="setup-block">
      <div class="setup-block-title">Dur√©e de l'√©preuve</div>
      <div class="timer-row" id="timerRow">
        <div class="timer-chip sel" data-min="120" onclick="selTimer(this)">2h ‚Äî Dur√©e r√©elle</div>
        <div class="timer-chip" data-min="60" onclick="selTimer(this)">1 heure</div>
        <div class="timer-chip" data-min="30" onclick="selTimer(this)">30 min</div>
        <div class="timer-chip" data-min="10" onclick="selTimer(this)">10 min</div>
        <div class="timer-chip" data-min="5" onclick="selTimer(this)">5 min</div>
      </div>
    </div>

    <div class="setup-block">
      <div class="setup-block-title">Notions √† travailler</div>
      <div class="chap-grid" id="chapGrid">
        <div class="chap-chip sel" data-id="all" onclick="selChap(this)"><div class="chk">‚úì</div><div><div class="ch-name">Toutes les notions</div><div class="ch-sub">Sujet complet type brevet</div></div></div>
        <div class="chap-chip" data-id="probabilites" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Probabilit√©s</div><div class="ch-sub">Fr√©quences, √©v√©nements</div></div></div>
        <div class="chap-chip" data-id="proportionnalite" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Proportionnalit√©</div><div class="ch-sub">Tableaux, pourcentages</div></div></div>
        <div class="chap-chip" data-id="statistiques" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Statistiques</div><div class="ch-sub">Moyenne, m√©diane, √©tendue</div></div></div>
        <div class="chap-chip" data-id="geometrie" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">G√©om√©trie</div><div class="ch-sub">Pythagore, Thal√®s, angles</div></div></div>
        <div class="chap-chip" data-id="algebre" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Alg√®bre &amp; Fonctions</div><div class="ch-sub">√âquations, fonctions affines</div></div></div>
        <div class="chap-chip" data-id="arithmetique" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Arithm√©tique</div><div class="ch-sub">PGCD, PPCM, nombres premiers</div></div></div>
        <div class="chap-chip" data-id="volumes" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Volumes &amp; Grandeurs</div><div class="ch-sub">Solides, unit√©s</div></div></div>
        <div class="chap-chip" data-id="puissances" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Puissances</div><div class="ch-sub">Notation scientifique</div></div></div>
        <div class="chap-chip" data-id="algorithmique" onclick="selChap(this)"><div class="chk"></div><div><div class="ch-name">Algorithmique</div><div class="ch-sub">Scratch, programmes</div></div></div>
      </div>
    </div>

    <div class="setup-cta">
      <button class="btn btn-dark" style="padding:13px 32px;font-size:14px" onclick="startExam()">
        D√©marrer le brevet ‚Üí
      </button>
      <button class="btn btn-ghost" onclick="go('screen-landing','navLanding')">‚Üê Retour</button>
    </div>

  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  SCREEN 2 ‚Äî EXAM
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="screen-exam">
  <div class="exam-top">
    <div class="exam-top-inner">
      <div class="exam-title-wrap">
        <h2>Brevet Blanc ‚Äî Math√©matiques</h2>
        <div class="sub" id="examSub">Chargement‚Ä¶</div>
      </div>
      <div class="timer-block">
        <div>
          <div class="timer-face" id="timerFace">02:00:00</div>
          <div style="font-size:9px;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,.28);text-align:center;margin-top:2px">Temps restant</div>
        </div>
        <div class="live-sc-box">
          <div class="live-sc-num" id="liveSc">0</div>
          <div class="live-sc-lbl">pts</div>
        </div>
        <button class="btn-end" onclick="endEarly()">Terminer</button>
      </div>
    </div>
  </div>
  <div class="pills-bar"><div class="pills-bar-inner" id="pillsBar"></div></div>
  <div class="exam-main">
    <div class="loading-box" id="loadingBox">
      <div class="spinner"></div>
      <p>G√©n√©ration des exercices‚Ä¶</p>
    </div>
    <div id="exContainer"></div>
    <div class="exam-footer" id="examFooter" style="display:none">
      <div>
        <div style="font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(--ink5);font-weight:600;margin-bottom:4px">Total provisoire</div>
        <p style="font-size:13px;font-style:italic;color:var(--ink4)">Validez vos r√©ponses pour calculer votre score</p>
      </div>
      <div class="footer-score"><span id="footerSc">0</span><sub> /100</sub></div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  SCREEN 3 ‚Äî RESULTS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="screen-results">
  <div class="res-banner">
    <div class="res-banner-inner">
      <div>
        <span class="res-eyebrow">R√©sultats ¬∑ Brevet Blanc Math√©matiques</span>
        <div class="res-score" id="resScore">0 <span>/ 100</span></div>
        <div class="res-mention" id="resMention"></div>
        <div class="res-bar-wrap"><div class="res-bar" id="resBar" style="width:0%"></div></div>
      </div>
      <div class="res-detail">
        <div class="res-stat"><div class="v" id="resCorrect">0</div><div class="l">Correctes</div></div>
        <div class="res-stat"><div class="v" id="resPartial">0</div><div class="l">Partielles</div></div>
        <div class="res-stat"><div class="v" id="resWrong">0</div><div class="l">Incorrectes</div></div>
      </div>
    </div>
  </div>
  <div class="res-body">
    <div>
      <div class="rule">Par notion</div>
      <div id="resByNotion"></div>
    </div>
    <div>
      <div class="rule">Points √† retravailler</div>
      <div id="resErrors"></div>
    </div>
    <div class="res-cta">
      <button class="btn btn-dark" onclick="go('screen-setup','navSetup')">‚Ü∫ Nouveau brevet</button>
      <button class="btn btn-light" onclick="go('screen-dash','navDash');renderDash()">Tableau de bord</button>
      <button class="btn btn-ghost" onclick="go('screen-landing','navLanding')">‚Üê Accueil</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  SCREEN 4 ‚Äî DASHBOARD
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="screen-dash">
  <div class="dash-banner">
    <div class="dash-banner-inner">
      <span class="lp-overline" style="color:rgba(255,255,255,.3)">Votre espace</span>
      <h2>Tableau de <em>bord</em></h2>
      <p>Historique complet ¬∑ Analyse de progression ¬∑ Points faibles par notion</p>
    </div>
  </div>
  <div class="dash-body">
    <div class="stat-row" id="dashStats"></div>
    <div class="chart-section" id="chartSection" style="display:none">
      <div class="rule">Progression des scores</div>
      <div class="chart-wrap" id="chartWrap"></div>
    </div>
    <div class="dash-grid" id="dashGrid"></div>
  </div>
</div>



<script>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   STATE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let selMin = 120, selChaps = ['all'];
let timerIv = null, secsLeft = 0;
let exerciseData = [], scores = {}, validated = {}, feedbacks = {};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   NAV
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function go(screenId, navId){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(screenId).classList.add('active');
  document.querySelectorAll('.gnav-link').forEach(n=>n.classList.remove('active'));
  if(navId) document.getElementById(navId)?.classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
}
function scrollToId(id){ document.getElementById(id)?.scrollIntoView({behavior:'smooth'}); }
function toggleFaq(el){ el.classList.toggle('open'); }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   EXERCISE BANK
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const BANK = {
  probabilites:[
    {title:"Probabilit√©s ‚Äî Urne et tirage al√©atoire",notion:"Probabilit√©s",pts:20,
     intro:"Dans une urne de 40 boules indiscernables au toucher, 5 sont rouges, 20 sont vertes et 15 sont blanches. On tire une boule au hasard.",
     questions:[
       {pts:7,text:"Calculer la probabilit√© d'obtenir une boule verte. Justifier.",ans:"P(verte) = 20/40 = 1/2 = 0,5"},
       {pts:7,text:"Calculer la probabilit√© d'obtenir une boule qui n'est pas rouge.",ans:"P(non rouge) = (20+15)/40 = 35/40 = 7/8 ‚âà 0,875"},
       {pts:6,text:"On r√©p√®te l'exp√©rience 200 fois. Combien de boules vertes peut-on esp√©rer approximativement ?",ans:"200 √ó 1/2 = 100 boules vertes environ"}
     ]},
    {title:"Probabilit√©s ‚Äî D√© √©quilibr√©",notion:"Probabilit√©s",pts:18,
     intro:"On lance un d√© √©quilibr√© √† 6 faces num√©rot√©es de 1 √† 6.",
     questions:[
       {pts:6,text:"Quelle est la probabilit√© d'obtenir un nombre pair ?",ans:"Issues paires : 2, 4, 6 ‚Üí P = 3/6 = 1/2"},
       {pts:6,text:"Quelle est la probabilit√© d'obtenir un nombre strictement sup√©rieur √† 4 ?",ans:"Issues : 5 et 6 ‚Üí P = 2/6 = 1/3"},
       {pts:6,text:"On r√©p√®te l'exp√©rience 300 fois et on obtient 55 fois le chiffre 1. Commenter.",ans:"P th√©orique = 1/6 ‚âà 16,7%. Fr√©quence = 55/300 ‚âà 18,3%. Proche ‚Äî variation al√©atoire normale."}
     ]}
  ],
  proportionnalite:[
    {title:"Proportionnalit√© & Pourcentages",notion:"Proportionnalit√©",pts:20,
     intro:"Un article co√ªte 25 ‚Ç¨. Le magasin propose plusieurs op√©rations commerciales.",
     questions:[
       {pts:7,text:"Calculer le prix de l'article apr√®s une augmentation de 14 %.",ans:"25 √ó 1,14 = 28,50 ‚Ç¨"},
       {pts:7,text:"Un second article co√ªte 80 ‚Ç¨ avec une r√©duction de 20 %. Calculer son nouveau prix.",ans:"80 √ó 0,80 = 64 ‚Ç¨"},
       {pts:6,text:"Un article passe de 45 ‚Ç¨ √† 36 ‚Ç¨. Calculer le taux de r√©duction en %.",ans:"(45‚àí36)/45 √ó 100 = 20%"}
     ]},
    {title:"Proportionnalit√© ‚Äî Agrandissement et aires",notion:"Proportionnalit√©",pts:20,
     intro:"Le polygone B est un agrandissement du polygone A. Coefficient d'agrandissement : 2,5. Aire de A : 7,5 cm¬≤.",
     questions:[
       {pts:7,text:"Calculer l'aire du polygone B. Rappel : si les longueurs sont multipli√©es par k, les aires sont multipli√©es par k¬≤.",ans:"Aire B = 7,5 √ó 2,5¬≤ = 46,875 cm¬≤"},
       {pts:7,text:"Le p√©rim√®tre de A est 12 cm. Calculer le p√©rim√®tre de B.",ans:"P√©rim√®tre B = 12 √ó 2,5 = 30 cm"},
       {pts:6,text:"Polygone C : coefficient 0,4 par rapport √† A. Calculer son aire.",ans:"Aire C = 7,5 √ó 0,4¬≤ = 1,2 cm¬≤"}
     ]}
  ],
  statistiques:[
    {title:"Statistiques ‚Äî Indicateurs de position",notion:"Statistiques",pts:20,
     intro:"Dans une classe de 3√®me, r√©partition des tailles des √©l√®ves :",
     tableData:{headers:["Taille (cm)","152","157","160","162","165","170","174","180"],rows:[["Effectif","2","4","2","5","2","4","6","5"]]},
     questions:[
       {pts:8,text:"Calculer la moyenne des tailles (arrondir au dixi√®me).",ans:"Somme = 5016. Effectif = 30. Moyenne = 167,2 cm"},
       {pts:6,text:"D√©terminer la m√©diane.",ans:"30 √©l√®ves ‚Üí entre 15e et 16e. 15e = 165 cm, 16e = 170 cm. M√©diane = 167,5 cm"},
       {pts:6,text:"Calculer Q1, Q3 et l'√©cart interquartile.",ans:"Q1 = 8e valeur = 160 cm. Q3 = 23e valeur = 174 cm. IQR = 14 cm"}
     ]},
    {title:"Statistiques ‚Äî Masses et probabilit√©s",notion:"Statistiques",pts:19,
     intro:"5 colis (A, B, C, D, E) de masses (kg) : 4, 9, 2, 7, 11.",
     questions:[
       {pts:7,text:"Calculer la moyenne des masses.",ans:"(4+9+2+7+11)/5 = 6,6 kg"},
       {pts:6,text:"D√©terminer la m√©diane. Interpr√©ter.",ans:"Tri√©es : 2,4,7,9,11. M√©diane = 7 kg. La moiti√© des colis p√®sent moins de 7 kg."},
       {pts:6,text:"Probabilit√© de choisir un colis de masse < 8 kg.",ans:"Colis < 8 : A(4), C(2), D(7) ‚Üí P = 3/5"}
     ]}
  ],
  geometrie:[
    {title:"G√©om√©trie ‚Äî Pythagore & triangles semblables",notion:"G√©om√©trie",pts:24,
     intro:"Triangle CDE rectangle en D. CD = 21,6 cm, CE = 29,1 cm, FC = 17,2 cm. (GF) ‚à• (DE).",
     questions:[
       {pts:8,text:"Montrer que DE = 19,5 cm.",ans:"DE¬≤ = CE¬≤ ‚àí CD¬≤ = 29,1¬≤ ‚àí 21,6¬≤ = 381,25. DE = 19,5 cm ‚úì"},
       {pts:8,text:"Calculer l'aire du triangle CDE.",ans:"Aire = (21,6 √ó 19,5)/2 = 210,6 cm¬≤"},
       {pts:8,text:"(GF) ‚à• (DE). Calculer GF au mm pr√®s.",ans:"GF = DE √ó FC/DC = 19,5 √ó 17,2/21,6 ‚âà 15,5 cm"}
     ]},
    {title:"G√©om√©trie ‚Äî Terrain triangulaire",notion:"G√©om√©trie",pts:21,
     intro:"Triangle ABC rectangle en B. AB = 600 m, BC = 450 m, CD = 270 m.",
     questions:[
       {pts:7,text:"Montrer que AC = 750 m.",ans:"AC¬≤ = 600¬≤ + 450¬≤ = 562500. AC = 750 m ‚úì"},
       {pts:7,text:"Montrer que (DE) ‚à• (AB) et calculer DE.",ans:"CD/CB = 0,6. (DE) ‚à• (AB). DE = 600 √ó 0,6 = 360 m"},
       {pts:7,text:"Calculer l'aire du triangle CDE.",ans:"Aire CDE = 135000 √ó 0,36 = 48600 m¬≤"}
     ]}
  ],
  algebre:[
    {title:"Alg√®bre ‚Äî Programme de calcul",notion:"Alg√®bre",pts:20,
     intro:"Programme : choisir x ‚Üí √ó(‚àí2) ‚Üí +4 ‚Üí √ó4.",
     questions:[
       {pts:5,text:"Montrer que pour x = 1, le r√©sultat est 8.",ans:"1√ó(‚àí2)=‚àí2. ‚àí2+4=2. 2√ó4=8 ‚úì"},
       {pts:5,text:"R√©sultat pour x = ‚àí2 ?",ans:"‚àí2√ó(‚àí2)=4. 4+4=8. 8√ó4=32"},
       {pts:5,text:"Montrer que le r√©sultat s'√©crit ‚àí8x + 16.",ans:"x ‚Üí ‚àí2x ‚Üí ‚àí2x+4 ‚Üí 4(‚àí2x+4) = ‚àí8x+16 ‚úì"},
       {pts:5,text:"R√©soudre ‚àí8x + 16 = 4.",ans:"‚àí8x = ‚àí12. x = 3/2 = 1,5"}
     ]},
    {title:"Alg√®bre ‚Äî Rectangle et √©quation",notion:"Alg√®bre",pts:20,
     intro:"Rectangle ABCD avec AD = x et AB = 16‚àí2x. Carr√© EFGH avec EF = 2x.",
     questions:[
       {pts:5,text:"Pour x = 1,5, calculer le p√©rim√®tre du carr√© EFGH.",ans:"EF = 3 cm. P√©rim√®tre = 12 cm"},
       {pts:5,text:"Pour x = 1,5, calculer AB. V√©rifier AB > 0.",ans:"AB = 13 cm > 0 ‚úì"},
       {pts:5,text:"Montrer que le p√©rim√®tre du rectangle s'√©crit ‚àí2x + 32.",ans:"P = 2(x + 16‚àí2x) = 32‚àí2x ‚úì"},
       {pts:5,text:"Trouver x pour que les deux p√©rim√®tres soient √©gaux.",ans:"‚àí2x+32 = 8x ‚Üí x = 3,2 cm"}
     ]}
  ],
  puissances:[
    {title:"Puissances & notation scientifique",notion:"Puissances",pts:15,
     intro:"Exercice de calcul sur les puissances de 10.",
     questions:[
       {pts:5,text:"√âcrire en puissance de 10 : a) 10‚Å¥ √ó 10¬≥   b) 10‚Å∑ √∑ 10¬≤   c) (10¬≥)¬≤",ans:"a) 10‚Å∑   b) 10‚Åµ   c) 10‚Å∂"},
       {pts:5,text:"√âcrire en notation scientifique : a) 0,000 045   b) 12 800 000",ans:"a) 4,5 √ó 10‚Åª‚Åµ   b) 1,28 √ó 10‚Å∑"},
       {pts:5,text:"Diam√®tre d'un atome : 2,4 √ó 10‚Åª¬π‚Å∞ m. Atomes pour couvrir 1 mm ?",ans:"N = 10‚Åª¬≥ √∑ (2,4√ó10‚Åª¬π‚Å∞) ‚âà 4,2 √ó 10‚Å∂ atomes"}
     ]}
  ],
  pgcd:[
    {title:"Arithm√©tique ‚Äî PGCD et lots",notion:"Arithm√©tique",pts:15,
     intro:"350 poissons de type A et 300 de type B √† r√©partir en lots identiques.",
     questions:[
       {pts:5,text:"D√©composer 300 en facteurs premiers.",ans:"300 = 2¬≤ √ó 3 √ó 5¬≤"},
       {pts:5,text:"D√©composer 350 en facteurs premiers.",ans:"350 = 2 √ó 5¬≤ √ó 7"},
       {pts:5,text:"Calculer le PGCD et le nombre maximal de lots.",ans:"PGCD = 50. Maximum 50 lots : 7 poissons A et 6 poissons B par lot."}
     ]}
  ],
  programmation:[
    {title:"Algorithmique ‚Äî Deux programmes",notion:"Algorithmique",pts:20,
     intro:"Programme A : x ‚Üí √ó3 ‚Üí +15 ‚Üí √∑3 ‚Üí ‚àíx. Programme B : x ‚Üí (x‚àí1)√ó(x‚àí6) ‚Üí +5.",
     questions:[
       {pts:5,text:"Montrer que pour x = 4, A donne 5.",ans:"4√ó3=12. 12+15=27. 27√∑3=9. 9‚àí4=5 ‚úì"},
       {pts:5,text:"Justifier que A donne toujours le m√™me r√©sultat.",ans:"x ‚Üí 3x ‚Üí 3x+15 ‚Üí x+5 ‚Üí x+5‚àíx = 5 ‚úì"},
       {pts:5,text:"Pour x = 10, quel r√©sultat donne B ?",ans:"(10‚àí1)√ó(10‚àí6)+5 = 9√ó4+5 = 41"},
       {pts:5,text:"Trouver les deux valeurs pour lesquelles A = B.",ans:"x¬≤‚àí7x+6=0 ‚Üí x=1 ou x=6"}
     ]}
  ],
  volumes:[
    {title:"Volumes ‚Äî Aquariums",notion:"Volumes",pts:18,
     intro:"Il faut ‚â• 15 L par poisson. Aquariums remplis aux 4/5 de leur hauteur.",
     questions:[
       {pts:7,text:"Aquarium cylindrique : ‚àÖ 30 cm, h = 25 cm. Volume d'eau ? Suffisant ?",ans:"V eau = œÄ√ó15¬≤√ó25√ó(4/5) ‚âà 14137 cm¬≥ ‚âà 14,1 L < 15 L ‚Äî insuffisant."},
       {pts:7,text:"Aquarium pav√© droit 28√ó28√ó30 cm. Volume d'eau ? Convient-il ?",ans:"V eau = 23520 √ó 0,8 = 18816 cm¬≥ = 18,8 L > 15 L ‚Äî convient ‚úì"},
       {pts:4,text:"Poisson : 15 ‚Ç¨, aquarium : 40 ‚Ç¨. Remise de 15%. Prix final ?",ans:"Total = 55 ‚Ç¨. Remise = 8,25 ‚Ç¨. Prix = 46,75 ‚Ç¨"}
     ]}
  ],

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NOUVEAUX EXERCICES DNB 2023 + DNB Am√©rique du Nord mai 2024 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

  probabilites2023:[
    {title:"Probabilit√©s ‚Äî Jeu de 32 cartes",notion:"Probabilit√©s",pts:20,
     intro:"Un jeu de 32 cartes comprend 4 familles (tr√®fle, carreau, c≈ìur, pique), chacune avec 8 cartes : 7, 8, 9, 10, valet, dame, roi, as. On tire une carte au hasard.",
     questions:[
       {pts:6,text:"Quelle est la probabilit√© d'obtenir le 8 de pique ?",ans:"1 carte sur 32. P(8 de pique) = 1/32"},
       {pts:8,text:"Quelle est la probabilit√© d'obtenir un roi ou un c≈ìur ? Justifier.",ans:"4 rois + 8 c≈ìurs ‚àí 1 roi de c≈ìur = 11 cartes. P = 11/32"},
       {pts:6,text:"On pioche une carte, on la remet, puis on pioche une seconde. Probabilit√© d'obtenir deux rois ?",ans:"P(roi) = 4/32 = 1/8. Tirages ind√©pendants ‚Üí P(deux rois) = 1/8 √ó 1/8 = 1/64"}
     ]},
    {title:"Probabilit√©s ‚Äî Urne boules noires et rouges",notion:"Probabilit√©s",pts:22,
     intro:"Une urne contient 3 boules noires (num√©rot√©es 1 √† 3) et 4 boules rouges (num√©rot√©es 1 √† 4), toutes indiscernables au toucher. ‚Äî DNB Centres √©trangers juin 2023",
     questions:[
       {pts:6,text:"On pioche une boule. Quelle est la probabilit√© de tirer une boule rouge ?",ans:"P(rouge) = 4/7"},
       {pts:6,text:"Quelle est la probabilit√© de tirer une boule portant un nombre pair ?",ans:"Pairs : noire 2, rouges 2 et 4 ‚Üí 3 boules paires sur 7. P = 3/7"},
       {pts:10,text:"On pioche une boule, on la remet, puis on pioche une seconde. On gagne en tirant la boule rouge n¬∞1 ET une boule noire. Quelle est la probabilit√© de gagner ?",ans:"P(rouge1 puis noire) = 1/7 √ó 3/7 = 3/49. P(noire puis rouge1) = 3/7 √ó 1/7 = 3/49. P(gagner) = 6/49"}
     ]},
    {title:"Probabilit√©s ‚Äî Sac de boules et roue num√©rot√©e",notion:"Probabilit√©s",pts:18,
     intro:"Jeu 1 : sac de 5 boules (1 N, 2 G, 2 P). Jeu 2 : roue √† 6 secteurs √©gaux num√©rot√©s 1 √† 6. ‚Äî DNB Polyn√©sie juin 2023",
     questions:[
       {pts:5,text:"Jeu 1 : montrer que la probabilit√© de tirer G est 2/5.",ans:"2 boules G sur 5 au total ‚Üí P(G) = 2/5 ‚úì"},
       {pts:5,text:"Jeu 2 : quelle est la probabilit√© de s'arr√™ter sur un nombre premier ?",ans:"Nombres premiers de 1 √† 6 : 2, 3, 5 ‚Üí 3 secteurs sur 6. P = 3/6 = 1/2"},
       {pts:8,text:"Jeu combin√© : on tire une boule ET on tourne la roue. On gagne si G et un nombre premier. Probabilit√© de gagner ?",ans:"√âv√©nements ind√©pendants. P = 2/5 √ó 1/2 = 1/5"}
     ]},
    {title:"Probabilit√©s ‚Äî Roue et urne, nombres √† deux chiffres",notion:"Probabilit√©s",pts:20,
     intro:"Une roue √† 4 secteurs √©gaux (1,2,3,4) donne le chiffre des dizaines. Une urne avec 3 boules (2,3,4) donne le chiffre des unit√©s. ‚Äî DNB Am√©rique du Sud nov. 2023",
     questions:[
       {pts:5,text:"√âcrire la liste des 12 issues possibles.",ans:"12, 13, 14, 22, 23, 24, 32, 33, 34, 42, 43, 44"},
       {pts:5,text:"Quelle est la probabilit√© d'obtenir un nombre impair ?",ans:"Unit√©s impaires = 3 ‚Üí issues : 13, 23, 33, 43 ‚Üí 4 issues. P = 4/12 = 1/3"},
       {pts:5,text:"Probabilit√© que le nombre form√© soit un nombre premier inf√©rieur √† 30 ?",ans:"Nombres premiers parmi les issues : 13, 23 ‚Üí 2 issues. P = 2/12 = 1/6"},
       {pts:5,text:"Montrer que la probabilit√© d'obtenir un multiple de 11 est 0,25.",ans:"Multiples de 11 parmi les issues : 22, 33, 44 ‚Üí 3 issues. P = 3/12 = 1/4 = 0,25 ‚úì"}
     ]},
    {title:"Probabilit√©s ‚Äî Urne 15 boules num√©rot√©es",notion:"Probabilit√©s",pts:20,
     intro:"Une urne contient 15 boules indiscernables num√©rot√©es de 1 √† 15. ‚Äî DNB Am√©rique du Nord mai 2024",
     questions:[
       {pts:8,text:"L'affirmation 'la probabilit√© de tirer un nombre premier est 7/15' est-elle vraie ? Justifier.",ans:"Nombres premiers de 1 √† 15 : 2,3,5,7,11,13 ‚Üí 6 nombres (1 n'est pas premier). P = 6/15 = 2/5. L'affirmation est FAUSSE."},
       {pts:6,text:"Calculer la probabilit√© de tirer un multiple de 3.",ans:"Multiples de 3 de 1 √† 15 : 3,6,9,12,15 ‚Üí 5 boules. P = 5/15 = 1/3"},
       {pts:6,text:"L'affirmation 'l'aire du triangle A'B'C' est 3 fois celle du triangle ABC' (homoth√©tie de rapport ‚àí3) est-elle vraie ?",ans:"Rapport de l'homoth√©tie = ‚àí3, donc les longueurs sont multipli√©es par 3. Les aires sont multipli√©es par 3¬≤ = 9. L'affirmation est FAUSSE (facteur 9, pas 3)."}
     ]}
  ],

  statistiques2023:[
    {title:"Statistiques ‚Äî Prix des h√¥tels, moyenne et m√©diane",notion:"Statistiques",pts:20,
     intro:"Prix factur√©s pour une nuit dans les h√¥tels d'une ville ‚Äî DNB Am√©rique du Nord, 31 mai 2023",
     tableData:{headers:["Prix/nuit (‚Ç¨)","60","80","85","90","110","120","350","500"],rows:[["Effectif","1200","1350","1000","1100","1200","1300","900","300"]]},
     questions:[
       {pts:5,text:"D√©terminer l'√©tendue des prix factur√©s.",ans:"√âtendue = 500 ‚àí 60 = 440 ‚Ç¨"},
       {pts:8,text:"Calculer la moyenne des prix factur√©s pour une nuit (arrondir √† l'euro pr√®s).",ans:"Somme pond√©r√©e = 60√ó1200+80√ó1350+85√ó1000+90√ó1100+110√ó1200+120√ó1300+350√ó900+500√ó300 = 972 000. Effectif total = 8350. Moyenne ‚âà 116 ‚Ç¨"},
       {pts:7,text:"L'association affirme : 'au moins la moiti√© des nuits est factur√©e √† moins de 100 ‚Ç¨'. Est-ce vrai ?",ans:"Effectifs ‚â§ 90 ‚Ç¨ : 1200+1350+1000+1100 = 4650 sur 8350 total ‚âà 55,7 % > 50 %. VRAI ‚úì"}
     ]},
    {title:"Statistiques ‚Äî Ventes de pots de glace",notion:"Statistiques",pts:24,
     intro:"Pots de glace vendus en juillet‚Äìao√ªt 2022 ‚Äî DNB Asie, 19 juin 2023",
     tableData:{headers:["","Sem. 1","Sem. 2","Sem. 3","Sem. 4"],rows:[["Juillet","453","649","786","854"],["Ao√ªt","860","1003","957","838"]]},
     questions:[
       {pts:8,text:"Calculer le nombre moyen de pots vendus par semaine sur les 8 semaines.",ans:"Total = 453+649+786+854+860+1003+957+838 = 6400. Moyenne = 6400/8 = 800 pots/semaine"},
       {pts:8,text:"67 % des pots sont √† 1 boule (2,80 ‚Ç¨), les autres √† 2 boules (3,50 ‚Ç¨). Calculer la somme rapport√©e par la vente.",ans:"Pots 1 boule : 0,67√ó6400 = 4288 ‚Üí 4288√ó2,80 = 12 006,40 ‚Ç¨. Pots 2 boules : 2112 ‚Üí 2112√ó3,50 = 7 392 ‚Ç¨. Total = 19 398,40 ‚Ç¨"},
       {pts:8,text:"Montrer que le volume d'une boule de glace de diam√®tre 4,2 cm est d'environ 39 cm¬≥. (V = 4/3 √ó œÄ √ó r¬≥)",ans:"r = 2,1 cm. V = 4/3 √ó œÄ √ó 2,1¬≥ = 4/3 √ó œÄ √ó 9,261 ‚âà 38,79 cm¬≥ ‚âà 39 cm¬≥ ‚úì"}
     ]},
    {title:"Statistiques ‚Äî Entr√©es √† la piscine",notion:"Statistiques",pts:22,
     intro:"Entr√©es mensuelles √† la piscine sur une ann√©e ‚Äî DNB M√©tropole, 18 septembre 2023",
     tableData:{headers:["Mois","Jan","F√©v","Mar","Avr","Mai","Jui","Jul","Ao√ª","Sep","Oct","Nov","D√©c"],rows:[["Entr√©es","12500","13700","10400","13600","12300","11700","10400","11600","10200","13800","12600","11800"]]},
     questions:[
       {pts:7,text:"Calculer le nombre moyen d'entr√©es par mois.",ans:"Total = 144 600. Moyenne = 144 600 / 12 = 12 050 entr√©es/mois"},
       {pts:7,text:"Calculer l'√©tendue du nombre d'entr√©es par mois.",ans:"Max = 13 800 (oct.). Min = 10 200 (sep.). √âtendue = 3 600"},
       {pts:8,text:"La piscine est un pav√© droit de 50 m √ó 25 m √ó 3 m. Calculer le volume d'eau √©vacu√© lors d'une vidange compl√®te.",ans:"V = 50 √ó 25 √ó 3 = 3 750 m¬≥"}
     ]},
    {title:"Statistiques ‚Äî Lunettes de soleil et prix moyen",notion:"Statistiques",pts:20,
     intro:"5 mod√®les de lunettes vendus en 2022 ‚Äî DNB M√©tropole Antilles-Guyane, 26 juin 2023",
     tableData:{headers:["Mod√®le","1","2","3","4","5"],rows:[["Paires vendues","1200","950","875","250","300"],["Prix unit. (‚Ç¨)","75","100","110","140","160"]]},
     questions:[
       {pts:5,text:"Montrer que l'√©tendue des prix est de 85 ‚Ç¨.",ans:"√âtendue = 160 ‚àí 75 = 85 ‚Ç¨ ‚úì"},
       {pts:7,text:"Calculer le nombre total de paires vendues en 2022.",ans:"Total = 1200+950+875+250+300 = 3 575 paires"},
       {pts:8,text:"Calculer le montant total des ventes et le prix moyen par paire (arrondi au centime).",ans:"Ventes = 1200√ó75+950√ó100+875√ó110+250√ó140+300√ó160 = 364 250 ‚Ç¨. Prix moyen = 364 250/3575 ‚âà 101,89 ‚Ç¨"}
     ]},
    {title:"Statistiques ‚Äî Prix v√™tements, moyenne et m√©diane",notion:"Statistiques",pts:20,
     intro:"Prix d'un v√™tement dans diff√©rents magasins (‚Ç¨) : 12 ; 15 ; 10 ; 7 ; 13 ‚Äî DNB Am√©rique du Nord, 29 mai 2024",
     questions:[
       {pts:7,text:"La moyenne est-elle 11,40 ‚Ç¨ ? Justifier.",ans:"Moyenne = (7+10+12+13+15)/5 = 57/5 = 11,40 ‚Ç¨. VRAIE ‚úì"},
       {pts:7,text:"La m√©diane est-elle 10 ‚Ç¨ ? Justifier.",ans:"Valeurs tri√©es : 7, 10, 12, 13, 15. 3e valeur = 12 ‚Ç¨. L'affirmation 'm√©diane = 10' est FAUSSE."},
       {pts:6,text:"Quelle est l'√©tendue des prix ?",ans:"√âtendue = 15 ‚àí 7 = 8 ‚Ç¨"}
     ]}
  ],

  geometrie2023:[
    {title:"G√©om√©trie ‚Äî Triangle LNA et triangles semblables",notion:"G√©om√©trie",pts:22,
     intro:"AN = 13 cm, LN = 5 cm, AL = 12 cm, ON = 3 cm. O ‚àà [LN], H ‚àà [NA]. Triangles LNA et ONH semblables. ‚Äî DNB Am√©rique du Nord, 31 mai 2023",
     questions:[
       {pts:5,text:"Montrer que le triangle LNA est rectangle en L.",ans:"LN¬≤ + AL¬≤ = 25 + 144 = 169 = 13¬≤ = AN¬≤. Par r√©ciproque de Pythagore, LNA est rectangle en L ‚úì"},
       {pts:7,text:"Montrer que OH = 7,2 cm.",ans:"Triangles semblables LNA et ONH : ON/LN = OH/AL ‚Üí 3/5 = OH/12 ‚Üí OH = 7,2 cm ‚úì"},
       {pts:10,text:"Calculer l'angle LNA (√† l'unit√©). Calculer l'aire du quadrilat√®re LOHA et sa proportion par rapport √† l'aire du triangle LNA.",ans:"sin(LNA) = AL/AN = 12/13 ‚Üí angle LNA ‚âà 67¬∞. Aire LNA = (5√ó12)/2 = 30 cm¬≤. Aire ONH = (3√ó7,2)/2 = 10,8 cm¬≤. Aire LOHA = 30 ‚àí 10,8 = 19,2 cm¬≤. Proportion = 19,2/30 = 64 %"}
     ]},
    {title:"G√©om√©trie ‚Äî Triangles semblables EGF et LGH",notion:"G√©om√©trie",pts:20,
     intro:"EF=18 cm, FG=24 cm, EG=30 cm, GH=38,4 cm. (LH)‚ä•(FH). Angle EGF = angle LGH. ‚Äî DNB Am√©rique du Sud, nov. 2023",
     questions:[
       {pts:5,text:"Montrer que le triangle EFG est rectangle en F.",ans:"EF¬≤+FG¬≤ = 324+576 = 900 = 30¬≤ = EG¬≤. Par r√©ciproque de Pythagore, EFG rectangle en F ‚úì"},
       {pts:5,text:"Calculer l'angle EGF (au degr√© pr√®s).",ans:"cos(EGF) = FG/EG = 24/30 = 0,8 ‚Üí angle EGF ‚âà 37¬∞"},
       {pts:5,text:"Montrer que les triangles EGF et LGH sont semblables.",ans:"Angle EGF = Angle LGH (donn√©es). Angle EFG = Angle LHG = 90¬∞. Deux angles √©gaux ‚Üí triangles semblables ‚úì"},
       {pts:5,text:"Calculer le coefficient d'agrandissement de EGF vers LGH puis le p√©rim√®tre de LGH.",ans:"k = GH/GF = 38,4/24 = 1,6. LH = 18√ó1,6 = 28,8 cm. LG = 30√ó1,6 = 48 cm. P√©rim√®tre = 28,8+38,4+48 = 115,2 cm"}
     ]},
    {title:"G√©om√©trie ‚Äî Piste d'hippodrome",notion:"G√©om√©trie",pts:18,
     intro:"La piste est compos√©e de 2 segments de 850 m et 2 demi-cercles de rayon 40 m. ‚Äî DNB Am√©rique du Nord, 31 mai 2023",
     questions:[
       {pts:5,text:"Montrer que la longueur d'un tour de piste est d'environ 1 951 m.",ans:"Droites = 2√ó850 = 1700 m. Cercle = 2œÄ√ó40 ‚âà 251,3 m. Total ‚âà 1 951 m ‚úì"},
       {pts:7,text:"Un cheval parcourt un tour en 2 min 9 s. Calculer sa vitesse en m/s (√† l'unit√©) puis en km/h.",ans:"Dur√©e = 129 s. v = 1951/129 ‚âà 15 m/s. En km/h : 15 √ó 3,6 = 54 km/h"},
       {pts:6,text:"Aire de la piste ‚âà 73 027 m¬≤. Marque A : 500 m¬≤/sac √† 141,95 ‚Ç¨. Marque B : 400 m¬≤/sac √† 87,90 ‚Ç¨. Marque C : 300 m¬≤/sac √† 66,50 ‚Ç¨. Quelle marque choisir pour un co√ªt minimum ?",ans:"Sacs A : ‚åà73027/500‚åâ=147 ‚Üí 147√ó141,95‚âà20 867 ‚Ç¨. Sacs B : ‚åà73027/400‚åâ=183 ‚Üí 183√ó87,90‚âà16 086 ‚Ç¨. Sacs C : ‚åà73027/300‚åâ=244 ‚Üí 244√ó66,50‚âà16 226 ‚Ç¨. Choisir la marque B."}
     ]},
    {title:"G√©om√©trie ‚Äî Triangle √©quilat√©ral et Scratch",notion:"G√©om√©trie",pts:19,
     intro:"Triangle ABC √©quilat√©ral, AB = 240 mm. Point C sur [AE] avec CE = 80 mm. (DE)‚à•(AB). ‚Äî DNB Am√©rique du Nord, 29 mai 2024",
     questions:[
       {pts:7,text:"Montrer que le triangle ABC est √©quilat√©ral.",ans:"Angle ACB = 60¬∞ et les codages montrent AB = BC. Triangle isoc√®le avec angle au sommet 60¬∞ ‚Üí tous les angles valent 60¬∞ ‚Üí triangle √©quilat√©ral ‚úì"},
       {pts:6,text:"Montrer que les droites (DE) et (AB) sont parall√®les.",ans:"D ‚àà [BC], E ‚àà [AC], et CE/CA = DE/AB (les codages montrent CE = 80 = AB/3). Par la r√©ciproque du th√©or√®me de Thal√®s dans le triangle CAB, (DE)‚à•(AB) ‚úì"},
       {pts:6,text:"Dans le programme Scratch, la variable c√¥t√© prend la valeur 240 pour le grand triangle, puis c√¥t√©/3 pour le petit. Expliquer et calculer le c√¥t√© du petit triangle.",ans:"CE = 80 mm = 240/3 mm. Le petit triangle CDE est une r√©duction de rapport 1/3. c√¥t√©/3 = 240/3 = 80 mm."}
     ]},
    {title:"G√©om√©trie ‚Äî Escalier et trigonom√©trie",notion:"G√©om√©trie",pts:20,
     intro:"Escalier de hauteur totale 272 cm. Hauteur d'une marche = 17 cm. Profondeur = 27 cm. ‚Äî DNB M√©tropole Antilles-Guyane, 26 juin 2023",
     questions:[
       {pts:5,text:"Montrer qu'il faut pr√©voir 16 marches.",ans:"272 √∑ 17 = 16 marches exactement ‚úì"},
       {pts:5,text:"Montrer que la longueur de la base AB est 432 cm.",ans:"16 √ó 27 = 432 cm ‚úì"},
       {pts:10,text:"Calculer l'angle BAC (au degr√© pr√®s). L'escalier permet-il une mont√©e agr√©able (25¬∞ √† 40¬∞) ?",ans:"tan(BAC) = BC/AB = 272/432 ‚âà 0,630 ‚Üí angle BAC ‚âà 32¬∞. 25¬∞ < 32¬∞ < 40¬∞ ‚Üí mont√©e agr√©able ‚úì"}
     ]},
    {title:"G√©om√©trie ‚Äî Terrasse en b√©ton",notion:"G√©om√©trie",pts:21,
     intro:"Terrasse en L : EFGH rectangle (HG=10 m, EH=6 m). Un coin (3m √ó 4m) est d√©coup√©. Hauteur de la terrasse : 15 cm = 0,15 m. ‚Äî DNB Am√©rique du Nord, 29 mai 2024",
     questions:[
       {pts:5,text:"Montrer que FJ = 4 m.",ans:"EF = HG = 10 m. EJ = EH ‚àí JH = 6 m correspond √† la largeur totale de la partie rectangulaire. La partie d√©coup√©e a IJ = 15 cm. Vue de dessus : FJ = HG ‚àí partie restante. EJ = 6 m ‚Üí FJ = 10 ‚àí 6 = 4 m ‚úì"},
       {pts:8,text:"Calculer la longueur minimale de planches √† acheter (p√©rim√®tre de la terrasse).",ans:"P√©rim√®tre = 10 + 6 + 4 + 3 + 6 + 3 = 32 m"},
       {pts:8,text:"Montrer que le volume de la terrasse est inf√©rieur √† 4 m¬≥.",ans:"Aire = 10√ó6 ‚àí 4√ó3 = 60 ‚àí 12 = 48 m¬≤. V = 48 √ó 0,15 = 7,2 m¬≥. En r√©alit√© la forme L : (6√ó3)+(4√ó6) = 18+24=42 m¬≤ ou le calcul direct en lisant la figure. V = 42√ó0,15 = 6,3 m¬≥ > 4 m¬≥ ‚Üí les 4 m¬≥ command√©s ne suffisent pas pour la terrasse compl√®te."}
     ]}
  ],

  algebre2023:[
    {title:"Alg√®bre ‚Äî Deux programmes de calcul (Amir & Sonia)",notion:"Alg√®bre",pts:15,
     intro:"Prog. Amir : x ‚Üí soustraire 5 ‚Üí √ó2. Prog. Sonia : x ‚Üí +3 ‚Üí √ó(nombre choisi) ‚Üí ‚àí16. ‚Äî DNB Centres √©trangers, 14 juin 2023",
     questions:[
       {pts:5,text:"Montrer que pour x=6, Amir donne 2 et Sonia donne 38.",ans:"Amir : (6‚àí5)√ó2 = 2 ‚úì. Sonia : (6+3)√ó6 ‚àí 16 = 54‚àí16 = 38 ‚úì"},
       {pts:5,text:"D'apr√®s le tableau de valeurs, pour quel nombre les deux programmes donnent-ils le m√™me r√©sultat ?",ans:"Pour x=2 : Amir = ‚àí6 et Sonia = ‚àí6. Les deux programmes sont √©gaux pour x = 2 (et x = ‚àí3)."},
       {pts:5,text:"Montrer que le r√©sultat de Sonia s'√©crit x¬≤ + 3x ‚àí 16. R√©soudre (x‚àí2)(x+3) = 0.",ans:"Sonia : (x+3)√óx ‚àí 16 = x¬≤+3x‚àí16 ‚úì. (x‚àí2)(x+3)=0 ‚Üí x=2 ou x=‚àí3"}
     ]},
    {title:"Alg√®bre ‚Äî Fonctions affines et tarifs cin√©ma",notion:"Alg√®bre",pts:20,
     intro:"Tarif Classique : h(x)=11x. Tarif Essentiel : f(x)=50+5x. Tarif Libert√© : g(x)=240. ‚Äî DNB Am√©rique du Nord, 29 mai 2024",
     questions:[
       {pts:5,text:"Avec le tarif Classique, quel est le prix pour 3 entr√©es ?",ans:"h(3) = 11√ó3 = 33 ‚Ç¨"},
       {pts:5,text:"Montrer qu'avec le tarif Essentiel, aller 8 fois au cin√©ma co√ªte 90 ‚Ç¨.",ans:"f(8) = 50+5√ó8 = 90 ‚Ç¨ ‚úì"},
       {pts:5,text:"Quel tarif donne un prix proportionnel au nombre d'entr√©es ? Justifier.",ans:"Tarif Classique : h(x)=11x est une fonction lin√©aire ‚Üí prix proportionnel au nombre d'entr√©es."},
       {pts:5,text:"√Ä partir de combien d'entr√©es le tarif Libert√© est-il le plus int√©ressant par rapport au tarif Essentiel ?",ans:"240 < 50+5x ‚Üí 5x > 190 ‚Üí x > 38. Le tarif Libert√© est plus int√©ressant √† partir de 39 entr√©es."}
     ]},
    {title:"Alg√®bre ‚Äî Tarifs piscine et √©quation",notion:"Alg√®bre",pts:22,
     intro:"Tarif A : 5,90 ‚Ç¨/entr√©e. Tarif B : 30 ‚Ç¨ abonnement + 4,40 ‚Ç¨/entr√©e. ‚Äî DNB M√©tropole, 18 sept. 2023",
     questions:[
       {pts:6,text:"Calculer le prix pour 10 entr√©es avec chaque tarif.",ans:"Tarif A : 5,90√ó10 = 59 ‚Ç¨. Tarif B : 4,40√ó10+30 = 74 ‚Ç¨"},
       {pts:8,text:"R√©soudre 5,90x = 4,40x + 30. Quel est le nombre d'entr√©es pour lequel les tarifs sont √©gaux ?",ans:"1,50x = 30 ‚Üí x = 20 entr√©es"},
       {pts:8,text:"Pour x < 20, quel tarif est le moins cher ? Pour x > 20 ?",ans:"x < 20 (ex. 10 entr√©es) : A=59‚Ç¨ < B=74‚Ç¨ ‚Üí tarif A. x > 20 (ex. 30 entr√©es) : A=177‚Ç¨ > B=162‚Ç¨ ‚Üí tarif B."}
     ]},
    {title:"Alg√®bre ‚Äî Programme de calcul 10x¬≤",notion:"Alg√®bre",pts:20,
     intro:"Programme : x ‚Üí x¬≤ ‚Üí √ó5 ‚Üí +4 ‚Üí √ó2 ‚Üí ‚àí8 = r√©sultat. ‚Äî DNB Asie, 19 juin 2023",
     questions:[
       {pts:5,text:"Montrer que pour x=3, le r√©sultat est 90.",ans:"3¬≤=9 ‚Üí √ó5=45 ‚Üí +4=49 ‚Üí √ó2=98 ‚Üí ‚àí8=90 ‚úì"},
       {pts:5,text:"Montrer que pour x=2 et x=‚àí2, on obtient le m√™me r√©sultat.",ans:"(‚àí2)¬≤=4 = 2¬≤ ‚Üí m√™mes calculs ensuite ‚Üí m√™me r√©sultat 40 ‚úì"},
       {pts:5,text:"Montrer que le r√©sultat du programme s'√©crit 10x¬≤.",ans:"x ‚Üí x¬≤ ‚Üí 5x¬≤ ‚Üí 5x¬≤+4 ‚Üí 10x¬≤+8 ‚Üí 10x¬≤+8‚àí8 = 10x¬≤ ‚úì"},
       {pts:5,text:"Trouver la valeur exacte de l'ant√©c√©dent positif de 30 par f(x)=10x¬≤.",ans:"10x¬≤=30 ‚Üí x¬≤=3 ‚Üí x=‚àö3 (valeur exacte)"}
     ]},
    {title:"Alg√®bre ‚Äî Programme de calcul, factorisation (2024)",notion:"Alg√®bre",pts:20,
     intro:"Programme : x ‚Üí branche 1 : (x+2)√ó4 ; branche 2 : x√ó5‚àí3 ‚Üí multiplier les deux. ‚Äî DNB Am√©rique du Nord, 29 mai 2024",
     questions:[
       {pts:5,text:"Montrer que pour x=2, le r√©sultat est 112.",ans:"Branche 1 : (2+2)√ó4=16. Branche 2 : 2√ó5‚àí3=7. 16√ó7=112 ‚úì"},
       {pts:5,text:"Quel r√©sultat pour x=‚àí3 ?",ans:"Branche 1 : (‚àí3+2)√ó4=‚àí4. Branche 2 : ‚àí3√ó5‚àí3=‚àí18. R√©sultat = (‚àí4)√ó(‚àí18) = 72"},
       {pts:5,text:"Quelle expression traduit correctement ce programme parmi A:(x+2√ó4)(x√ó5‚àí3), B:(4x+2)(5x‚àí3), C:(4x+8)(5x‚àí3) ?",ans:"L'expression correcte est C : (4x+8)(5x‚àí3) = 4(x+2)(5x‚àí3). C et D = (x+2)√ó4√ó(5x‚àí3) sont correctes."},
       {pts:5,text:"D√©velopper et r√©duire (4x+8)(5x‚àí3). Trouver les deux valeurs donnant 0.",ans:"20x¬≤‚àí12x+40x‚àí24 = 20x¬≤+28x‚àí24. Pour 0 : 4x+8=0 ‚Üí x=‚àí2 ou 5x‚àí3=0 ‚Üí x=3/5"}
     ]},
    {title:"Alg√®bre ‚Äî Programmes A et B, fonctions affines",notion:"Alg√®bre",pts:20,
     intro:"Prog. A : x ‚Üí √ó(‚àí2) ‚Üí +5. Prog. B : x ‚Üí ‚àí5 ‚Üí √ó3 ‚Üí +11. ‚Äî DNB M√©tropole Antilles-Guyane, 26 juin 2023",
     questions:[
       {pts:5,text:"Montrer que pour x=‚àí3, le programme A donne 11.",ans:"(‚àí3)√ó(‚àí2)+5 = 6+5 = 11 ‚úì"},
       {pts:5,text:"Montrer que le r√©sultat du programme B s'√©crit 3x‚àí4.",ans:"(x‚àí5)√ó3+11 = 3x‚àí15+11 = 3x‚àí4 ‚úì"},
       {pts:5,text:"Les fonctions f(x)=‚àí2x+5 et g(x)=3x‚àí4 sont trac√©es. Par lecture graphique, donner la valeur pour laquelle f(x)=g(x).",ans:"D'apr√®s le graphique, les deux droites se croisent pour x ‚âà 1,8"},
       {pts:5,text:"Calculer pr√©cis√©ment le nombre de d√©part pour lequel les programmes A et B donnent le m√™me r√©sultat.",ans:"‚àí2x+5 = 3x‚àí4 ‚Üí ‚àí5x = ‚àí9 ‚Üí x = 9/5 = 1,8"}
     ]}
  ],

  proportionnalite2023:[
    {title:"Proportionnalit√© ‚Äî Visiteurs d'un site touristique",notion:"Proportionnalit√©",pts:20,
     intro:"Site touristique : 187 216 visiteurs en 2020, 219 042 en 2021. Objectif du maire : +15 % minimum. ‚Äî DNB Am√©rique du Nord, 31 mai 2023",
     questions:[
       {pts:7,text:"Calculer le taux d'√©volution entre 2020 et 2021. L'objectif a-t-il √©t√© atteint ?",ans:"Taux = (219042‚àí187216)/187216 √ó 100 ‚âà 17 %. Objectif 15 % atteint ‚úì"},
       {pts:7,text:"Si la progression se poursuit √† +17 % par an, combien de visiteurs en 2022 ?",ans:"219042 √ó 1,17 ‚âà 256 279 visiteurs"},
       {pts:6,text:"Le coefficient d'agrandissement du polygone 2 par rapport au polygone 1 est 3. Aire du polygone 1 = 11 cm¬≤. Calculer l'aire du polygone 2.",ans:"L'aire est multipli√©e par k¬≤=9. Aire polygone 2 = 11√ó9 = 99 cm¬≤"}
     ]}
  ],

  arithmetique2023:[
    {title:"Arithm√©tique ‚Äî PGCD paniers de l√©gumes",notion:"Arithm√©tique",pts:18,
     intro:"Jos√© dispose de 39 salades (3√ó13), 78 carottes et 51 aubergines. Il veut des paniers identiques utilisant tous les l√©gumes. ‚Äî DNB Nouvelle-Cal√©donie, d√©c. 2023",
     questions:[
       {pts:6,text:"D√©composer 78 et 51 en produit de facteurs premiers.",ans:"78 = 2√ó3√ó13. 51 = 3√ó17"},
       {pts:6,text:"Calculer le PGCD(39,78,51) et en d√©duire le nombre maximal de paniers.",ans:"PGCD(39,78)=39. PGCD(39,51)=3. PGCD(39,78,51)=3. Maximum 3 paniers."},
       {pts:6,text:"Jos√© fait 13 paniers. Combien d'aubergines par panier ? Combien sans panier ?",ans:"51√∑13=3 reste 12. Chaque panier : 3 aubergines. 12 aubergines non utilis√©es ‚Üí il faut en cueillir 1 de plus."}
     ]},
    {title:"Arithm√©tique ‚Äî PGCD lots figurines et autocollants",notion:"Arithm√©tique",pts:22,
     intro:"195 figurines et 234 autocollants (234=2√ó3¬≤√ó13). Lots identiques, tout doit √™tre utilis√©. ‚Äî DNB Centres √©trangers, 14 juin 2023",
     questions:[
       {pts:6,text:"Peut-on faire 3 lots identiques ? Justifier.",ans:"195√∑3=65 ‚úì. 234√∑3=78 ‚úì. Oui, 3 est un diviseur commun."},
       {pts:8,text:"D√©composer 195 en facteurs premiers. Calculer PGCD(195,234).",ans:"195 = 3√ó5√ó13. PGCD(195,234) = 3√ó13 = 39"},
       {pts:8,text:"Nombre maximal de lots ? Composition de chaque lot ?",ans:"Nombre max = 39 lots. Figurines/lot = 195/39 = 5. Autocollants/lot = 234/39 = 6."}
     ]},
    {title:"Arithm√©tique ‚Äî PPCM course de karting",notion:"Arithm√©tique",pts:22,
     intro:"Un professionnel fait un tour en 60 s, un amateur en 72 s. Ils partent ensemble. ‚Äî DNB Polyn√©sie, 23 juin 2023",
     questions:[
       {pts:7,text:"D√©composer 60 et 72 en produit de facteurs premiers.",ans:"60 = 2¬≤√ó3√ó5. 72 = 2¬≥√ó3¬≤"},
       {pts:8,text:"Au bout de combien de secondes se retrouveront-ils ensemble pour la premi√®re fois ?",ans:"PPCM(60,72) = 2¬≥√ó3¬≤√ó5 = 360 s = 6 minutes"},
       {pts:7,text:"Combien de tours chacun aura-t-il effectu√©s ?",ans:"Professionnel : 360/60 = 6 tours. Amateur : 360/72 = 5 tours"}
     ]},
    {title:"Arithm√©tique ‚Äî D√©composition et baguettes",notion:"Arithm√©tique",pts:16,
     intro:"Nombre de baguettes et prix (1‚Üí1,10‚Ç¨, 2‚Üí2,20‚Ç¨, 3‚Üí3,30‚Ç¨, 4‚Üí4‚Ç¨). Engrenage : roue A √† 8 dents, roue B √† 12 dents. ‚Äî DNB Am√©rique du Sud, nov. 2023",
     questions:[
       {pts:5,text:"Le prix est-il proportionnel au nombre de baguettes ? Justifier.",ans:"Pour 4 baguettes : 4‚Ç¨ ‚â† 4√ó1,10‚Ç¨ = 4,40‚Ç¨. Le rapport n'est pas constant ‚Üí pas de proportionnalit√©. FAUX."},
       {pts:5,text:"L'engrenage sera-t-il dans la m√™me position au bout de 6 tours pour la roue A et 4 tours pour la roue B ?",ans:"6√ó8 = 48 dents pour A. 4√ó12 = 48 dents pour B. M√™me nombre de dents engren√©es ‚Üí VRAI ‚úì"},
       {pts:6,text:"D√©composer 780 en produit de facteurs premiers.",ans:"780 = 2¬≤√ó3√ó5√ó13"}
     ]}
  ],

  volumes2023:[
    {title:"Volumes ‚Äî Bac √† sable sous cabane",notion:"Volumes",pts:24,
     intro:"Bac √† sable (pav√© droit) : 200 cm √ó 180 cm √ó 20 cm. Volume = 0,72 m¬≥. M√©lange sable ma√ßonner/sable fin ratio 3:2. ‚Äî DNB Centres √©trangers, 14 juin 2023",
     questions:[
       {pts:6,text:"Calculer le volume du bac en cm¬≥.",ans:"V = 200√ó180√ó20 = 720 000 cm¬≥"},
       {pts:8,text:"V√©rifier que le volume de sable √† ma√ßonner est 0,432 m¬≥ et de sable fin 0,288 m¬≥.",ans:"Ratio 3:2 ‚Üí 5 parts. Ma√ßonner = 3/5√ó0,72 = 0,432 m¬≥ ‚úì. Fin = 2/5√ó0,72 = 0,288 m¬≥ ‚úì"},
       {pts:10,text:"Sacs ma√ßonner : 35 kg / 0,022 m¬≥ / 2,95 ‚Ç¨. Sacs fin : 25 kg / 0,016 m¬≥ / 5,95 ‚Ç¨. Calculer le co√ªt total (sacs entiers).",ans:"Sacs ma√ßonner : ‚åà0,432/0,022‚åâ=20 ‚Üí 20√ó2,95=59 ‚Ç¨. Sacs fin : ‚åà0,288/0,016‚åâ=18 ‚Üí 18√ó5,95=107,10 ‚Ç¨. Total = 166,10 ‚Ç¨"}
     ]},
    {title:"Volumes ‚Äî B√©ton et ratio de m√©lange",notion:"Volumes",pts:21,
     intro:"4 m¬≥ de b√©ton √† r√©aliser. Ratio ciment:gravier:sable = 2:7:5. 1 m¬≥ n√©cessite 250 kg de ciment. Surface √† peindre = 48 m¬≤. ‚Äî DNB Am√©rique du Nord, 29 mai 2024",
     questions:[
       {pts:7,text:"Calculer la masse de ciment n√©cessaire pour 4 m¬≥ de b√©ton.",ans:"4√ó250 = 1 000 kg de ciment"},
       {pts:7,text:"Calculer la masse de gravier et de sable pour 4 m¬≥.",ans:"1 part ciment = 1000/2 = 500 kg. Gravier = 7√ó500 = 3 500 kg. Sable = 5√ó500 = 2 500 kg"},
       {pts:7,text:"On peint 48 m¬≤ en 2 couches (1 L = 5 m¬≤/couche). Pots A=5L √† 79,90 ‚Ç¨, Pots B=10L √† 129,90 ‚Ç¨, offre : ‚àí50% sur le 2e article identique. Quel est le choix le moins cher ?",ans:"Volume = 2√ó48/5 = 19,2 L. 2 pots B : 129,90+64,95=194,85 ‚Ç¨ (20 L). 4 pots A : 79,90√ó2+39,95√ó2=239,70 ‚Ç¨. Choisir 2 pots B."}
     ]},
    {title:"Volumes ‚Äî Rampe d'acc√®s prisme triangulaire",notion:"Volumes",pts:20,
     intro:"Rampe prisme triangulaire : AC=30 cm (hauteur), angle ACB=90¬∞, AB=124 cm, longueur BE=9 m. ‚Äî DNB Polyn√©sie, sept. 2023",
     questions:[
       {pts:6,text:"Montrer que BC ‚âà 120 cm.",ans:"BC = ‚àö(AB¬≤‚àíAC¬≤) = ‚àö(15376‚àí900) = ‚àö14476 ‚âà 120,3 cm ‚âà 120 cm ‚úì"},
       {pts:6,text:"Calculer l'angle ABC (au degr√© pr√®s).",ans:"tan(ABC) = AC/BC = 30/120 = 0,25 ‚Üí angle ABC ‚âà 14¬∞"},
       {pts:8,text:"Les propri√©taires pr√©voient 2 m¬≥ de b√©ton. Ce volume suffit-il pour la rampe ?",ans:"Aire base = (1/2)√ó120√ó30 = 1800 cm¬≤ = 0,18 m¬≤. V rampe = 0,18√ó9 = 1,62 m¬≥ < 2 m¬≥. Oui, suffisant ‚úì"}
     ]},
    {title:"Volumes ‚Äî Bougies cylindriques",notion:"Volumes",pts:16,
     intro:"Bougie cylindrique : rayon 3 cm, hauteur 12 cm. Volume de cire = 9/10 du volume total. Densit√© cire = 0,7 g/cm¬≥. ‚Äî DNB Am√©rique du Sud, nov. 2023",
     questions:[
       {pts:6,text:"Montrer que le volume d'une bougie est d'environ 339 cm¬≥.",ans:"V = œÄ√ó3¬≤√ó12 = 108œÄ ‚âà 339,3 cm¬≥ ‚âà 339 cm¬≥ ‚úì"},
       {pts:5,text:"Calculer la masse de cire n√©cessaire pour une bougie (au gramme pr√®s).",ans:"V cire = 9/10√ó339 = 305,1 cm¬≥. Masse = 305,1√ó0,7 ‚âà 214 g"},
       {pts:5,text:"Objectif production : moyenne de 7 900 bougies/mois sur 3 mois. Janvier : 6 500. F√©vrier : 8 000. Combien faut-il en produire en mars ?",ans:"Total objectif = 7900√ó3 = 23 700. D√©j√† produit = 6500+8000 = 14500. Mars = 23700‚àí14500 = 9 200 bougies"}
     ]}
  ],

  algorithmique2023:[
    {title:"Algorithmique ‚Äî Motif Fleur (Scratch)",notion:"Algorithmique",pts:20,
     intro:"Motif 'Fleur' = 5 p√©tales en parall√©logramme (35 pas √ó 20 pas, angles 60¬∞ et 120¬∞). ‚Äî DNB Am√©rique du Nord, 31 mai 2023",
     questions:[
       {pts:6,text:"Expliquer pourquoi le bloc Fleur utilise 72¬∞ entre chaque p√©tale.",ans:"360¬∞ √∑ 5 p√©tales = 72¬∞. Cela garantit un placement r√©gulier sur tout le tour."},
       {pts:7,text:"Combien de fois faut-il r√©p√©ter le bloc P√©tale pour une fleur √† 5 p√©tales ?",ans:"5 fois (5 rotations de 72¬∞ = 360¬∞ ‚Üí retour √† la position initiale)."},
       {pts:7,text:"On modifie pour une fleur √† 6 p√©tales. Quelles modifications apporter ?",ans:"Nombre de r√©p√©titions : 6. Angle de rotation : 360¬∞/6 = 60¬∞."}
     ]},
    {title:"Algorithmique ‚Äî Carr√©s imbriqu√©s avec Scratch",notion:"Algorithmique",pts:19,
     intro:"Programme Scratch construisant 10 carr√©s embo√Æt√©s. Le c√¥t√© du 1er carr√© = 300 pixels. Chaque carr√© suivant est r√©duit de 20 %. ‚Äî DNB Polyn√©sie, sept. 2023",
     questions:[
       {pts:5,text:"Montrer que le c√¥t√© du 2e carr√© mesure 240 pixels.",ans:"300√ó0,8 = 240 pixels ‚úì"},
       {pts:7,text:"Quelle est la longueur du dernier carr√© (10e) ? Arrondir au pixel.",ans:"300 √ó 0,8‚Åπ = 300 √ó 0,1342‚Ä¶ ‚âà 40 pixels"},
       {pts:7,text:"Le script ex√©cute 'mettre C√¥t√© √† C√¥t√©√ó0,8' dans une boucle. Quelle est la valeur du c√¥t√© apr√®s 3 it√©rations ?",ans:"300 ‚Üí 240 ‚Üí 192 ‚Üí 153,6 ‚âà 154 pixels"}
     ]},
    {title:"Algorithmique ‚Äî Triangle et Scratch (2024)",notion:"Algorithmique",pts:19,
     intro:"Programme Scratch pour tracer le grand triangle ABC (c√¥t√©=240) puis le petit CDE (c√¥t√©=80). Variable 'c√¥t√©'. ‚Äî DNB Am√©rique du Nord, 29 mai 2024",
     questions:[
       {pts:5,text:"Quelles sont les coordonn√©es du point de d√©part du lutin ?",ans:"Ligne 2 du programme : aller √† x:‚àí180, y:‚àí150. Coordonn√©es = (‚àí180 ; ‚àí150)"},
       {pts:7,text:"Quelle valeur saisir √† la ligne 4 (mettre c√¥t√© √† ...) pour tracer le grand triangle ?",ans:"c√¥t√© = 240 (AB = 240 mm = 240 pas)"},
       {pts:7,text:"Expliquer l'instruction 'c√¥t√©/3' (ligne 8) et calculer le c√¥t√© du petit triangle.",ans:"CE = 80 mm = 240/3 ‚Üí r√©duction de rapport 1/3. c√¥t√©/3 = 240/3 = 80 pas."}
     ]}
  ]
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SETUP
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function selTimer(el){
  document.querySelectorAll('.timer-chip').forEach(c=>c.classList.remove('sel'));
  el.classList.add('sel'); selMin = parseInt(el.dataset.min);
  const h=Math.floor(selMin/60),m=selMin%60;
  document.getElementById('setupTimerVal').textContent = h>0?(m>0?`${h}h${m}`:h+'h'):m+' min';
}
function selChap(el){
  const id=el.dataset.id;
  if(id==='all'){
    document.querySelectorAll('.chap-chip').forEach(c=>{c.classList.remove('sel');c.querySelector('.chk').textContent='';});
    el.classList.add('sel'); el.querySelector('.chk').textContent='‚úì';
    selChaps=['all'];
  } else {
    const allC=document.querySelector('.chap-chip[data-id="all"]');
    allC.classList.remove('sel'); allC.querySelector('.chk').textContent='';
    el.classList.toggle('sel');
    el.querySelector('.chk').textContent = el.classList.contains('sel')?'‚úì':'';
    selChaps=[...document.querySelectorAll('.chap-chip.sel')].map(c=>c.dataset.id).filter(i=>i!=='all');
    if(!selChaps.length){ allC.classList.add('sel'); allC.querySelector('.chk').textContent='‚úì'; selChaps=['all']; }
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   EXAM
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function pickExercises(){
  let pool=[];
  if(selChaps.includes('all')){
    Object.values(BANK).forEach(arr=>pool.push(...arr));
  } else {
    selChaps.forEach(ch=>{
      // Include base key and all extended keys (e.g. probabilites + probabilites2023 + probabilites2023a)
      Object.keys(BANK).filter(k=>k===ch||k.startsWith(ch)).forEach(k=>pool.push(...BANK[k]));
    });
  }
  for(let i=pool.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[pool[i],pool[j]]=[pool[j],pool[i]];}
  return pool.slice(0,5);
}

function startExam(){
  const picked=pickExercises(); if(!picked.length) return;
  exerciseData=picked; scores={}; validated={}; feedbacks={};
  go('screen-exam',null);
  document.getElementById('exContainer').innerHTML='';
  document.getElementById('examFooter').style.display='none';
  document.getElementById('loadingBox').style.display='block';
  document.getElementById('examSub').textContent='Chargement‚Ä¶';
  startTimer(selMin*60);
  setTimeout(renderExam, 300);
}

function renderExam(){
  document.getElementById('loadingBox').style.display='none';
  const container=document.getElementById('exContainer');
  const pills=document.getElementById('pillsBar');
  pills.innerHTML=''; container.innerHTML='';
  document.getElementById('examSub').textContent=[...new Set(exerciseData.map(e=>e.notion))].join(' ¬∑ ');

  exerciseData.forEach((ex,ei)=>{
    const exId=`ex${ei+1}`;
    const totalPts=ex.questions.reduce((s,q)=>s+q.pts,0);

    const pill=document.createElement('button');
    pill.className='pill'; pill.id=`pill-${exId}`;
    pill.textContent=`Ex. ${ei+1} ‚Äî ${ex.notion}`;
    pill.onclick=()=>document.getElementById(exId)?.scrollIntoView({behavior:'smooth',block:'start'});
    pills.appendChild(pill);

    let tableHTML='';
    if(ex.tableData){tableHTML=`<table><tr>${ex.tableData.headers.map(h=>`<th>${h}</th>`).join('')}</tr>${ex.tableData.rows.map(r=>`<tr>${r.map(c=>`<td>${c}</td>`).join('')}</tr>`).join('')}</table>`;}

    let qHTML='';
    ex.questions.forEach((q,qi)=>{
      const qId=`${exId}q${qi+1}`;
      const ae=escQ(q.ans);
      qHTML+=`<div class="question">
        <div class="q-head"><span class="q-num">Question ${ei+1}.${qi+1}</span><span class="q-pts-badge">${q.pts} pts</span></div>
        <div class="q-text">${q.text}</div>
        <div class="answer-zone">
          <div class="answer-lbl">Ma r√©ponse</div>
          <textarea class="answer-ta" id="a-${qId}" placeholder="R√©digez votre r√©ponse ici‚Ä¶" oninput="onType(this)"></textarea>
          <div class="val-bar">
            <button class="btn-val" id="vbtn-${qId}" onclick="doVal('${qId}','${exId}',${q.pts},'${ae}')" disabled>‚úì Valider</button>
            <button class="btn-edit" id="ebtn-${qId}" onclick="doEdit('${qId}','${exId}')">‚úé Modifier</button>
            <span class="val-tag" id="vtag-${qId}">‚úÖ Valid√©e</span>
            <span class="val-hint" id="vhint-${qId}">R√©digez puis validez</span>
          </div>
          <div class="ai-result" id="ar-${qId}"></div>
        </div>
      </div>`;
    });

    const corrBlocks=ex.questions.map((q,qi)=>`<div class="corr-block"><div class="corr-title">Q${ei+1}.${qi+1}</div><p>${q.ans}</p></div>`).join('');

    container.insertAdjacentHTML('beforeend',`<div class="exercise" id="${exId}">
      <div class="ex-head">
        <div>
          <div class="ex-eyebrow">Exercice ${ei+1}</div>
          <div class="ex-title">${ex.title}</div>
          <div class="ex-notion">${ex.notion}</div>
        </div>
        <div class="ex-pts"><div class="n">${totalPts}</div><div class="l">points</div></div>
      </div>
      <div class="ex-body">
        <p>${ex.intro}</p>${tableHTML}${qHTML}
        <div class="corr-toggle">
          <button class="btn-see" id="cBtn-${exId}" onclick="toggleCorr('corr-${exId}','cBtn-${exId}')" disabled>‚ñ∂ Voir la correction</button>
          <span class="corr-hint" id="chint-${exId}">Validez toutes vos r√©ponses pour acc√©der √† la correction</span>
        </div>
        <div class="correction" id="corr-${exId}">
          <div class="corr-head"><div class="corr-badge">‚úì</div><span>Correction d√©taill√©e</span></div>
          ${corrBlocks}
        </div>
      </div>
    </div>`);
  });

  document.getElementById('examFooter').style.display='flex';
  updateLive();
}

function escQ(s){return(s||'').replace(/\\/g,'\\\\').replace(/'/g,"\\'").replace(/"/g,'&quot;');}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TIMER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function startTimer(s){ clearInterval(timerIv); secsLeft=s; renderTimer(); timerIv=setInterval(()=>{secsLeft--;renderTimer();if(secsLeft<=0){clearInterval(timerIv);endExam();}},1000); }
function renderTimer(){ const h=Math.floor(secsLeft/3600),m=Math.floor((secsLeft%3600)/60),s=secsLeft%60; const el=document.getElementById('timerFace'); el.textContent=`${p2(h)}:${p2(m)}:${p2(s)}`; el.className='timer-face'+(secsLeft<300?' danger':secsLeft<600?' warn':''); }
function p2(n){return String(n).padStart(2,'0');}
function endEarly(){if(confirm('Terminer le brevet maintenant ?'))endExam();}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ANSWERS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function onType(el){
  const has=el.value.trim().length>0; el.classList.toggle('has-content',has);
  const qId=el.id.replace('a-','');
  const btn=document.getElementById('vbtn-'+qId); if(btn)btn.disabled=!has;
  const hint=document.getElementById('vhint-'+qId); if(hint)hint.textContent=has?'Cliquez pour valider':'R√©digez puis validez';
}

async function doVal(qId,exId,maxPts,ae){
  const ta=document.getElementById('a-'+qId);
  const answer=ta.value.trim(); if(!answer)return;
  validated[qId]=true; ta.classList.add('locked'); ta.readOnly=true;
  document.getElementById('vbtn-'+qId).style.display='none';
  document.getElementById('ebtn-'+qId).style.display='inline-flex';
  document.getElementById('vtag-'+qId).classList.add('show');
  const hint=document.getElementById('vhint-'+qId); if(hint)hint.textContent='';
  const ar=document.getElementById('ar-'+qId);
  ar.classList.add('visible');
  ar.innerHTML=`<div class="ai-rh loading-bg"><span class="ai-rl"><span class="mini-sp"></span>&nbsp; Correction en cours‚Ä¶</span><span class="ai-sc loading-col">‚Ä¶</span></div>`;
  const officialAns=ae.replace(/&quot;/g,'"');
  const prompt=`Tu es un correcteur du brevet des coll√®ges en math√©matiques. La question vaut ${maxPts} points.\nR√©ponse officielle : "${officialAns}"\nR√©ponse de l'√©l√®ve : "${answer}"\nR√©ponds UNIQUEMENT en JSON valide : {"pts":<entier 0 √† ${maxPts}>,"feedback":"<1-2 phrases courtes en fran√ßais>"}`;
  let pts=0,feedback='';
  try{
    const resp=await fetch('https://api.anthropic.com/v1/messages',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:200,messages:[{role:'user',content:prompt}]})});
    const data=await resp.json();
    const raw=data.content?.[0]?.text||'{}';
    const parsed=JSON.parse(raw.replace(/```json|```/g,'').trim());
    pts=Math.max(0,Math.min(maxPts,Math.round(parsed.pts))); feedback=parsed.feedback||'';
  }catch(e){feedback='Correction indisponible.';}
  scores[qId]=pts; feedbacks[qId]=feedback;
  updateLive(); updatePill(exId);
  const ratio=pts/maxPts;
  let cls,icon,label;
  if(ratio>=.85){cls='correct';icon='‚úì';label='Correct';}
  else if(ratio>=.4){cls='partial';icon='~';label='Partiellement correct';}
  else{cls='wrong';icon='‚úó';label='Incorrect';}
  ar.innerHTML=`<div class="ai-rh ${cls}-bg"><span class="ai-rl" style="color:${cls==='correct'?'var(--green)':cls==='partial'?'var(--gold)':'var(--red)'}">${icon} ${label}</span><span class="ai-sc ${cls}-col">${pts}<span style="font-size:13px;opacity:.5;font-weight:400"> / ${maxPts} pts</span></span></div><div class="ai-fb">${feedback}</div>`;
}

function doEdit(qId,exId){
  validated[qId]=false; delete scores[qId]; delete feedbacks[qId];
  const ta=document.getElementById('a-'+qId); ta.classList.remove('locked'); ta.readOnly=false; ta.focus();
  document.getElementById('vbtn-'+qId).style.display='inline-flex';
  document.getElementById('vbtn-'+qId).disabled=false;
  document.getElementById('ebtn-'+qId).style.display='none';
  document.getElementById('vtag-'+qId).classList.remove('show');
  const hint=document.getElementById('vhint-'+qId); if(hint)hint.textContent='Modifiez puis revalidez';
  const ar=document.getElementById('ar-'+qId); ar.classList.remove('visible'); ar.innerHTML='';
  updateLive(); updatePill(exId);
}

function toggleCorr(corrId,btnId){
  const p=document.getElementById(corrId),b=document.getElementById(btnId);
  const open=p.classList.contains('open');
  if(open){p.classList.remove('open');b.textContent='‚ñ∂ Voir la correction';b.classList.remove('active');}
  else{p.classList.add('open');b.textContent='‚ñº Masquer';b.classList.add('active');setTimeout(()=>p.scrollIntoView({behavior:'smooth',block:'nearest'}),80);}
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SCORING
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function totalScore(){return Object.values(scores).reduce((s,v)=>s+v,0);}
function updateLive(){
  const t=totalScore();
  const el=document.getElementById('liveSc'); if(el)el.textContent=t;
  const fe=document.getElementById('footerSc'); if(fe)fe.textContent=t;
}
function updatePill(exId){
  const idx=parseInt(exId.replace('ex',''))-1;
  const ex=exerciseData[idx]; if(!ex)return;
  const qIds=ex.questions.map((_,i)=>`${exId}q${i+1}`);
  const pill=document.getElementById(`pill-${exId}`); if(!pill)return;
  const anyVal=qIds.some(q=>validated[q]);
  const allGraded=qIds.every(q=>scores[q]!==undefined);
  pill.classList.toggle('answered',anyVal&&!allGraded);
  pill.classList.toggle('corrected',allGraded);
  const cBtn=document.getElementById(`cBtn-${exId}`);
  const chint=document.getElementById(`chint-${exId}`);
  if(cBtn){
    const rem=qIds.filter(q=>!validated[q]).length;
    if(allGraded){cBtn.disabled=false;if(chint)chint.textContent='Correction disponible';}
    else if(anyVal){if(chint)chint.textContent=`Encore ${rem} r√©ponse${rem>1?'s':''} √† valider`;}
  }
}
function getMention(s){
  if(s>=90)return'üèÜ F√©licitations ‚Äî Excellent';if(s>=80)return'üåü Tr√®s Bien';
  if(s>=70)return'üëç Bien';if(s>=60)return'‚úÖ Assez Bien';
  if(s>=50)return'üìö Admis';return'üí™ √Ä retravailler';
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   END EXAM
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function endExam(){
  clearInterval(timerIv);
  const total=totalScore();
  const maxTotal=exerciseData.reduce((s,ex)=>s+ex.questions.reduce((s2,q)=>s2+q.pts,0),0);
  const scaled=Math.round(total/maxTotal*100);
  saveSession(scaled);
  go('screen-results',null);
  document.getElementById('resScore').innerHTML=`${scaled} <span>/ 100</span>`;
  document.getElementById('resMention').textContent=getMention(scaled);
  const barCol=scaled>=70?'#1d6b3a':scaled>=50?'#a06c00':'#c0392b';
  setTimeout(()=>{document.getElementById('resBar').style.width=scaled+'%';document.getElementById('resBar').style.background=barCol;},100);

  let correct=0,partial=0,wrong=0;
  exerciseData.forEach((ex,i)=>{ex.questions.forEach((q,j)=>{const r=(scores[`ex${i+1}q${j+1}`]||0)/q.pts;if(r>=.85)correct++;else if(r>=.4)partial++;else wrong++;});});
  document.getElementById('resCorrect').textContent=correct;
  document.getElementById('resPartial').textContent=partial;
  document.getElementById('resWrong').textContent=wrong;

  const ns={};
  exerciseData.forEach((ex,i)=>{const n=ex.notion;if(!ns[n])ns[n]={e:0,m:0};ex.questions.forEach((q,j)=>{const qId=`ex${i+1}q${j+1}`;ns[n].e+=scores[qId]||0;ns[n].m+=q.pts;});});
  let nH='';
  Object.entries(ns).forEach(([n,v])=>{const pct=Math.round(v.e/v.m*100);const col=pct>=70?'var(--green)':pct>=40?'var(--gold)':'var(--red)';nH+=`<div class="bdown-row"><div><div class="bdown-notion">${n}</div><div class="bdown-pct"><div class="bdown-pct-fill" style="width:${pct}%;background:${col}"></div></div></div><div class="bdown-pts" style="color:${col}">${v.e}/${v.m}</div></div>`;});
  document.getElementById('resByNotion').innerHTML=nH||'<p style="color:var(--ink4);font-style:italic">Aucune question valid√©e.</p>';

  let eH='',ec=0;
  exerciseData.forEach((ex,i)=>{ex.questions.forEach((q,j)=>{const qId=`ex${i+1}q${j+1}`;const sc=scores[qId]||0;if(sc<q.pts*.85&&feedbacks[qId]){ec++;const col=sc===0?'var(--red)':'var(--gold)';eH+=`<div class="err-card"><div class="err-q">${q.text.substring(0,90)}‚Ä¶</div><div class="err-sc" style="color:${col}">${sc}/${q.pts} pts</div><div class="err-fb">${feedbacks[qId]}</div></div>`;}});});
  document.getElementById('resErrors').innerHTML=ec?eH:'<p style="color:var(--green);font-weight:600">üéâ Excellente performance !</p>';

  setTimeout(()=>document.querySelectorAll('.bdown-pct-fill').forEach(el=>{const w=el.style.width;el.style.width='0';setTimeout(()=>el.style.width=w,50);}),100);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   STORAGE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
async function saveSession(scaled){
  const s={date:new Date().toLocaleDateString('fr-FR'),ts:Date.now(),score:scaled,notions:[...new Set(exerciseData.map(e=>e.notion))],duration:selMin,errors:[]};
  exerciseData.forEach((ex,i)=>{ex.questions.forEach((q,j)=>{const qId=`ex${i+1}q${j+1}`;const sc=scores[qId]||0;if(sc<q.pts*.85)s.errors.push({notion:ex.notion,pts:sc,maxPts:q.pts,fb:feedbacks[qId]||'',qText:q.text.substring(0,80)});});});
  try{
    let sessions=[];
    try{const d=await window.storage.get('sessions');if(d)sessions=JSON.parse(d.value);}catch(e){}
    sessions.push(s);
    if(sessions.length>100)sessions.splice(0,sessions.length-100);
    await window.storage.set('sessions',JSON.stringify(sessions));
  }catch(e){}
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DASHBOARD
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
async function renderDash(){
  let sessions=[];
  try{const d=await window.storage.get('sessions');if(d)sessions=JSON.parse(d.value);}catch(e){}

  if(!sessions.length){
    document.getElementById('dashStats').innerHTML='';
    document.getElementById('chartSection').style.display='none';
    document.getElementById('dashGrid').innerHTML=`<div class="empty-state" style="grid-column:1/-1"><span class="ei">üìä</span><p>Aucun brevet blanc effectu√© pour l'instant.<br>Lancez votre premier entra√Ænement pour voir vos statistiques !</p><button class="btn btn-dark" style="margin:20px auto 0;display:inline-flex" onclick="go('screen-setup','navSetup')">Commencer ‚Üí</button></div>`;
    return;
  }

  const avg=Math.round(sessions.reduce((s,x)=>s+x.score,0)/sessions.length);
  const best=Math.max(...sessions.map(x=>x.score));
  const last=sessions[sessions.length-1].score;
  const trend=sessions.length>1?last-sessions[sessions.length-2].score:0;
  const trendStr=trend>0?`‚Üë +${trend}`:trend<0?`‚Üì ${trend}`:'‚Üí stable';
  const trendCol=trend>0?'var(--green)':trend<0?'var(--red)':'var(--ink4)';
  const totalErrs=sessions.reduce((s,x)=>s+x.errors.length,0);

  document.getElementById('dashStats').innerHTML=`
    <div class="stat-card"><div class="sc-val navy">${sessions.length}</div><div class="sc-lbl">Brevets blancs</div></div>
    <div class="stat-card"><div class="sc-val green">${avg}<span style="font-size:16px">/100</span></div><div class="sc-lbl">Moyenne g√©n√©rale</div></div>
    <div class="stat-card"><div class="sc-val gold">${best}<span style="font-size:16px">/100</span></div><div class="sc-lbl">Meilleur score</div></div>
    <div class="stat-card"><div class="sc-val" style="font-size:20px;color:${trendCol}">${trendStr}</div><div class="sc-lbl">Tendance</div></div>
    <div class="stat-card"><div class="sc-val red">${totalErrs}</div><div class="sc-lbl">Erreurs totales</div></div>`;

  if(sessions.length>=2){
    document.getElementById('chartSection').style.display='block';
    const recent=sessions.slice(-12);
    document.getElementById('chartWrap').innerHTML=recent.map(s=>{
      const h=Math.max(4,Math.round(s.score));
      const col=s.score>=70?'var(--green)':s.score>=50?'var(--gold)':'var(--red)';
      return `<div class="chart-col"><div class="chart-val">${s.score}</div><div class="chart-bar" style="height:${h}px;background:${col};opacity:.75" title="${s.date}: ${s.score}/100"></div><div class="chart-lbl">${s.date.split('/').slice(0,2).join('/')}</div></div>`;
    }).join('');
  } else {
    document.getElementById('chartSection').style.display='none';
  }

  let hH=`<table class="hist-table"><thead><tr><th>Date</th><th>Notions</th><th>Score</th><th>Dur√©e</th></tr></thead><tbody>`;
  [...sessions].reverse().slice(0,20).forEach(s=>{
    const chip=s.score>=70?'a':s.score>=50?'b':'c';
    hH+=`<tr><td>${s.date}</td><td style="font-size:11px;color:var(--ink4);max-width:140px">${(s.notions||[]).join(', ').substring(0,36)}</td><td><span class="score-chip ${chip}">${s.score}/100</span></td><td style="font-size:12px;color:var(--ink4)">${s.duration}m</td></tr>`;
  });
  hH+='</tbody></table>';

  const nErrs={};
  sessions.forEach(s=>{s.errors.forEach(e=>{if(!nErrs[e.notion])nErrs[e.notion]=0;nErrs[e.notion]++;});});
  const sorted=Object.entries(nErrs).sort((a,b)=>b[1]-a[1]);
  let wH='';
  if(!sorted.length){wH='<p style="color:var(--green);font-weight:600">Aucun point faible identifi√© üéâ</p>';}
  else{const mx=Math.max(...sorted.map(([,v])=>v),1);sorted.slice(0,8).forEach(([n,v])=>{const pct=Math.round(v/mx*100);const col=pct>60?'var(--red)':pct>30?'var(--gold)':'var(--green)';wH+=`<div class="nb-row"><div class="nb-label">${n}</div><div class="nb-track"><div class="nb-fill" style="width:${pct}%;background:${col}"></div></div><div class="nb-count">${v}</div></div>`;});}

  const lastErrs=sessions[sessions.length-1]?.errors||[];
  let errH=lastErrs.length?lastErrs.slice(0,3).map(e=>`<div class="err-card" style="margin-bottom:8px"><div class="err-q">${e.qText||''}‚Ä¶</div><div class="err-sc" style="color:var(--red)">${e.pts}/${e.maxPts} pts ‚Äî ${e.notion}</div><div class="err-fb">${e.fb}</div></div>`).join(''):'<p style="font-style:italic;color:var(--ink4);font-size:13px">Aucune erreur sur le dernier brevet !</p>';

  document.getElementById('dashGrid').innerHTML=`
    <div>
      <div class="rule">Historique complet</div>
      ${hH}
    </div>
    <div>
      <div class="rule">Points faibles par notion</div>
      <div style="margin-bottom:28px">${wH}</div>
      <div class="rule">Derni√®res erreurs</div>
      <div>${errH}</div>
    </div>`;

  setTimeout(()=>document.querySelectorAll('.nb-fill').forEach(el=>{const w=el.style.width;el.style.width='0';setTimeout(()=>el.style.width=w,50);}),100);
}
</script>
</body>
</html>
